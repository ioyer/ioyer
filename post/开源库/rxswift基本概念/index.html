<!DOCTYPE html>
<html lang="zh-cn">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>RxSwiftåŸºæœ¬æ¦‚å¿µ - Even - A super concise theme for Hugo</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<meta name="author" content="iTBoyer" /><meta name="description" content="FRPå‡½æ•°å¼ååº”å‹ç¼–ç¨‹ Functional Reactive Programming ï¼Œ ç¼©å†™ä¸º FRP å‡½æ•°ç¼–ç¨‹ å‡½æ•°æ˜¯ç¬¬ä¸€ç­‰å…¬æ°‘ æ‰€è°“ ç¬¬ä¸€ç­‰å…¬æ°‘ (first class) ï¼ŒæŒ‡çš„æ˜¯å‡½æ•°ä¸å…¶ä»–æ•°æ®ç±»å‹ä¸€æ ·ï¼Œå¤„äºå¹³ç­‰åœ°ä½ã€‚æ—¢å¯ä»¥èµ‹å€¼ç»™å…¶" /><meta name="keywords" content="Hugo, swift, org-mode" />






<meta name="generator" content="Hugo 0.56.3 with even 4.0.0" />


<link rel="canonical" href="https://huos3203.github.io/post/%E5%BC%80%E6%BA%90%E5%BA%93/rxswift%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5/" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">

<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<link href="/dist/even.c2a46f00.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css" integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin="anonymous">


<meta property="og:title" content="RxSwiftåŸºæœ¬æ¦‚å¿µ" />
<meta property="og:description" content="FRPå‡½æ•°å¼ååº”å‹ç¼–ç¨‹ Functional Reactive Programming ï¼Œ ç¼©å†™ä¸º FRP å‡½æ•°ç¼–ç¨‹ å‡½æ•°æ˜¯ç¬¬ä¸€ç­‰å…¬æ°‘ æ‰€è°“ ç¬¬ä¸€ç­‰å…¬æ°‘ (first class) ï¼ŒæŒ‡çš„æ˜¯å‡½æ•°ä¸å…¶ä»–æ•°æ®ç±»å‹ä¸€æ ·ï¼Œå¤„äºå¹³ç­‰åœ°ä½ã€‚æ—¢å¯ä»¥èµ‹å€¼ç»™å…¶" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://huos3203.github.io/post/%E5%BC%80%E6%BA%90%E5%BA%93/rxswift%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5/" />
<meta property="article:published_time" content="2017-03-03T13:01:41+00:00" />
<meta property="article:modified_time" content="2019-08-08T17:46:02+08:00" />
<meta itemprop="name" content="RxSwiftåŸºæœ¬æ¦‚å¿µ">
<meta itemprop="description" content="FRPå‡½æ•°å¼ååº”å‹ç¼–ç¨‹ Functional Reactive Programming ï¼Œ ç¼©å†™ä¸º FRP å‡½æ•°ç¼–ç¨‹ å‡½æ•°æ˜¯ç¬¬ä¸€ç­‰å…¬æ°‘ æ‰€è°“ ç¬¬ä¸€ç­‰å…¬æ°‘ (first class) ï¼ŒæŒ‡çš„æ˜¯å‡½æ•°ä¸å…¶ä»–æ•°æ®ç±»å‹ä¸€æ ·ï¼Œå¤„äºå¹³ç­‰åœ°ä½ã€‚æ—¢å¯ä»¥èµ‹å€¼ç»™å…¶">


<meta itemprop="datePublished" content="2017-03-03T13:01:41&#43;00:00" />
<meta itemprop="dateModified" content="2019-08-08T17:46:02&#43;08:00" />
<meta itemprop="wordCount" content="4165">



<meta itemprop="keywords" content="" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="RxSwiftåŸºæœ¬æ¦‚å¿µ"/>
<meta name="twitter:description" content="FRPå‡½æ•°å¼ååº”å‹ç¼–ç¨‹ Functional Reactive Programming ï¼Œ ç¼©å†™ä¸º FRP å‡½æ•°ç¼–ç¨‹ å‡½æ•°æ˜¯ç¬¬ä¸€ç­‰å…¬æ°‘ æ‰€è°“ ç¬¬ä¸€ç­‰å…¬æ°‘ (first class) ï¼ŒæŒ‡çš„æ˜¯å‡½æ•°ä¸å…¶ä»–æ•°æ®ç±»å‹ä¸€æ ·ï¼Œå¤„äºå¹³ç­‰åœ°ä½ã€‚æ—¢å¯ä»¥èµ‹å€¼ç»™å…¶"/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">Even</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/">
        <li class="mobile-menu-item">ä¸»é¡µ</li>
      </a><a href="/post/">
        <li class="mobile-menu-item">å½’æ¡£</li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">æ ‡ç­¾ğŸ·ï¸</li>
      </a><a href="/categories/">
        <li class="mobile-menu-item">åˆ†ç±»</li>
      </a>
  </ul>
</nav>
  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">Even</a>
</div>

<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/">ä¸»é¡µ</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/post/">å½’æ¡£</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/tags/">æ ‡ç­¾ğŸ·ï¸</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/categories/">åˆ†ç±»</a>
      </li>
  </ul>
</nav>
    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">RxSwiftåŸºæœ¬æ¦‚å¿µ</h1>

      <div class="post-meta">
        <span class="post-time"> 2017-03-03 </span>
        <div class="post-category">
            <a href="/categories/%E5%BC%80%E6%BA%90%E5%BA%93/"> å¼€æºåº“ </a>
            </div>
          <span class="more-meta"> çº¦ 4165 å­— </span>
          <span class="more-meta"> é¢„è®¡é˜…è¯» 9 åˆ†é’Ÿ </span>
        <span id="busuanzi_container_page_pv" class="more-meta"> <span id="busuanzi_value_page_pv"><img src="/img/spinner.svg" alt="spinner.svg"/></span> æ¬¡é˜…è¯» </span>
      </div>
    </header>

    <div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">æ–‡ç« ç›®å½•</h2>
  <div class="post-toc-content always-active">
    <nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#frpå‡½æ•°å¼ååº”å‹ç¼–ç¨‹">FRPå‡½æ•°å¼ååº”å‹ç¼–ç¨‹</a></li>
<li><a href="#å‡½æ•°ç¼–ç¨‹">å‡½æ•°ç¼–ç¨‹</a>
<ul>
<li><a href="#å‡½æ•°æ˜¯ç¬¬ä¸€ç­‰å…¬æ°‘">å‡½æ•°æ˜¯ç¬¬ä¸€ç­‰å…¬æ°‘</a></li>
<li><a href="#å‡½æ•°å¼çš„å‡½æ•°">å‡½æ•°å¼çš„å‡½æ•°</a>
<ul>
<li><a href="#map-æ˜ å°„å‡½æ•°">map æ˜ å°„å‡½æ•°</a></li>
<li><a href="#filter-ç­›é€‰å‡½æ•°">filter ç­›é€‰å‡½æ•°</a></li>
<li><a href="#reduce-è¿­ä»£å‡½æ•°">reduce è¿­ä»£å‡½æ•°</a></li>
</ul></li>
<li><a href="#å‡½æ•°å¼å’ŒæŒ‡ä»¤å¼çš„æ¯”è¾ƒ">å‡½æ•°å¼å’ŒæŒ‡ä»¤å¼çš„æ¯”è¾ƒ</a></li>
</ul></li>
<li><a href="#å“åº”å¼ç¼–ç¨‹-reactive">å“åº”å¼ç¼–ç¨‹ - Reactive</a></li>
<li><a href="#swift-å‡½æ•°å¼ç¼–ç¨‹">swift å‡½æ•°å¼ç¼–ç¨‹</a></li>
</ul></li>
<li><a href="#rxswift-å“åº”å¼ç¼–ç¨‹">RxSwift å“åº”å¼ç¼–ç¨‹</a>
<ul>
<li><a href="#observableè§‚å¯Ÿè€…æ¨¡å¼">Observableè§‚å¯Ÿè€…æ¨¡å¼</a>
<ul>
<li><a href="#æ–°å»ºè®¢é˜…æºå‡ ç§å¿«æ·æ–¹æ³•">æ–°å»ºè®¢é˜…æºå‡ ç§å¿«æ·æ–¹æ³•</a></li>
<li><a href="#createè‡ªå®šä¹‰è®¢é˜…æº">createè‡ªå®šä¹‰è®¢é˜…æº</a></li>
<li><a href="#deferredè®¢é˜…æºçš„æ‡’åŠ è½½">deferredè®¢é˜…æºçš„æ‡’åŠ è½½</a></li>
</ul></li>
<li><a href="#å‡ ç§ç‰¹æ®Šç±»å‹çš„è®¢é˜…æº">å‡ ç§ç‰¹æ®Šç±»å‹çš„è®¢é˜…æº</a>
<ul>
<li><a href="#publishsubject-å‘æ‰€æœ‰è®¢é˜…è€…å‘é€äº‹ä»¶é˜Ÿåˆ—">PublishSubject å‘æ‰€æœ‰è®¢é˜…è€…å‘é€äº‹ä»¶é˜Ÿåˆ—</a></li>
<li><a href="#åŸºäºpublishsubjectçš„å‡ ç§è¡¥å‘å¼è®¢é˜…æº">åŸºäºPublishSubjectçš„å‡ ç§è¡¥å‘å¼è®¢é˜…æº</a>
<ul>
<li><a href="#replaysubjectå…ˆå‘æœ€æ–°è®¢é˜…è€…è¡¥å‘æ‰€æœ‰å·²å‘ç”Ÿçš„äº‹ä»¶">ReplaySubjectå…ˆå‘æœ€æ–°è®¢é˜…è€…è¡¥å‘æ‰€æœ‰å·²å‘ç”Ÿçš„äº‹ä»¶</a></li>
<li><a href="#behaviorsubject-å…ˆå‘æœ€æ–°è®¢é˜…è€…è¡¥å‘æœ€è¿‘ä¸€æ¬¡å†å²äº‹ä»¶">BehaviorSubject å…ˆå‘æœ€æ–°è®¢é˜…è€…è¡¥å‘æœ€è¿‘ä¸€æ¬¡å†å²äº‹ä»¶</a></li>
<li><a href="#variable">Variable</a></li>
</ul></li>
</ul></li>
<li><a href="#æ”¯æŒè®¢é˜…çš„åµŒå¥—å‡½æ•°">æ”¯æŒè®¢é˜…çš„åµŒå¥—å‡½æ•°</a>
<ul>
<li><a href="#map-è§„åˆ™-éå†æ˜ å°„">map{è§„åˆ™} éå†æ˜ å°„</a></li>
<li><a href="#flatmap-åµŒå¥—å¼éå†æ˜ å°„">flatMap åµŒå¥—å¼éå†æ˜ å°„</a></li>
<li><a href="#scan-initial-u-combine-u-t-u-è¿­ä»£æ˜ å°„">scan(initial:U,combine:(U, T) -&gt; U)è¿­ä»£æ˜ å°„</a></li>
</ul></li>
<li><a href="#filtering-æ”¯æŒè®¢é˜…çš„è¿‡æ»¤å™¨">Filtering æ”¯æŒè®¢é˜…çš„è¿‡æ»¤å™¨</a>
<ul>
<li><a href="#filter-å¸ƒå°”è¯­å¥-æ¡ä»¶è¿‡æ»¤æ³•">filter{å¸ƒå°”è¯­å¥} æ¡ä»¶è¿‡æ»¤æ³•</a></li>
<li><a href="#distinctuntilchanged-å»é‡è¿‡æ»¤æ³•-ç›¸é‚»ä¸”ä¸é‡å¤">distinctUntilChanged() å»é‡è¿‡æ»¤æ³•ï¼ˆç›¸é‚»ä¸”ä¸é‡å¤ï¼‰</a></li>
<li><a href="#take-int-æå°–è¿‡æ»¤æ³•">take(int) æå°–è¿‡æ»¤æ³•</a></li>
</ul></li>
<li><a href="#combining-è®¢é˜…æºèšåˆå™¨">Combining è®¢é˜…æºèšåˆå™¨</a>
<ul>
<li><a href="#startwith-å‘å¯è§‚å¯Ÿè€…é˜Ÿåˆ—ä¸­æ·»åŠ æ’å¤´å…µ-æ–°å¢çš„å¯è§‚å¯Ÿè€…">startWith å‘å¯è§‚å¯Ÿè€…é˜Ÿåˆ—ä¸­æ·»åŠ æ’å¤´å…µï¼ˆæ–°å¢çš„å¯è§‚å¯Ÿè€…ï¼‰</a></li>
<li><a href="#combinelatest-åˆå¹¶èšåˆè®¢é˜…æºæœ€åä¸€æ¬¡äº‹ä»¶æ•°æ®-ç”Ÿæˆä¸€ä¸ªèšåˆäº‹ä»¶">combineLatest åˆå¹¶èšåˆè®¢é˜…æºæœ€åä¸€æ¬¡äº‹ä»¶æ•°æ®ï¼Œç”Ÿæˆä¸€ä¸ªèšåˆäº‹ä»¶</a></li>
<li><a href="#zip-intob1-intob2-æ‹‰é“¾å¼åˆå¹¶">zip(intOb1, intOb2) æ‹‰é“¾å¼åˆå¹¶</a></li>
<li><a href="#merge-æŒ‰å¯è§‚å¯Ÿè€…çš„æ–°çš„äº‹ä»¶æ¬¡åºåˆå¹¶é˜Ÿåˆ—">merge() æŒ‰å¯è§‚å¯Ÿè€…çš„æ–°çš„äº‹ä»¶æ¬¡åºåˆå¹¶é˜Ÿåˆ—</a></li>
<li><a href="#switchlatestè®¢é˜…æºåˆ‡æ¢å™¨-ç”¨äºåµŒå¥—å¼è®¢é˜…æº">switchLatestè®¢é˜…æºåˆ‡æ¢å™¨ï¼šç”¨äºåµŒå¥—å¼è®¢é˜…æº</a></li>
</ul></li>
<li><a href="#è®¢é˜…å™¨">è®¢é˜…å™¨</a></li>
<li><a href="#æ§åˆ¶takeæå°–è¿‡æ»¤å™¨">æ§åˆ¶takeæå°–è¿‡æ»¤å™¨</a>
<ul>
<li><a href="#takeuntil-å¾—åˆ°æŒ‡å®šäº‹ä»¶ä¹‹åè§¦å‘-completed-äº‹ä»¶">takeUntil å¾—åˆ°æŒ‡å®šäº‹ä»¶ä¹‹åè§¦å‘ .Completed äº‹ä»¶</a></li>
<li><a href="#takewhile-åˆ¤æ–­è¯­å¥">takeWhile åˆ¤æ–­è¯­å¥</a></li>
</ul></li>
</ul></li>
</ul>
</nav>
  </div>
</div>
    <div class="post-content">
      

<h2 id="frpå‡½æ•°å¼ååº”å‹ç¼–ç¨‹">FRPå‡½æ•°å¼ååº”å‹ç¼–ç¨‹</h2>

<p>Functional Reactive Programming ï¼Œ ç¼©å†™ä¸º FRP</p>

<h2 id="å‡½æ•°ç¼–ç¨‹">å‡½æ•°ç¼–ç¨‹</h2>

<h3 id="å‡½æ•°æ˜¯ç¬¬ä¸€ç­‰å…¬æ°‘">å‡½æ•°æ˜¯ç¬¬ä¸€ç­‰å…¬æ°‘</h3>

<p>æ‰€è°“ ç¬¬ä¸€ç­‰å…¬æ°‘ (first class) ï¼ŒæŒ‡çš„æ˜¯å‡½æ•°ä¸å…¶ä»–æ•°æ®ç±»å‹ä¸€æ ·ï¼Œå¤„äºå¹³ç­‰åœ°ä½ã€‚æ—¢å¯ä»¥èµ‹å€¼ç»™å…¶ä»–å˜é‡ï¼Œä¹Ÿå¯ä»¥ä½œä¸ºå‚æ•°ä¼ å…¥å¦ä¸€ä¸ªå‡½æ•°ï¼Œæˆ–è€…ä½œä¸ºåˆ«çš„å‡½æ•°çš„è¿”å›å€¼ã€‚
å°†æ•°ç»„é€šè¿‡æŒ‡å®šçš„å‡½æ•°æ˜ å°„æˆå¦ä¸€ä¸ªæ•°ç»„ï¼Œä¾‹å¦‚å°†<code>incrementå‡½æ•°</code>ä½œä¸ºå‚æ•°ä¼ å…¥æ•°ç»„çš„<code>mapå‡½æ•°</code>:
{% codeblock lang:swift %}
let increment = { return $0 + 1 }
[1,2,3].map(increment)  // [2,3,4]
{% endcodeblock %}</p>

<h3 id="å‡½æ•°å¼çš„å‡½æ•°">å‡½æ•°å¼çš„å‡½æ•°</h3>

<h4 id="map-æ˜ å°„å‡½æ•°">map æ˜ å°„å‡½æ•°</h4>

<p><code>map</code> å¯ä»¥æŠŠä¸€ä¸ªæ•°ç»„æŒ‰ç…§ä¸€å®šçš„è§„åˆ™è½¬æ¢æˆå¦ä¸€ä¸ªæ•°ç»„ï¼Œå®šä¹‰å¦‚ä¸‹ï¼š
{% codeblock lang:swift %}
func map<U>(transform: (T) -&gt; U) -&gt; U[]
//æ•ˆæœ
[ x1, x2, &hellip; , xn].map(f) -&gt; [f(x1), f(x2), &hellip; , f(xn)]
{% endcodeblock %}
<code>map</code>æ¥å—ä¸€ä¸ªæŠŠ <code>T</code> ç±»å‹çš„è½¬æ¢æˆ <code>U</code> ç±»å‹çš„<code>transform</code>å‡½æ•°ï¼Œæœ€ç»ˆè¿”å›çš„æ˜¯ <code>U ç±»å‹çš„é›†åˆ</code>ã€‚</p>

<h4 id="filter-ç­›é€‰å‡½æ•°">filter ç­›é€‰å‡½æ•°</h4>

<p><code>filter</code>é€šè¿‡åœ¨é—­åŒ…ä¸­å¯¹æ¯ä¸ªå…ƒç´ è¿›è¡Œé€»è¾‘è¿ç®—ï¼Œæ¥æ’é™¤ä¸º<code>false</code>çš„å…ƒç´ 
{% codeblock lang:swift %}
func filter(includeElement: (T) -&gt; Bool) -&gt; [T]
//å®ç°
var oldArray = [10,20,45,32]
var filteredArray  = oldArray.filter({ return $0 &gt; 30 })
println(filteredArray) // [45, 32]
{% endcodeblock %}</p>

<h4 id="reduce-è¿­ä»£å‡½æ•°">reduce è¿­ä»£å‡½æ•°</h4>

<p><code>reduce</code>å‡½æ•°æŠŠ<code>U</code>ç±»å‹é›†åˆä¸­çš„æ‰€æœ‰å…ƒç´ ï¼Œä»¥<code>initial</code>ä¸ºåˆå§‹å€¼ï¼ŒæŒ‰ç…§<code>combine</code>è§„åˆ™ï¼Œé€ä¸ªè¿­ä»£å¹¶è¿”å›ä¸€ä¸ªUç±»å‹çš„å¯¹è±¡ã€‚
å®šä¹‰å¦‚ä¸‹ï¼š
{% codeblock lang:swift %}
func reduce<U>(initial: U, combine: (U, T) -&gt; U) -&gt; U
{% endcodeblock %}
reduce æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œ<code>initial</code>æ˜¯åˆå§‹å€¼ï¼Œ<code>combine</code>å®šä¹‰è§„åˆ™é—­åŒ…ï¼Œé—­åŒ…æœ‰ä¸¤ä¸ªè¾“å…¥çš„å‚æ•°ï¼Œä¸€ä¸ªæ˜¯åŸå§‹å€¼ï¼Œä¸€ä¸ªæ˜¯æ–°è¿›æ¥çš„å€¼ï¼Œé—­åŒ…è¿”å›çš„æ–°å€¼ä½œä¸ºä¸‹ä¸€è½®å¾ªç¯ä¸­çš„<code>initial</code>å€¼ã€‚
å†™å‡ ä¸ªå°ä¾‹å­è¯•ä¸€ä¸‹ï¼š
{% codeblock lang:swift %}
var oldArray = [10,20,45,32]
var sum = 0
sum = oldArray.reduce(0,{$0 + $1}) // 0+10+20+45+32 = 107
sum = oldArray.reduce(1,{$0 + $1}) // 1+10+20+45+32 = 108
sum = oldArray.reduce(5,{$0 * $1}) // 5*10*20*45*32 = 1440000
sum = oldArray.reduce(0,+) // 0+10+20+45+32 = 107
println(sum)
{% endcodeblock %}</p>

<h3 id="å‡½æ•°å¼å’ŒæŒ‡ä»¤å¼çš„æ¯”è¾ƒ">å‡½æ•°å¼å’ŒæŒ‡ä»¤å¼çš„æ¯”è¾ƒ</h3>

<h2 id="å“åº”å¼ç¼–ç¨‹-reactive">å“åº”å¼ç¼–ç¨‹ - Reactive</h2>

<p>åœ¨æ—¥å¸¸å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦ç›‘å¬æŸä¸ªå±æ€§ï¼Œå¹¶ä¸”é’ˆå¯¹è¯¥å±æ€§çš„å˜åŒ–åšä¸€äº›å¤„ç†ã€‚æ¯”å¦‚ä»¥ä¸‹å‡ ä¸ªåœºæ™¯ï¼š
1. ç”¨æˆ·åœ¨è¾“å…¥é‚®ç®±çš„æ—¶å€™ï¼Œç›‘æµ‹è¾“å…¥çš„å†…å®¹å¹¶åœ¨ç•Œé¢ä¸Šæç¤ºæ˜¯å¦ç¬¦åˆé‚®ç®±è§„èŒƒã€‚
2. ç”¨æˆ·åœ¨ä¿®æ”¹ç”¨æˆ·åä¹‹åï¼Œæ‰€æœ‰æ˜¾ç¤ºç”¨æˆ·åçš„ç•Œé¢éƒ½è¦æ”¹ä¸ºæ–°çš„ç”¨æˆ·åã€‚
å¤–éƒ¨è¾“å…¥ä¿¡å·çš„å˜åŒ–ã€äº‹ä»¶çš„å‘ç”Ÿï¼Œè¿™äº›éƒ½æ˜¯å…¸å‹çš„å¤–éƒ¨ç¯å¢ƒå˜åŒ–ã€‚æ ¹æ®å¤–éƒ¨ç¯å¢ƒçš„å˜åŒ–è¿›è¡Œå“åº”å¤„ç†ï¼Œç›´è§‚ä¸Šæ¥è®²åƒæ˜¯ä¸€ç§è‡ªç„¶åœ°ååº”ã€‚æˆ‘ä»¬å¯ä»¥å°†è¿™ç§è‡ªåŠ¨å¯¹å˜åŒ–ä½œå‡ºå“åº”çš„èƒ½åŠ›ç§°ä¸ºååº”èƒ½åŠ› (Reactive) ã€‚</p>

<p>é‚£ä¹ˆä»€ä¹ˆæ˜¯ååº”å‹ç¼–ç¨‹å‘¢ï¼Ÿ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><span class="lnt">1
</span><span class="lnt">2
</span></pre></td>
<td class="lntd">
<pre class="chroma">Reactive programming is programming with asynchronous data streams.
ååº”å‹ç¼–ç¨‹æ˜¯å¼‚æ­¥æ•°æ®æµçš„ç¼–ç¨‹ã€‚</pre></td></tr></table>
</div>
</div>
<p>å¯¹äºç§»åŠ¨ç«¯æ¥è¯´ï¼Œå¼‚æ­¥æ•°æ®æµçš„æ¦‚å¿µå¹¶ä¸é™Œç”Ÿï¼Œå˜é‡ã€ç‚¹å‡»äº‹ä»¶ã€å±æ€§ã€ç¼“å­˜ï¼Œè¿™äº›å°±å¯ä»¥æˆä¸ºæ•°æ®æµã€‚
æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸€äº›ç®€å•çš„ ASCII å­—ç¬¦æ¥æ¼”ç¤ºå¦‚ä½•å°†äº‹ä»¶è½¬æ¢æˆæ•°æ®æµï¼š
    &ndash;a&mdash;b-c&mdash;d&mdash;X&mdash;|&ndash;&gt;
    a, b, c, d æ˜¯å…·ä½“çš„å€¼ï¼Œä»£è¡¨äº†æŸä¸ªäº‹ä»¶
    X è¡¨ç¤ºå‘ç”Ÿäº†ä¸€ä¸ªé”™è¯¯
    | æ˜¯è¿™ä¸ªæµå·²ç»ç»“æŸäº†çš„æ ‡è®°
    &mdash;&mdash;&mdash;-&gt; æ˜¯æ—¶é—´è½´
æ¯”å¦‚æˆ‘ä»¬è¦ç»Ÿè®¡ç”¨æˆ·ç‚¹å‡»é¼ æ ‡çš„æ¬¡æ•°ï¼Œé‚£ä¹ˆå¯ä»¥è¿™æ ·ï¼š
clickStream:    &mdash;c&mdash;-c&ndash;c&mdash;-c&mdash;&mdash;c&ndash;&gt;
                vvvvv map(c becomes 1) vvvv
                &mdash;1&mdash;-1&ndash;1&mdash;-1&mdash;&mdash;1&ndash;&gt;
                vvvvvvvvv scan(+) vvvvvvvvv
counterStream:  &mdash;1&mdash;-2&ndash;3&mdash;-4&mdash;&mdash;5&ndash;&gt;
ååº”å‹ç¼–ç¨‹å°±æ˜¯åŸºäºè¿™äº›æ•°æ®æµçš„ç¼–ç¨‹ã€‚è€Œå‡½æ•°å¼ç¼–ç¨‹åˆ™ç›¸å½“äºæä¾›äº†ä¸€ä¸ªå·¥å…·ç®±ï¼Œå¯ä»¥æ–¹ä¾¿çš„å¯¹æ•°æ®æµè¿›è¡Œåˆå¹¶ã€åˆ›å»ºå’Œè¿‡æ»¤ç­‰æ“ä½œã€‚</p>

<h2 id="swift-å‡½æ•°å¼ç¼–ç¨‹">swift å‡½æ•°å¼ç¼–ç¨‹</h2>

<p>Swift æ˜¯è‹¹æœå…¬å¸åœ¨ 2014 å¹´æ¨å‡ºçš„ç¼–ç¨‹è¯­è¨€ï¼Œç”¨äºç¼–å†™ iOS å’Œ OS X åº”ç”¨ç¨‹åºã€‚å®ƒå¸æ”¶äº†å¾ˆå¤šå…¶å®ƒè¯­è¨€çš„è¯­æ³•ç‰¹æ€§ï¼Œä¾‹å¦‚é—­åŒ…ã€å…ƒç»„ã€æ³›å‹ã€ç»“æ„ä½“ç­‰ç­‰ï¼Œè¿™ä½¿å¾—å®ƒçš„è¯­æ³•ç®€æ´è€Œçµæ´»ã€‚
Swift æœ¬èº«å¹¶ä¸æ˜¯ä¸€é—¨å‡½æ•°å¼è¯­è¨€ï¼Œä¸è¿‡æœ‰ä¸€äº›å‡½æ•°å¼çš„æ–¹æ³•å’Œç‰¹æ€§
1. map reduce ç­‰å‡½æ•°å¼å‡½æ•°
2. å‡½æ•°æ˜¯ä¸€ç­‰å…¬æ°‘
3. æ¨¡å¼åŒ¹é…
æˆ‘ä»¬å¹¶ä¸èƒ½å› ä¸º Swift ä¸­çš„ä¸€äº›å‡½æ•°å¼ç‰¹æ€§å°±æŠŠå®ƒå½’ä¸ºå‡½æ•°å¼è¯­è¨€ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥åˆ©ç”¨è¿™äº›ç‰¹æ€§è¿›è¡Œå‡½æ•°å¼ Style çš„ç¼–ç¨‹ã€‚</p>

<h1 id="rxswift-å“åº”å¼ç¼–ç¨‹">RxSwift å“åº”å¼ç¼–ç¨‹</h1>

<p><a href="https://github.com/ReactiveX/RxSwift/tree/master/Rx.playground">Rx.playground</a></p>

<h2 id="observableè§‚å¯Ÿè€…æ¨¡å¼">Observableè§‚å¯Ÿè€…æ¨¡å¼</h2>

<p>Rx çš„åŸºç¡€ï¼š<code>Observable</code> ï¼Œ <code>Observable&lt;Element&gt;</code> æ˜¯è§‚å¯Ÿè€…æ¨¡å¼ä¸­å¯è§‚å¯Ÿçš„å¯¹è±¡ï¼Œç›¸å½“äºä¸€ä¸ªäº‹ä»¶åºåˆ— (GeneratorType)ã€‚
æ”¯æŒè®¢é˜…çš„äº‹ä»¶åºåˆ—ï¼Œåœ¨ä¸‹æ–‡ç®€ç§°ä¸º<code>è®¢é˜…æº</code>æˆ–<code>å¯è§‚å¯Ÿè€…</code>ã€‚
è®¢é˜…æºçš„äº‹ä»¶é˜Ÿåˆ—ä¸­åŒ…æ‹¬ä¸‰ç§äº‹ä»¶ç±»å‹ï¼š
1. <code>.Next(value)</code>: è¡¨ç¤ºæ–°çš„äº‹ä»¶æ•°æ®ã€‚
2. <code>.Completed</code>: è¡¨ç¤ºäº‹ä»¶åºåˆ—çš„å®Œç»“ã€‚
3. <code>.Error</code>: åŒæ ·è¡¨ç¤ºå®Œç»“ï¼Œä½†æ˜¯ä»£è¡¨å¼‚å¸¸å¯¼è‡´çš„å®Œç»“ã€‚</p>

<h3 id="æ–°å»ºè®¢é˜…æºå‡ ç§å¿«æ·æ–¹æ³•">æ–°å»ºè®¢é˜…æºå‡ ç§å¿«æ·æ–¹æ³•</h3>

<ol>
<li><code>empty</code>æ˜¯ä¸€ä¸ªç©ºçš„åºåˆ—ï¼Œå®ƒåªå‘é€ <code>.Completed</code> æ¶ˆæ¯ã€‚
{% codeblock Observable+Creation.swift lang:swift %}
public static func empty() -&gt; Observable<E>
example(&ldquo;empty&rdquo;) {
let emptySequence: Observable<Int> = empty()
let subscription = emptySequence.subscribe { event in
                                            print(event)
                                        }
}
&mdash; empty example &mdash;
Completed
{% endcodeblock %}</li>
<li><code>never</code> æ˜¯æ²¡æœ‰ä»»ä½•å…ƒç´ ã€ä¹Ÿä¸ä¼šå‘é€ä»»ä½•äº‹ä»¶çš„ç©ºåºåˆ—ã€‚
{% codeblock Observable+Creation.swift lang:swift %}
/**</li>
<li>returns: An observable sequence whose observers will never get called.
*/
public static func never() -&gt; Observable<E>
{% endcodeblock %}</li>
<li><code>just</code> æ˜¯åªåŒ…å«ä¸€ä¸ªå…ƒç´ çš„åºåˆ—ï¼Œå®ƒä¼šå…ˆå‘é€ <code>.Next(value)</code> ï¼Œç„¶åå‘é€ <code>.Completed</code>
{% codeblock Observable+Creation.swift lang:swift %}
/**
Returns an observable sequence that contains a single element.
*/
public static func just(_ element: E) -&gt; Observable<E> {
return Just(element: element)
}
{% endcodeblock %}</li>
<li><code>sequenceOf</code> å¯ä»¥æŠŠä¸€ç³»åˆ—å…ƒç´ è½¬æ¢æˆè®¢é˜…æº
{% codeblock lang:swift %}
let sequenceOfElements/* : Observable<Int> */ = sequenceOf(0, 1, 2, 3)
{% endcodeblock %}</li>
<li><code>asObservableæ–¹æ³•</code> å°†éµå®ˆ<code>ObservableType</code>åè®®çš„å¯¹è±¡è½¬ä¸ºå¯è§‚å¯Ÿè€…åºåˆ—
{% codeblock ObservableType.swift lang:swift %}
public protocol ObservableType : ObservableConvertibleType
{
//Default implementation of converting <code>ObservableType</code> to <code>Observable</code>.
public func asObservable() -&gt; Observable<E>
}
let sequenceFromArray = [1, 2, 3, 4, 5].asObservable()
{% endcodeblock %}</li>
<li><code>failWith</code>åˆ›å»ºä¸€ä¸ªæ²¡æœ‰å…ƒç´ çš„åºåˆ—ï¼Œåªä¼šå‘é€å¤±è´¥ (<code>.Error</code>) äº‹ä»¶ã€‚
{% codeblock lang:swift %}
let error = NSError(domain: &ldquo;Test&rdquo;, code: -1, userInfo: nil)
let erroredSequence: Observable<Int> = failWith(error)
let subscription = erroredSequence.subscribe { event in print(event)}
&mdash; failWith example &mdash;
Error(Error Domain=Test Code=-1 &ldquo;The operation couldnâ€™t be completed. (Test error -1.)&rdquo;)
{% endcodeblock %}</li>
</ol>

<h3 id="createè‡ªå®šä¹‰è®¢é˜…æº">createè‡ªå®šä¹‰è®¢é˜…æº</h3>

<p><code>create</code> å¯ä»¥é€šè¿‡é—­åŒ…åˆ›å»ºåºåˆ—ï¼Œé€šè¿‡ <code>.on(e: Event)</code> æ·»åŠ å¯è§‚å¯Ÿè€…äº‹ä»¶ã€‚
{% codeblock lang:swift %}
example(&ldquo;create&rdquo;)
{
    let myJust = { (singleElement: Int) -&gt; Observable<Int> in
        return create { observer in
                observer.on(.Next(singleElement))
                observer.on(.Completed)
                return NopDisposable.instance
        }
    }</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></pre></td>
<td class="lntd">
<pre class="chroma">let subscription = myJust(5).subscribe { event in
        print(event)
}</pre></td></tr></table>
</div>
</div>
<p>}
&mdash; create example &mdash;
Next(5)
Completed
{% endcodeblock %}</p>

<h3 id="deferredè®¢é˜…æºçš„æ‡’åŠ è½½">deferredè®¢é˜…æºçš„æ‡’åŠ è½½</h3>

<p><code>deferred</code>è¡¨ç¤ºå½“æœ‰æœ‰æ–°å¢è®¢é˜…è€…ç¬¬ä¸€æ¬¡è®¢é˜…äº†è¯¥è®¢é˜…æºæ—¶ï¼Œè®¢é˜…æºæ‰ä¼šè¢«åˆ›å»ºï¼Œä¸”æ¯ä¸ªè®¢é˜…è€…è®¢é˜…çš„å¯¹è±¡éƒ½æ˜¯å†…å®¹ç›¸åŒè€Œå®Œå…¨ç‹¬ç«‹çš„åºåˆ—ã€‚
{% codeblock lang:swift %}
example(&ldquo;TestDeferred&rdquo;)
{
    var value: String? = nil
    var subscription: Observable<String?> = deferred {
        return just(value)
    }
    // got value
    value = &ldquo;Hello!&rdquo;
    subscription.subscribe { event in
        print(event)
    }
}
&mdash; TestDeferred example &mdash;
Next(Optional(&ldquo;Hello!&rdquo;))
Completed
{% endcodeblock %}</p>

<h2 id="å‡ ç§ç‰¹æ®Šç±»å‹çš„è®¢é˜…æº">å‡ ç§ç‰¹æ®Šç±»å‹çš„è®¢é˜…æº</h2>

<p><code>Subject</code> å¯ä»¥çœ‹åšæ˜¯ä¸€ç§ä»£ç†å’Œæ¡¥æ¢ã€‚å®ƒæ—¢æ˜¯è®¢é˜…è€…åˆæ˜¯è®¢é˜…æºï¼Œè¿™æ„å‘³ç€å®ƒæ—¢å¯ä»¥è®¢é˜…å…¶ä»– <code>Observable å¯¹è±¡</code>ï¼ŒåŒæ—¶åˆå¯ä»¥å¯¹å®ƒçš„è®¢é˜…è€…ä»¬å‘é€äº‹ä»¶ã€‚</p>

<h3 id="publishsubject-å‘æ‰€æœ‰è®¢é˜…è€…å‘é€äº‹ä»¶é˜Ÿåˆ—">PublishSubject å‘æ‰€æœ‰è®¢é˜…è€…å‘é€äº‹ä»¶é˜Ÿåˆ—</h3>

<p>å½“<code>PublishSubject</code>ç±»å‹è®¢é˜…æºäº‹ä»¶é˜Ÿåˆ—ä¸­<code>.on()</code>æ–°å¢äº‹ä»¶æ—¶ï¼Œä¼šè§¦å‘æ‰€æœ‰è®¢é˜…è€…ï¼Œä¸€èµ·å“åº”è¯¥äº‹ä»¶ã€‚
{% codeblock lang:swift %}
example(&ldquo;PublishSubject&rdquo;) {
    let subject = PublishSubject<String>()
    writeSequenceToConsole(&ldquo;1&rdquo;, sequence: subject)
    subject.on(.Next(&ldquo;a&rdquo;))
    subject.on(.Next(&ldquo;b&rdquo;))
    writeSequenceToConsole(&ldquo;2&rdquo;, sequence: subject)
    subject.on(.Next(&ldquo;c&rdquo;))
    subject.on(.Next(&ldquo;d&rdquo;))
}
&mdash; PublishSubject example &mdash;
Subscription: 1, event: Next(a)
Subscription: 1, event: Next(b)
Subscription: 1, event: Next&copy;
Subscription: 2, event: Next&copy;
Subscription: 1, event: Next(d)
Subscription: 2, event: Next(d)
{% endcodeblock %}</p>

<h3 id="åŸºäºpublishsubjectçš„å‡ ç§è¡¥å‘å¼è®¢é˜…æº">åŸºäºPublishSubjectçš„å‡ ç§è¡¥å‘å¼è®¢é˜…æº</h3>

<p>ä»¥ä¸‹å‡ ç§ç±»å‹çš„è®¢é˜…æºï¼Œç›¸è¾ƒç¬¬ä¸€ç§ä»…å¤šäº†è¡¥å‘å†å²äº‹ä»¶ï¼Œå§‘ä¸”ç§°ä¸º<code>è¡¥å‘å¼è®¢é˜…æº</code>ã€‚</p>

<h4 id="replaysubjectå…ˆå‘æœ€æ–°è®¢é˜…è€…è¡¥å‘æ‰€æœ‰å·²å‘ç”Ÿçš„äº‹ä»¶">ReplaySubjectå…ˆå‘æœ€æ–°è®¢é˜…è€…è¡¥å‘æ‰€æœ‰å·²å‘ç”Ÿçš„äº‹ä»¶</h4>

<p>å½“<code>ReplaySubject</code>ç±»å‹çš„è®¢é˜…æºï¼Œæ–°å¢è®¢é˜…è€…æ—¶ï¼Œè¯¥ç±»å‹çš„è®¢é˜…æºä¼šæŠŠä¹‹å‰å·²å‘é€è¿‡çš„æ‰€æœ‰äº‹ä»¶é˜Ÿåˆ—é‡æ–°è¡¥å‘ç»™è¿™ä¸ªæœ€æ–°è®¢é˜…è€…ã€‚è¿™æ ·å°±è¿«ä½¿è®¢é˜…è€…ä¼šå¯¹ä»å†å²çš„äº‹ä»¶é˜Ÿåˆ—é€ä¸€å“åº”ã€‚
<code>bufferSize</code> æ˜¯ç¼“å†²åŒºçš„å¤§å°ï¼Œå†³å®šäº†è¡¥å‘é˜Ÿåˆ—çš„æœ€å¤§å€¼ã€‚å¦‚æœ <code>bufferSize</code> æ˜¯1ï¼Œé‚£ä¹ˆæ–°çš„è®¢é˜…è€…å‡ºç°çš„æ—¶å€™å°±ä¼šè¡¥å‘ä¸Šä¸€ä¸ªäº‹ä»¶ï¼Œå¦‚æœæ˜¯2ï¼Œåˆ™è¡¥ä¸¤ä¸ªï¼Œä»¥æ­¤ç±»æ¨ã€‚
{% codeblock lang:swift %}
example(&ldquo;ReplaySubject&rdquo;)
{
    let subject = ReplaySubject<String>.create(bufferSize: 1)
    writeSequenceToConsole(&ldquo;1&rdquo;, sequence: subject)
    subject.on(.Next(&ldquo;a&rdquo;))
    subject.on(.Next(&ldquo;b&rdquo;))
    writeSequenceToConsole(&ldquo;2&rdquo;, sequence: subject)
    subject.on(.Next(&ldquo;c&rdquo;))
    subject.on(.Next(&ldquo;d&rdquo;))
}
&mdash; ReplaySubject example &mdash;
Subscription: 1, event: Next(a)
Subscription: 1, event: Next(b)
Subscription: 2, event: Next(b) // è¡¥äº†ä¸€ä¸ª b
Subscription: 1, event: Next&copy;
Subscription: 2, event: Next&copy;
Subscription: 1, event: Next(d)
Subscription: 2, event: Next(d)
{% endcodeblock %}</p>

<h4 id="behaviorsubject-å…ˆå‘æœ€æ–°è®¢é˜…è€…è¡¥å‘æœ€è¿‘ä¸€æ¬¡å†å²äº‹ä»¶">BehaviorSubject å…ˆå‘æœ€æ–°è®¢é˜…è€…è¡¥å‘æœ€è¿‘ä¸€æ¬¡å†å²äº‹ä»¶</h4>

<p><code>BehaviorSubject</code>ç±»å‹çš„è®¢é˜…æºä¼šå‘æœ€æ–°è®¢é˜…è€…å‘é€æœ€è¿‘ä¸€æ¬¡çš„å†å²äº‹ä»¶é˜Ÿåˆ—ï¼Œå¦‚æœæ²¡æœ‰åˆ™å‘é€ä¸€ä¸ªé»˜è®¤å€¼ã€‚
{% codeblock lang:swift %}
example(&ldquo;BehaviorSubject&rdquo;)
{
    let subject = BehaviorSubject(value: &ldquo;z&rdquo;)
    writeSequenceToConsole(&ldquo;1&rdquo;, sequence: subject)
    subject.on(.Next(&ldquo;a&rdquo;))
    subject.on(.Next(&ldquo;b&rdquo;))
    writeSequenceToConsole(&ldquo;2&rdquo;, sequence: subject)
    subject.on(.Next(&ldquo;c&rdquo;))
    subject.on(.Completed)
}
&mdash; BehaviorSubject example &mdash;
Subscription: 1, event: Next(z)
Subscription: 1, event: Next(a)
Subscription: 1, event: Next(b)
Subscription: 2, event: Next(b)
Subscription: 1, event: Next&copy;
Subscription: 2, event: Next&copy;
Subscription: 1, event: Completed
Subscription: 2, event: Completed</p>

<p>{% endcodeblock %}</p>

<h4 id="variable">Variable</h4>

<p><code>Variable</code> æ˜¯åŸºäº <code>BehaviorSubject</code> çš„ä¸€å±‚å°è£…ï¼Œå®ƒçš„ä¼˜åŠ¿æ˜¯ï¼šä¸ä¼šè¢«æ˜¾å¼ç»ˆç»“ã€‚
å³ï¼šä¸ä¼šæ”¶åˆ° <code>.Completed</code> å’Œ <code>.Error</code> è¿™ç±»çš„ç»ˆç»“äº‹ä»¶ï¼Œå®ƒä¼šä¸»åŠ¨åœ¨ææ„çš„æ—¶å€™å‘é€ <code>.Complete</code>
{% codeblock lang:swift %}
example(&ldquo;Variable&rdquo;)
{
    let variable = Variable(&ldquo;z&rdquo;)
    writeSequenceToConsole(&ldquo;1&rdquo;, sequence: variable)
    variable.value = &ldquo;a&rdquo;
    variable.value = &ldquo;b&rdquo;
    writeSequenceToConsole(&ldquo;2&rdquo;, sequence: variable)
    variable.value = &ldquo;c&rdquo;
}
&mdash; Variable example &mdash;
Subscription: 1, event: Next(z)
Subscription: 1, event: Next(a)
Subscription: 1, event: Next(b)
Subscription: 2, event: Next(b)
Subscription: 1, event: Next&copy;
Subscription: 2, event: Next&copy;
Subscription: 1, event: Completed
Subscription: 2, event: Completed
{% endcodeblock %}</p>

<h2 id="æ”¯æŒè®¢é˜…çš„åµŒå¥—å‡½æ•°">æ”¯æŒè®¢é˜…çš„åµŒå¥—å‡½æ•°</h2>

<h3 id="map-è§„åˆ™-éå†æ˜ å°„">map{è§„åˆ™} éå†æ˜ å°„</h3>

<p>é€šè¿‡é—­åŒ…ä¸­å®šä¹‰çš„è§„åˆ™å°†é˜Ÿåˆ—ä¸­çš„æ•°æ®æ˜ å°„åˆ°æ–°çš„é˜Ÿåˆ—ä¸­ï¼Œæ”¯æŒè®¢é˜…éå†äº‹ä»¶ã€‚
{% codeblock lang:swift %}
func map<U>(transform: (T) -&gt; U) -&gt; U[]
//æ•ˆæœ
[ x1, x2, &hellip; , xn].map(f) -&gt; [f(x1), f(x2), &hellip; , f(xn)]
{% endcodeblock %}
<code>map</code>æ¥å—ä¸€ä¸ªæŠŠ <code>T</code> ç±»å‹çš„è½¬æ¢æˆ <code>U</code> ç±»å‹çš„<code>transform</code>å‡½æ•°ï¼Œæœ€ç»ˆè¿”å›çš„æ˜¯ <code>U ç±»å‹çš„é›†åˆ</code>ã€‚
{% codeblock lang:swift %}
example(&ldquo;map&rdquo;)
{
    let originalSequence = sequenceOf(1,2,3)
    originalSequence.map{ $0 * 2 }.subscribe{ print($0) }
}
&mdash; map example &mdash;
Next(2)
Next(4)
Next(6)
Completed
{% endcodeblock %}</p>

<h3 id="flatmap-åµŒå¥—å¼éå†æ˜ å°„">flatMap åµŒå¥—å¼éå†æ˜ å°„</h3>

<p>åµŒå¥—å¼éå†æè¿°ï¼šåœ¨éå†å½“å‰é˜Ÿåˆ—çš„è¿‡ç¨‹ä¸­ï¼Œæ¯æ¬¡æ‰§è¡Œé—­åŒ…æ—¶éƒ½ä¼šéå†å¦ä¸€ä¸ªåµŒå¥—é˜Ÿåˆ—ä¸­çš„æ‰€æœ‰äº‹ä»¶ã€‚
å¯ä»¥æƒ³è±¡åµŒå¥—for å¾ªç¯æ¥ç†è§£ã€‚
{% codeblock lang:swift %}
example(&ldquo;flatMap&rdquo;)
{
    let sequenceInt = sequenceOf(1, 2, 3)
    let sequenceString = sequenceOf(&ldquo;A&rdquo;, &ldquo;B&rdquo;, &ldquo;&ndash;&rdquo;)
    sequenceInt.flatMap{ int in sequenceString }.subscribe{ print($0) }
}
&mdash; flatMap example &mdash;
Next(A)
Next(B)
Next(&ndash;)
Next(A)
Next(B)
Next(&ndash;)
Next(A)
Next(B)
Next(&ndash;)
Completed
{% endcodeblock %}</p>

<h3 id="scan-initial-u-combine-u-t-u-è¿­ä»£æ˜ å°„">scan(initial:U,combine:(U, T) -&gt; U)è¿­ä»£æ˜ å°„</h3>

<p>scan æœ‰ç‚¹åƒ reduce ï¼ŒæŠŠ<code>U</code>ç±»å‹é›†åˆä¸­çš„æ‰€æœ‰å…ƒç´ ï¼Œä»¥<code>initial</code>ä¸ºåˆå§‹å€¼ï¼ŒæŒ‰ç…§<code>combine</code>è§„åˆ™ï¼Œé€ä¸ªè¿­ä»£å¹¶è¿”å›ä¸€ä¸ªUç±»å‹çš„å¯¹è±¡ã€‚
{% codeblock lang:swift %}
example(&ldquo;scan&rdquo;)
{
    let sequenceToSum = sequenceOf(0, 1, 2, 3, 4, 5)
    sequenceToSum.scan(0) { acum, elem in acum + elem }
    .subscribe {
        print($0)
    }
}
&mdash; scan example &mdash;
Next(0)
Next(1)
Next(3)
Next(6)
Next(10)
Next(15)
Completed
{% endcodeblock %}</p>

<h2 id="filtering-æ”¯æŒè®¢é˜…çš„è¿‡æ»¤å™¨">Filtering æ”¯æŒè®¢é˜…çš„è¿‡æ»¤å™¨</h2>

<h3 id="filter-å¸ƒå°”è¯­å¥-æ¡ä»¶è¿‡æ»¤æ³•">filter{å¸ƒå°”è¯­å¥} æ¡ä»¶è¿‡æ»¤æ³•</h3>

<p>{% codeblock lang:swift %}
example(&ldquo;filter&rdquo;)
{
let subscription = sequenceOf(0, 1, 2, 3, 4, 5, 6, 7, 8, 9)
.filter { $0 % 2 == 0 }.subscribe { print($0) }
}
&mdash; filter example &mdash;
Next(0)
Next(2)
Next(4)
Next(6)
Next(8)
Completed
{% endcodeblock %}</p>

<h3 id="distinctuntilchanged-å»é‡è¿‡æ»¤æ³•-ç›¸é‚»ä¸”ä¸é‡å¤">distinctUntilChanged() å»é‡è¿‡æ»¤æ³•ï¼ˆç›¸é‚»ä¸”ä¸é‡å¤ï¼‰</h3>

<p>{% codeblock lang:swift %}
example(&ldquo;distinctUntilChanged&rdquo;)
{
    let subscription = sequenceOf(1, 2, 3, 1, 1, 4)
    .distinctUntilChanged().subscribe{ print($0) }
}
&mdash; distinctUntilChanged example &mdash;
Next(1)
Next(2)
Next(3)
Next(1)
Next(4)
Completed
{% endcodeblock %}</p>

<h3 id="take-int-æå°–è¿‡æ»¤æ³•">take(int) æå°–è¿‡æ»¤æ³•</h3>

<p><code>take</code>åªè·å–é˜Ÿåˆ—ä¸­å‰ n ä¸ªäº‹ä»¶ï¼Œåœ¨æ»¡è¶³æ•°é‡ä¹‹åä¼šè‡ªåŠ¨ <code>.Completed</code>
{% codeblock lang:swift %}
example(&ldquo;take&rdquo;)
{
let subscription = sequenceOf(1, 2, 3, 4, 5, 6)
.take(3).subscribe { print($0) }
}
&mdash; take example &mdash;
Next(1)
Next(2)
Next(3)
Completed
{% endcodeblock %}</p>

<h2 id="combining-è®¢é˜…æºèšåˆå™¨">Combining è®¢é˜…æºèšåˆå™¨</h2>

<p>è®¢é˜…æºèšåˆå™¨å°†å¤šä¸ªå¯è§‚å¯Ÿè€…ï¼ˆè®¢é˜…æºï¼‰åˆå¹¶æˆä¸€ä¸ªå¯è§‚å¯Ÿè€…ï¼ˆèšåˆè®¢é˜…æºï¼‰ï¼Œè¿™æ ·æ›´ä¾¿äºè®¢é˜…è€…åŒæ—¶ç›‘å¬å¤šä¸ªè®¢é˜…æºã€‚</p>

<h3 id="startwith-å‘å¯è§‚å¯Ÿè€…é˜Ÿåˆ—ä¸­æ·»åŠ æ’å¤´å…µ-æ–°å¢çš„å¯è§‚å¯Ÿè€…">startWith å‘å¯è§‚å¯Ÿè€…é˜Ÿåˆ—ä¸­æ·»åŠ æ’å¤´å…µï¼ˆæ–°å¢çš„å¯è§‚å¯Ÿè€…ï¼‰</h3>

<p>{% codeblock lang:swift %}
let subscription = sequenceOf(4, 5, 6).startWith(3).subscribe { print($0)}
&mdash; startWith example &mdash;
Next(3)
Next(4)
Next(5)
Next(6)
Completed
{% endcodeblock %}</p>

<h3 id="combinelatest-åˆå¹¶èšåˆè®¢é˜…æºæœ€åä¸€æ¬¡äº‹ä»¶æ•°æ®-ç”Ÿæˆä¸€ä¸ªèšåˆäº‹ä»¶">combineLatest åˆå¹¶èšåˆè®¢é˜…æºæœ€åä¸€æ¬¡äº‹ä»¶æ•°æ®ï¼Œç”Ÿæˆä¸€ä¸ªèšåˆäº‹ä»¶</h3>

<p>ä¾¿äºè®¢é˜…è€…ç›‘å¬èšåˆè®¢é˜…æºä¸­æ¯ä¸ªè®¢é˜…æºçš„æœ€åä¸€æ¬¡äº‹ä»¶æ•°æ®
{% codeblock lang:swift %}
example(&ldquo;combineLatest 1&rdquo;)
{
    let intOb1 = PublishSubject<String>()
    let intOb2 = PublishSubject<Int>()
    combineLatest(intOb1, intOb2) {&rdquo;($0) ($1)&ldquo;}.subscribe {  print($0) }
    intOb1.on(.Next(&ldquo;A&rdquo;))
    intOb2.on(.Next(1))
    intOb1.on(.Next(&ldquo;B&rdquo;))
    intOb2.on(.Next(2))
}
&mdash; combineLatest 1 example &mdash;
Next(A 1)
Next(B 1)
Next(B 2)
{% endcodeblock %}</p>

<h3 id="zip-intob1-intob2-æ‹‰é“¾å¼åˆå¹¶">zip(intOb1, intOb2) æ‹‰é“¾å¼åˆå¹¶</h3>

<p>ä»…åœ¨å‡‘é½èšåˆæºä¸­æ‰€æœ‰è®¢é˜…æºçš„äº‹ä»¶æ—¶ï¼Œæ‰ä¼šèšåˆä¸€æ¬¡ï¼Œè§¦å‘è®¢é˜…è€…çš„å“åº”ã€‚å¯ä»¥å°†å¤šè¾¾8ä¸ªè®¢é˜…æº
{% codeblock lang:swift %}
example(&ldquo;zip 1&rdquo;)
{
    let intOb1 = PublishSubject<String>()
    let intOb2 = PublishSubject<Int>()
    zip(intOb1, intOb2) { &ldquo;($0) ($1)&rdquo; }.subscribe { print($0)}
    intOb1.on(.Next(&ldquo;A&rdquo;))
    intOb2.on(.Next(1))
    intOb1.on(.Next(&ldquo;B&rdquo;))
    intOb1.on(.Next(&ldquo;C&rdquo;))
    intOb2.on(.Next(2))
}
&mdash; zip 1 example &mdash;
Next(A 1)
Next(B 2)
{% endcodeblock %}</p>

<h3 id="merge-æŒ‰å¯è§‚å¯Ÿè€…çš„æ–°çš„äº‹ä»¶æ¬¡åºåˆå¹¶é˜Ÿåˆ—">merge() æŒ‰å¯è§‚å¯Ÿè€…çš„æ–°çš„äº‹ä»¶æ¬¡åºåˆå¹¶é˜Ÿåˆ—</h3>

<p>è®¢é˜…è€…ä¼šæŒ‰æ¬¡åºæ¥å“åº”èšåˆè®¢é˜…æºçš„æ¯ä¸€ä»¶äº‹ä»¶
{% codeblock lang:swift %}
example(&ldquo;merge 1&rdquo;)
{
    let subject1 = PublishSubject<Int>()
    let subject2 = PublishSubject<Int>()
    sequenceOf(subject1, subject2).merge().subscribeNext { int in print(int)}
    subject1.on(.Next(1))
    subject1.on(.Next(2))
    subject2.on(.Next(3))
    subject1.on(.Next(4))
    subject2.on(.Next(5))
}
&mdash; merge 1 example &mdash;
1
2
3
4
5
{% endcodeblock %}</p>

<h3 id="switchlatestè®¢é˜…æºåˆ‡æ¢å™¨-ç”¨äºåµŒå¥—å¼è®¢é˜…æº">switchLatestè®¢é˜…æºåˆ‡æ¢å™¨ï¼šç”¨äºåµŒå¥—å¼è®¢é˜…æº</h3>

<p>é€šè¿‡åˆ‡æ¢ï¼ˆvar3.valueï¼‰åµŒå¥—çš„è®¢é˜…æºï¼Œæ¥åˆ‡æ¢è®¢é˜…è€…å½“å‰ç›‘å¬çš„è®¢é˜…æºï¼Œä»¥å“åº”å½“å‰è®¢é˜…æºä¸­çš„å¯è§‚å¯Ÿè€…çš„äº‹ä»¶ã€‚
{% codeblock  lang:swift %}
example(&ldquo;switchLatest&rdquo;)
{
    let var1 = Variable(0)
    let var2 = Variable(200)
    // var3 is like an Observable<Observable<Int>&gt;
    let var3 = Variable(var1)
    let d = var3.switchLatest().subscribe{ print($0) }
    var1.value = 1
    var1.value = 2
    var1.value = 3
    var1.value = 4
    var3.value = var2
    var2.value = 201
    var1.value = 5
    var3.value = var1
    var2.value = 202
    var1.value = 6
}
&mdash; switchLatest example &mdash;
Next(0)
Next(1)
Next(2)
Next(3)
Next(4)
Next(200)
Next(201)
Next(5)
Next(6)
{% endcodeblock %}</p>

<h2 id="è®¢é˜…å™¨">è®¢é˜…å™¨</h2>

<ol>
<li>è®¢é˜…å™¨ï¼š<code>subscribe</code> ç”¨æ¥è®¢é˜…å¯è§‚å¯Ÿè€…çš„äº‹ä»¶é˜Ÿåˆ—ï¼ˆå³è®¢é˜…æºï¼‰ï¼Œå¹¶æŒ‡å®šå“åº”çš„ç›¸å…³æ“ä½œ</li>
<li>Nextè®¢é˜…å™¨ï¼š<code>subscribeNext</code> åªè®¢é˜… <code>.Next</code> äº‹ä»¶</li>
<li>Completedè®¢é˜…å™¨ï¼š<code>subscribeCompleted</code> åªè®¢é˜…<code>.Completed</code> å®Œæˆäº‹ä»¶</li>
<li>Errorè®¢é˜…å™¨ï¼š<code>subscribeError</code> è®¢é˜… <code>.Error</code> å¤±è´¥äº‹ä»¶</li>
<li>è®¢é˜…å™¨è§‚å¯Ÿè€…ï¼š<code>doOn</code> åœ¨è®¢é˜…å™¨æ‰§è¡Œä¹‹å‰ï¼Œè·å¾—æ‰§è¡Œä»£ç çš„æœºä¼šã€‚å¯å¯¹æ¯”ç†è§£ï¼š<code>swiftä¸­çš„å±æ€§è§‚å¯Ÿè€…</code></li>
</ol>

<h2 id="æ§åˆ¶takeæå°–è¿‡æ»¤å™¨">æ§åˆ¶takeæå°–è¿‡æ»¤å™¨</h2>

<p>è¿‡æ»¤å™¨é€šè¿‡æŒ‡å®šçš„äº‹ä»¶å’ŒçŠ¶æ€è¯­å¥æ¥åˆ¤æ–­æ˜¯å¦åœæ­¢take</p>

<h3 id="takeuntil-å¾—åˆ°æŒ‡å®šäº‹ä»¶ä¹‹åè§¦å‘-completed-äº‹ä»¶">takeUntil å¾—åˆ°æŒ‡å®šäº‹ä»¶ä¹‹åè§¦å‘ .Completed äº‹ä»¶</h3>

<p>{% codeblock lang:swift  %}
example(&ldquo;takeUntil&rdquo;)
{
    let originalSequence = PublishSubject<Int>()
    let whenThisSendsNextWorldStops = PublishSubject<Int>()
    originalSequence.takeUntil(whenThisSendsNextWorldStops)
    .subscribe {
        print($0)
    }
    originalSequence.on(.Next(1))
    originalSequence.on(.Next(2))
    whenThisSendsNextWorldStops.on(.Next(1))
    originalSequence.on(.Next(3))
}
&mdash; takeUntil example &mdash;
Next(1)
Next(2)
Completed
{% endcodeblock %}</p>

<h3 id="takewhile-åˆ¤æ–­è¯­å¥">takeWhile åˆ¤æ–­è¯­å¥</h3>

<p>takeWhile åˆ™æ˜¯å¯ä»¥é€šè¿‡çŠ¶æ€è¯­å¥åˆ¤æ–­æ˜¯å¦ç»§ç»­ take ã€‚
{% codeblock lang:swift %}
example(&ldquo;takeWhile&rdquo;)
{
    let sequence = PublishSubject<Int>()
    sequence.takeWhile { int in int &lt; 2 }.subscribe { print($0) }
    sequence.on(.Next(1))
    sequence.on(.Next(2))
    sequence.on(.Next(3))
}
&mdash; takeWhile example &mdash;
Next(1)
Completed
{% endcodeblock %}</p>

    </div>

    <div class="post-copyright">
  <p class="copyright-item">
    <span class="item-title">æ–‡ç« ä½œè€…</span>
    <span class="item-content">iTBoyer</span>
  </p>
  <p class="copyright-item">
    <span class="item-title">ä¸Šæ¬¡æ›´æ–°</span>
    <span class="item-content">
        2019-08-08
        <a href="iEmacsd/commit/ccacacd56ce82e709b32bc57ad0c707301dbd1e0" title="è¿ç§»mdæ–‡æ¡£">(ccacacd)</a>
    </span>
  </p>
  
  
</div>
<div class="post-reward">
  <input type="checkbox" name="reward" id="reward" hidden />
  <label class="reward-button" for="reward">èµèµæ”¯æŒ</label>
  <div class="qr-code">
    
    <label class="qr-code-image" for="reward">
        <img class="image" src="/path/to/your/wechat-qr-code.png">
        <span>å¾®ä¿¡æ‰“èµ</span>
      </label>
    <label class="qr-code-image" for="reward">
        <img class="image" src="/path/to/your/alipay-qr-code.png">
        <span>æ”¯ä»˜å®æ‰“èµ</span>
      </label>
  </div>
</div><footer class="post-footer">
      
      <nav class="post-nav">
        <a class="prev" href="/post/macos/%E4%BB%8Euikit%E5%88%B0appkit/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">ä»UIKitåˆ°AppKit</span>
            <span class="prev-text nav-mobile">ä¸Šä¸€ç¯‡</span>
          </a>
        <a class="next" href="/post/swift/%E4%BA%92%E5%8A%A8%E6%80%A7%E7%9A%84%E6%95%99%E5%AD%A6%E5%B7%A5%E5%85%B7xcplayground/">
            <span class="next-text nav-default">äº’åŠ¨æ€§çš„æ•™å­¦å·¥å…·XCPlayground</span>
            <span class="next-text nav-mobile">ä¸‹ä¸€ç¯‡</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        <div id="comments-gitment"></div>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/theme-next/theme-next-gitment@1/default.min.css" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/gh/theme-next/theme-next-gitment@1/gitment.browser.min.js" crossorigin="anonymous"></script>
    <script type="text/javascript">
      var gitment = new Gitment({
        id: '2017-03-03 13:01:41 \x2b0000 UTC',
        title: 'RxSwiftåŸºæœ¬æ¦‚å¿µ',
        link: decodeURI(location.href),
        desc: 'FRPå‡½æ•°å¼ååº”å‹ç¼–ç¨‹ Functional Reactive Programming ï¼Œ ç¼©å†™ä¸º FRP å‡½æ•°ç¼–ç¨‹ å‡½æ•°æ˜¯ç¬¬ä¸€ç­‰å…¬æ°‘ æ‰€è°“ ç¬¬ä¸€ç­‰å…¬æ°‘ (first class) ï¼ŒæŒ‡çš„æ˜¯å‡½æ•°ä¸å…¶ä»–æ•°æ®ç±»å‹ä¸€æ ·ï¼Œå¤„äºå¹³ç­‰åœ°ä½ã€‚æ—¢å¯ä»¥èµ‹å€¼ç»™å…¶',
        owner: 'huos3203',
        repo: 'huos3203.github.io',
        oauth: {
          client_id: 'd46ea301857e36a08319',
          client_secret: '9da00f1f475c4166b96fbe157d0afdbd64cc613c'
        }
      });
      gitment.render('comments-gitment');
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://github.com/imsun/gitment">comments powered by gitment.</a></noscript>
  
  

  
    <script src="https://utteranc.es/client.js"
            repo="huos3203/huos3203.github.io"
            issue-term="pathname"
            theme="github-light"
            crossorigin="anonymous"
            async>
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://github.com/utterance">comments powered by utterances.</a></noscript>

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
      <a href="mailto:iTBoyer@qq.com" class="iconfont icon-email" title="email"></a>
      <a href="https://github.com/huos3203" class="iconfont icon-github" title="github"></a>
      <a href="http://weibo.com/1791281385" class="iconfont icon-weibo" title="weibo"></a>
      <a href="http://www.zhihu.com/people/boyers" class="iconfont icon-zhihu" title="zhihu"></a>
      <a href="http://douban.com/people/boyers" class="iconfont icon-douban" title="douban"></a>
      <a href="http://localhost:1313" class="iconfont icon-bilibili" title="bilibili"></a>
  <a href="https://huos3203.github.io/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    ç”± <a class="hexo-link" href="https://gohugo.io">Hugo</a> å¼ºåŠ›é©±åŠ¨
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    ä¸»é¢˜ - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  <div class="busuanzi-footer">
    <span id="busuanzi_container_site_pv"> æœ¬ç«™æ€»è®¿é—®é‡ <span id="busuanzi_value_site_pv"><img src="/img/spinner.svg" alt="spinner.svg"/></span> æ¬¡ </span>
      <span class="division">|</span>
    <span id="busuanzi_container_site_uv"> æœ¬ç«™æ€»è®¿å®¢æ•° <span id="busuanzi_value_site_uv"><img src="/img/spinner.svg" alt="spinner.svg"/></span> äºº </span>
  </div>

  <span class="copyright-year">
    &copy; 
    2017 - 
    2019
    <span class="heart">
      <i class="iconfont icon-heart"></i>
    </span>
    <span class="author">iTBoyer</span>
  </span>
</div>
    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  <script src="/lib/highlight/highlight.pack.js?v=20171001"></script>
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js" integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js" integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin="anonymous"></script>
<script type="text/javascript" src="/dist/even.26188efa.min.js"></script>








</body>
</html>
