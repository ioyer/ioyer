<!DOCTYPE html>
<html lang="zh-cn">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>ä»UIKitåˆ°AppKit - Even - A super concise theme for Hugo</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<meta name="author" content="iTBoyer" /><meta name="description" content="ä¸åŒç‚¹ NSWindowController åœ¨Macä¸Šåº”ç”¨éƒ½æ”¯æŒå¤šçª—å£ï¼ˆNSWindowControllerï¼‰ï¼ŒAppKit ä¸­éƒ½æœ‰ NSWindowControlleræ‹…å½“ç€ç±»ä¼¼" /><meta name="keywords" content="è¯­æ³•,UI,æ··ç¼–" />






<meta name="generator" content="Hugo 0.56.3 with even 4.0.0" />


<link rel="canonical" href="https://huos3203.github.io/post/macos/%E4%BB%8Euikit%E5%88%B0appkit/" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">

<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<link href="/dist/even.c2a46f00.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css" integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin="anonymous">


<meta property="og:title" content="ä»UIKitåˆ°AppKit" />
<meta property="og:description" content="ä¸åŒç‚¹ NSWindowController åœ¨Macä¸Šåº”ç”¨éƒ½æ”¯æŒå¤šçª—å£ï¼ˆNSWindowControllerï¼‰ï¼ŒAppKit ä¸­éƒ½æœ‰ NSWindowControlleræ‹…å½“ç€ç±»ä¼¼" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://huos3203.github.io/post/macos/%E4%BB%8Euikit%E5%88%B0appkit/" />
<meta property="article:published_time" content="2017-03-03T17:55:16+00:00" />
<meta property="article:modified_time" content="2019-08-08T17:46:02+08:00" />
<meta itemprop="name" content="ä»UIKitåˆ°AppKit">
<meta itemprop="description" content="ä¸åŒç‚¹ NSWindowController åœ¨Macä¸Šåº”ç”¨éƒ½æ”¯æŒå¤šçª—å£ï¼ˆNSWindowControllerï¼‰ï¼ŒAppKit ä¸­éƒ½æœ‰ NSWindowControlleræ‹…å½“ç€ç±»ä¼¼">


<meta itemprop="datePublished" content="2017-03-03T17:55:16&#43;00:00" />
<meta itemprop="dateModified" content="2019-08-08T17:46:02&#43;08:00" />
<meta itemprop="wordCount" content="4118">



<meta itemprop="keywords" content="è¯­æ³•,UI,æ··ç¼–," />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="ä»UIKitåˆ°AppKit"/>
<meta name="twitter:description" content="ä¸åŒç‚¹ NSWindowController åœ¨Macä¸Šåº”ç”¨éƒ½æ”¯æŒå¤šçª—å£ï¼ˆNSWindowControllerï¼‰ï¼ŒAppKit ä¸­éƒ½æœ‰ NSWindowControlleræ‹…å½“ç€ç±»ä¼¼"/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">Even</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/">
        <li class="mobile-menu-item">ä¸»é¡µ</li>
      </a><a href="/post/">
        <li class="mobile-menu-item">å½’æ¡£</li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">æ ‡ç­¾ğŸ·ï¸</li>
      </a><a href="/categories/">
        <li class="mobile-menu-item">åˆ†ç±»</li>
      </a>
  </ul>
</nav>
  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">Even</a>
</div>

<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/">ä¸»é¡µ</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/post/">å½’æ¡£</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/tags/">æ ‡ç­¾ğŸ·ï¸</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/categories/">åˆ†ç±»</a>
      </li>
  </ul>
</nav>
    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">ä»UIKitåˆ°AppKit</h1>

      <div class="post-meta">
        <span class="post-time"> 2017-03-03 </span>
        <div class="post-category">
            <a href="/categories/macos/"> macOS </a>
            <a href="/categories/%E8%A7%86%E5%9B%BE/"> è§†å›¾ </a>
            </div>
          <span class="more-meta"> çº¦ 4118 å­— </span>
          <span class="more-meta"> é¢„è®¡é˜…è¯» 9 åˆ†é’Ÿ </span>
        <span id="busuanzi_container_page_pv" class="more-meta"> <span id="busuanzi_value_page_pv"><img src="/img/spinner.svg" alt="spinner.svg"/></span> æ¬¡é˜…è¯» </span>
      </div>
    </header>

    <div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">æ–‡ç« ç›®å½•</h2>
  <div class="post-toc-content always-active">
    <nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#ä¸åŒç‚¹">ä¸åŒç‚¹</a>
<ul>
<li><a href="#nswindowcontroller">NSWindowController</a></li>
<li><a href="#nsviewcontroller">NSViewController</a></li>
<li><a href="#nswindow-å’Œ-uiwindow">NSWindow å’Œ UIWindow</a></li>
</ul></li>
<li><a href="#å“åº”è€…é“¾-responder-chain">å“åº”è€…é“¾ï¼ˆresponder chainï¼‰</a>
<ul>
<li><a href="#target-actionæ¶ˆæ¯ä¼ é€’æ–¹å¼">Target-Actionæ¶ˆæ¯ä¼ é€’æ–¹å¼</a>
<ul>
<li><a href="#ä¼ é€’æœºåˆ¶çš„å±€é™">ä¼ é€’æœºåˆ¶çš„å±€é™</a></li>
<li><a href="#æ§ä»¶å…³è”actionäº‹ä»¶çš„åŒºåˆ«">æ§ä»¶å…³è”Actionäº‹ä»¶çš„åŒºåˆ«</a></li>
</ul></li>
</ul></li>
<li><a href="#viewè§†å›¾ç³»ç»Ÿ">Viewè§†å›¾ç³»ç»Ÿ</a>
<ul>
<li><a href="#layer-backed-view-iosåå“ºappkitå±‚æ”¯æŒè§†å›¾">Layer-Backed View: iOSåå“ºAppKitå±‚æ”¯æŒè§†å›¾</a>
<ul>
<li><a href="#layer-backingå¯ç”¨-ç¦ç”¨-wantslayer">layer backingå¯ç”¨ï¼ç¦ç”¨:wantsLayer</a></li>
<li><a href="#ä¿®æ”¹layerå±æ€§">ä¿®æ”¹layerå±æ€§</a></li>
<li><a href="#åˆå¹¶-layer">åˆå¹¶ Layer</a>
<ul>
<li><a href="#candrawsubviewsintolayeråˆå¹¶layer">canDrawSubviewsIntoLayeråˆå¹¶Layer</a></li>
<li><a href="#éšå¼layer-backedåˆå¹¶layer">éšå¼layer-backedåˆå¹¶Layer</a></li>
</ul></li>
<li><a href="#layer-é‡ç»˜ç­–ç•¥">Layer é‡ç»˜ç­–ç•¥</a>
<ul>
<li><a href="#layer-backed-view-é»˜è®¤çš„è‡ªåŠ¨é‡ç»˜ç­–ç•¥">layer-backed view é»˜è®¤çš„è‡ªåŠ¨é‡ç»˜ç­–ç•¥</a></li>
<li><a href="#è®¾ç½®layer-backed-viewæ‰‹åŠ¨é‡ç»˜ç­–ç•¥">è®¾ç½®layer-backed viewæ‰‹åŠ¨é‡ç»˜ç­–ç•¥</a></li>
<li><a href="#è®¾ç½®viewçš„å±æ€§æ¥é‡ç»˜layer">è®¾ç½®viewçš„å±æ€§æ¥é‡ç»˜Layer</a></li>
</ul></li>
</ul></li>
<li><a href="#layer-hosting-view-ä½¿ç”¨-core-animation-layer">Layer-Hosting View:ä½¿ç”¨ Core Animation layer</a>
<ul>
<li><a href="#åˆ›å»º">åˆ›å»º</a></li>
</ul></li>
<li><a href="#å…¶ä»–ä¸-view-ç›¸å…³çš„é™·é˜±">å…¶ä»–ä¸ View ç›¸å…³çš„é™·é˜±</a>
<ul>
<li><a href="#åæ ‡ç³»ç»ŸåŸç‚¹è®¾ç½®å·¦ä¸‹-å·¦ä¸Šè§’">åæ ‡ç³»ç»ŸåŸç‚¹è®¾ç½®å·¦ä¸‹ï¼å·¦ä¸Šè§’</a></li>
<li><a href="#viewèƒŒæ™¯é¢œè‰²å±æ€§drawsbackground">ViewèƒŒæ™¯é¢œè‰²å±æ€§drawsBackground</a></li>
<li><a href="#è®¾ç½®å…‰æ ‡è¿½è¸ªåŒºåŸŸ">è®¾ç½®å…‰æ ‡è¿½è¸ªåŒºåŸŸ</a></li>
<li><a href="#nscellå›°æƒ‘">NSCellå›°æƒ‘</a>
<ul>
<li><a href="#è‡ªå®šä¹‰ä¸€ä¸ªæŒ‰é’®æ§ä»¶">è‡ªå®šä¹‰ä¸€ä¸ªæŒ‰é’®æ§ä»¶</a></li>
</ul></li>
<li><a href="#è·å–-core-graphics-ä¸Šä¸‹æ–‡">è·å– Core Graphics ä¸Šä¸‹æ–‡</a></li>
</ul></li>
</ul></li>
<li><a href="#åŠ¨ç”»">åŠ¨ç”»</a>
<ul>
<li><a href="#å¯¹-layer-backed-viewåšåŠ¨ç”»">å¯¹ layer-backed viewåšåŠ¨ç”»</a>
<ul>
<li><a href="#å‡ ä½•å±æ€§">å‡ ä½•å±æ€§</a></li>
<li><a href="#çš„animator-proxyåŠ¨ç”»">çš„animator proxyåŠ¨ç”»</a></li>
<li><a href="#nsanimationcontextåŠ¨ç”»">NSAnimationContextåŠ¨ç”»</a></li>
<li><a href="#å¯ç”¨éšå¼åŠ¨ç”»">å¯ç”¨éšå¼åŠ¨ç”»</a></li>
<li><a href="#caanimationsæ§åˆ¶åŠ¨ç”»">CAAnimationsæ§åˆ¶åŠ¨ç”»</a>
<ul>
<li><a href="#å¸§åŠ¨ç”»">å¸§åŠ¨ç”»</a></li>
</ul></li>
</ul></li>
<li><a href="#æ–‡å­—ç³»ç»Ÿ">æ–‡å­—ç³»ç»Ÿ</a></li>
<li><a href="#æ²™ç›’">æ²™ç›’</a></li>
</ul></li>
<li><a href="#ç‹¬æœ‰ç‰¹æ€§">ç‹¬æœ‰ç‰¹æ€§</a></li>
</ul></li>
</ul>
</nav>
  </div>
</div>
    <div class="post-content">
      

<h2 id="ä¸åŒç‚¹">ä¸åŒç‚¹</h2>

<h3 id="nswindowcontroller">NSWindowController</h3>

<p>åœ¨<code>Mac</code>ä¸Šåº”ç”¨éƒ½æ”¯æŒå¤šçª—å£ï¼ˆ<code>NSWindowController</code>ï¼‰ï¼Œ<code>AppKit</code> ä¸­éƒ½æœ‰ <code>NSWindowController</code>æ‹…å½“ç€ç±»ä¼¼åœ¨<code>iOS</code>ä¸­çš„<code>view controller</code>å¤„ç†çš„ä»»åŠ¡ã€‚
&gt;<code>window</code>åœ¨<code>iOS</code>å æ®æ•´ä¸ªå±å¹•ï¼Œå‡ ä¹ä¸æ€ä¹ˆä¸ç”¨ã€‚</p>

<h3 id="nsviewcontroller">NSViewController</h3>

<p><code>AppKit</code> ä¸­çš„ <code>NSViewController</code>é»˜è®¤ä¸æ”¯æŒäº¤äº’ï¼Œç¼ºå°‘ç”Ÿå‘½å‘¨æœŸç›¸å…³æ–¹æ³•å’Œ<code>UIKit</code>ä¸­ç†Ÿæ‚‰çš„ç‰¹æ€§ã€‚
ä½†åœ¨OS X 10.10 Yosemiteä¹‹åï¼Œ<code>NSViewController</code>æ”¹è¿›å¾ˆå¤šï¼Œé»˜è®¤æ”¯æŒäº¤äº’ä¸­çš„å“åº”é“¾ã€‚</p>

<h3 id="nswindow-å’Œ-uiwindow">NSWindow å’Œ UIWindow</h3>

<p>åœ¨<code>UIKit</code>ä¸­<code>UIWindow</code>æ˜¯ä¸€ä¸ª <code>view</code> çš„å­ç±».
åœ¨<code>AppKit</code>ä¸­<code>NSWindow</code>ç”¨ <code>contentView</code> å±æ€§æŒæœ‰ä¸€ä¸ªæŒ‡å‘å…¶é¡¶å±‚ <code>view</code> çš„å¼•ç”¨ã€‚</p>

<h2 id="å“åº”è€…é“¾-responder-chain">å“åº”è€…é“¾ï¼ˆresponder chainï¼‰</h2>

<p>å¦‚æœä½ åœ¨ä¸º OS X 10.9 æˆ–è€…æ›´ä½ç‰ˆæœ¬çš„ç³»ç»Ÿå¼€å‘ï¼Œè¯·æ³¨æ„åœ¨é»˜è®¤æƒ…å†µä¸‹<code>view controller</code> å¹¶ä¸æ˜¯å“åº”è€…é“¾çš„ä¸€ç¯ã€‚ç›¸åï¼Œäº‹ä»¶ä¼šæ²¿ç€è§†å›¾æ ‘å‘ä¸Šä¼ é€’ç„¶åç›´æ¥åˆ°è¾¾ <code>window</code> å’Œ <code>window</code> <code>controller</code>ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¦‚æœä½ æƒ³åœ¨ <code>view controller</code> å¤„ç†äº‹ä»¶ï¼Œä½ éœ€è¦æ‰‹åŠ¨æŠŠå®ƒæ·»åŠ åˆ°å“åº”è€…é“¾ä¸­ã€‚</p>

<h3 id="target-actionæ¶ˆæ¯ä¼ é€’æ–¹å¼">Target-Actionæ¶ˆæ¯ä¼ é€’æ–¹å¼</h3>

<p><code>Target-Action</code> æ˜¯å›åº” <code>UI äº‹ä»¶</code>æ—¶å…¸å‹çš„æ¶ˆæ¯ä¼ é€’æ–¹å¼ã€‚<code>iOS</code> ä¸Šçš„ <code>UIControl</code> å’Œ <code>Mac</code> ä¸Šçš„ <code>NSControl/NSCell</code> éƒ½æ”¯æŒè¿™ä¸ªæœºåˆ¶ã€‚
<code>Target-Action</code> åœ¨æ¶ˆæ¯çš„å‘é€è€…å’Œæ¥æ”¶è€…ä¹‹é—´å»ºç«‹äº†ä¸€ä¸ªæ¾æ•£çš„å…³ç³»ã€‚æ¶ˆæ¯çš„æ¥æ”¶è€…ä¸çŸ¥é“å‘é€è€…ï¼Œç”šè‡³æ¶ˆæ¯çš„å‘é€è€…ä¹Ÿä¸çŸ¥é“æ¶ˆæ¯çš„æ¥æ”¶è€…ä¼šæ˜¯ä»€ä¹ˆã€‚å¦‚æœ <code>target</code> æ˜¯ <code>nil</code>ï¼Œ<code>action</code> ä¼šåœ¨å“åº”é“¾ (responder chain) ä¸­è¢«ä¼ é€’ä¸‹å»ï¼Œç›´åˆ°æ‰¾åˆ°ä¸€ä¸ªå“åº”å®ƒçš„å¯¹è±¡ã€‚</p>

<h4 id="ä¼ é€’æœºåˆ¶çš„å±€é™">ä¼ é€’æœºåˆ¶çš„å±€é™</h4>

<p>åŸºäº <code>target-action</code> ä¼ é€’æœºåˆ¶çš„ä¸€ä¸ªå±€é™æ˜¯ï¼Œå‘é€çš„æ¶ˆæ¯ä¸èƒ½æºå¸¦è‡ªå®šä¹‰çš„ä¿¡æ¯ï¼š
1. åœ¨<code>iOS</code> ä¸­ï¼Œå¯ä»¥é€‰æ‹©æ€§çš„æŠŠå‘é€è€…å’Œè§¦å‘ <code>action</code> çš„äº‹ä»¶ä½œä¸ºå‚æ•°ã€‚
2. åœ¨ <code>Mac</code> å¹³å°ä¸Š <code>action</code> æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°æ°¸è¿œæ˜¯å‘é€è€…ï¼Œå¦åˆ™å°†ä¸è§†ä¸ºæ— æ•ˆæ–¹æ³•ã€‚
åœ¨<code>AppKit</code>å”¯ä¸€æœ‰æ•ˆçš„<code>action</code> æ–¹æ³•å£°æ˜æ–¹å¼ï¼š
{% codeblock lang:objc %}
- (void)performAction:(id)sender;
{% endcodeblock %}</p>

<h4 id="æ§ä»¶å…³è”actionäº‹ä»¶çš„åŒºåˆ«">æ§ä»¶å…³è”Actionäº‹ä»¶çš„åŒºåˆ«</h4>

<p><code>iOS</code> ä¸Šçš„ <code>UIControl</code> å’Œ <code>Mac</code> ä¸Šçš„ <code>NSControl/NSCell</code> éƒ½æ”¯æŒè¿™ä¸ªæœºåˆ¶ã€‚
1. åœ¨ <code>iOS</code> ä¸­ï¼Œæ¯ä¸ªæ§ä»¶å¯ä»¥é€šè¿‡<code>addTarget:action:forControlEvents:</code>å’Œå¤šä¸ª <code>target-action</code> å…³è”ã€‚
2. åœ¨<code>AppKit</code>ä¸­é€šå¸¸ä¸€ä¸ª<code>æ§ä»¶</code>ä»…å¯¹åº”ä¸€ä¸ª <code>target-action</code>å¯¹ã€‚</p>

<h2 id="viewè§†å›¾ç³»ç»Ÿ">Viewè§†å›¾ç³»ç»Ÿ</h2>

<p>å› ä¸ºå†å²é—ç•™é—®é¢˜ï¼Œ<code>Mac</code> çš„è§†å›¾ç³»ç»Ÿå’Œ <code>iOS</code>çš„è§†å›¾ç³»ç»Ÿæœ‰å¾ˆå¤§åŒºåˆ«ã€‚
1. ç»˜å›¾å¤„ç†å™¨å·®å¼‚
<code>iOS</code>ç”± <code>Core Animation layer</code> é©±åŠ¨ï¼Œä½¿ç”¨<code>GPU</code>å¤„ç†ã€‚
<code>AppKit</code>è§†å›¾ç³»ç»Ÿç›¸å…³çš„ä»»åŠ¡ä¸»è¦é  <code>CPU</code> å¤„ç†ï¼Œå› ä¸ºåœ¨<code>AppKit</code>è®¾è®¡ä¹‹åˆï¼Œ<code>GPU</code>è¿˜æ²¡æœ‰è¯ç”Ÿã€‚
Macå¼€å‘å‚è€ƒèµ„æ–™ï¼š
<a href="https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/CocoaViewsGuide/Introduction/Introduction.html#//apple_ref/doc/uid/TP40002978">Introduction to View Programming Guide for Cocoa</a>
<a href="https://developer.apple.com/videos/wwdc/2012/#217">WWDC sessionï¼šLayer-Backed Views: AppKit + Core Animation</a>
<a href="https://developer.apple.com/videos/wwdc/2013/#215">Optimizing Drawing and Scrolling</a></p>

<h3 id="layer-backed-view-iosåå“ºappkitå±‚æ”¯æŒè§†å›¾">Layer-Backed View: iOSåå“ºAppKitå±‚æ”¯æŒè§†å›¾</h3>

<ol>
<li><code>iOS</code>åå“º<code>AppKit</code>
é»˜è®¤æƒ…å†µä¸‹ï¼Œ<code>AppKit</code> çš„ <code>view</code> ä¸æ˜¯ç”± <code>Core Animation layer</code> é©±åŠ¨çš„ï¼›<code>AppKit</code> æ•´åˆ <code>layer-backing</code> æ˜¯ <code>iOS</code> åå“ºçš„ç»“æœã€‚</li>
</ol>

<h4 id="layer-backingå¯ç”¨-ç¦ç”¨-wantslayer">layer backingå¯ç”¨ï¼ç¦ç”¨:wantsLayer</h4>

<p><code>AppKit</code> åŒºåˆ† <code>layer-backed view</code> å’Œ <code>layer-hosting view</code>ï¼Œå¯ä»¥åœ¨æ¯ä¸ªè§†å›¾æ ‘çš„æ ¹èŠ‚ç‚¹å¯ç”¨æˆ–è€…ç¦ç”¨ <code>layer backing</code>ã€‚
å¯ç”¨ <code>layer backing</code>
1. æ–¹æ³•ä¸€ï¼šæŠŠçª—å£çš„ <code>contentView</code> çš„ <code>wantsLayer</code> å±æ€§è®¾ç½®ä¸º <code>YES</code>
2. æ–¹æ³•äºŒï¼šåœ¨ <code>Interface Builder</code> çš„ <code>View Effects Inspector</code> é¢æ¿å®Œæˆ
è¿™ä¼šå¯¼è‡´ <code>window</code> çš„è§†å›¾æ ‘ä¸­æ‰€æœ‰çš„ <code>view</code> éƒ½å¯ç”¨ <code>layer backing</code>ï¼Œè¿™æ ·å°±æ²¡å¿…è¦åå¤è®¾ç½®æ¯ä¸ª <code>view</code> çš„ <code>wantsLayer</code> å±æ€§äº†ã€‚</p>

<h4 id="ä¿®æ”¹layerå±æ€§">ä¿®æ”¹layerå±æ€§</h4>

<p>åœ¨<code>AppKit</code>ä¸Šå¼€å¯<code>layer backing</code>ä¹‹åï¼Œ<code>layer</code>çš„æ‹¥æœ‰è€…æ˜¯<code>AppKit</code>ï¼Œè¿™å°±æ„å‘³ç€ä¸èƒ½ç›´æ¥ç¼–è¾‘ <code>layer</code>çš„å±æ€§ã€‚
åœ¨ <code>iOS</code> ä¸Šå¯ä»¥ç›´æ¥ç¼–è¾‘ï¼š
{% codeblock lang:objc %}
self.layer.backgroundColor = [UIColor redColor].CGColor;
{% endcodeblock %}
åœ¨ <code>AppKit</code>ç¼–è¾‘<code>layer</code>å±æ€§éœ€è¦ä»¥ä¸‹æ­¥éª¤ï¼š
1. é‡å†™ <code>NSView</code> çš„ <code>wantsUpdateLayer</code> æ–¹æ³•å¹¶è¿”å› <code>YES</code>,è¿™èƒ½è®©ä½ å¯ä»¥æ”¹å˜ <code>layer</code> çš„å±æ€§ã€‚
è¿™æ ·ä»¥æ¥ï¼Œåœ¨<code>view</code> æ›´æ–°å‘¨æœŸä¸­ï¼Œå°†ä¸ä¼šå†è°ƒç”¨ <code>view</code> çš„ <code>drawRect:</code> æ–¹æ³•ã€‚å–è€Œä»£ä¹‹ï¼Œè°ƒç”¨<code>updateLayer</code>æ–¹æ³•æ¥æ›´æ–°<code>Layer</code>ã€‚
ä¸¾ä¸ªä¾‹å­ï¼Œç”¨è¿™æ–¹æ³•å»å®ç°ä¸€ä¸ªéå¸¸ç®€å•çš„æœ‰çº¯è‰²èƒŒæ™¯çš„ <code>view</code>ï¼ˆæ²¡é”™ï¼Œ<code>NSView</code> æ²¡æœ‰<code>backgroundColor</code> å±æ€§ï¼‰ï¼š
è¿™ä¸ªä¾‹å­çš„å‰ææ˜¯è¿™ä¸ª <code>view</code> çš„<code>çˆ¶ view</code> å·²ç»ä¸ºå…¶è§†å›¾æ ‘å¯ç”¨äº† <code>layer backing</code>ã€‚
å¦ä¸€ç§å¯è¡Œçš„å®ç°åˆ™åªéœ€è¦é‡å†™ <code>drawRect:</code> æ–¹æ³•å¹¶åœ¨å…¶ä¸­ç»˜åˆ¶èƒŒæ™¯é¢œè‰²ã€‚
{% codeblock lang:objc %}
@interface ColoredView: NSView
@property (nonatomic) NSColor *backgroundColor;
@end</p>

<p>@implementation ColoredView
- (BOOL)wantsUpdateLayer
{
    return YES;
}</p>

<ul>
<li><p>(void)updateLayer
{
self.layer.backgroundColor = self.backgroundColor.CGColor;
}</p></li>

<li><p>(void)setBackgroundColor:(NSColor *)backgroundColor
{
_backgroundColor = backgroundColor;
[self setNeedsDisplay:YES];
}
@end
{% endcodeblock %}</p></li>
</ul>

<h4 id="åˆå¹¶-layer">åˆå¹¶ Layer</h4>

<p>å½“APPå¯åŠ¨è¿‡å¤šçš„<code>layer-backed view</code> ä¼šå¸¦æ¥å·¨å¤§çš„å†…å­˜æ¶ˆè€—ï¼ˆæ¯ä¸€ä¸ª <code>layer</code> æœ‰å…¶è‡ªå·±çš„ <code>backing store</code>ï¼Œè¿˜æœ‰å¯èƒ½å’Œå…¶ä»– <code>view</code>çš„ <code>backing store</code> é‡å ï¼‰è€Œä¸”ä¼šå¸¦æ¥æ½œåœ¨çš„åˆæˆè¿™äº› <code>layer</code> çš„æ¶ˆè€—ã€‚</p>

<h5 id="candrawsubviewsintolayeråˆå¹¶layer">canDrawSubviewsIntoLayeråˆå¹¶Layer</h5>

<p>ä» OS X 10.9 å¼€å§‹ï¼Œå¦‚æœä¸å•ç‹¬å¯¹ä¸€ä¸ª <code>view</code> ä¸­çš„å­ <code>view</code> åšåŠ¨ç”»ï¼Œå¯ä»¥é€šè¿‡è®¾ç½® <code>canDrawSubviewsIntoLayer</code> å±æ€§æ¥è®© <code>AppKit</code> åˆå¹¶ä¸€ä¸ª<code>è§†å›¾æ ‘</code>ä¸­æ‰€æœ‰ <code>layer</code> çš„å†…å®¹åˆ°ä¸€ä¸ªå…±æœ‰çš„ <code>layer</code>ã€‚</p>

<h5 id="éšå¼layer-backedåˆå¹¶layer">éšå¼layer-backedåˆå¹¶Layer</h5>

<p>æ‰€æœ‰éšå¼ <code>layer-backed</code> çš„<code>å­ view</code>ï¼ˆæ¯”å¦‚ï¼Œæ²¡æœ‰æ˜¾å¼åœ°å¯¹è¿™äº›<code>å­ view</code> è®¾ç½® <code>wantsLayer = YES</code>ï¼‰ç°åœ¨å°†ä¼šè¢«ç»˜åˆ¶åˆ°åŒä¸€ä¸ª <code>layer</code> ä¸­ã€‚ä¸è¿‡<code>wantsLayer</code> è®¾ç½®ä¸º <code>YES</code> çš„<code>å­ view</code> ä»ç„¶æŒæœ‰å®ƒä»¬è‡ªå·±çš„ <code>backing layer</code>ï¼Œ è€Œä¸”ä¸ç®¡ <code>wantsUpdateLayer</code> è¿”å›ä»€ä¹ˆï¼Œå®ƒä»¬çš„ <code>drawRect:</code> æ–¹æ³•ä»ç„¶ä¼šè¢«è°ƒç”¨ã€‚</p>

<h4 id="layer-é‡ç»˜ç­–ç•¥">Layer é‡ç»˜ç­–ç•¥</h4>

<h5 id="layer-backed-view-é»˜è®¤çš„è‡ªåŠ¨é‡ç»˜ç­–ç•¥">layer-backed view é»˜è®¤çš„è‡ªåŠ¨é‡ç»˜ç­–ç•¥</h5>

<p><code>layer-backed view</code> ä¼šé»˜è®¤è®¾ç½®é‡ç»˜ç­–ç•¥ä¸º <code>NSViewLayerContentsRedrawDuringViewResize</code>ã€‚åœ¨è¡Œä¸ºä¸Šï¼Œè¿™ä¸ªé <code>layer-backed view</code> æ˜¯ç±»ä¼¼çš„ï¼Œä¸è¿‡å¦‚æœåŠ¨ç”»çš„æ¯ä¸€å¸§éƒ½å¼•å…¥ä¸€ä¸ªç»˜åˆ¶æ­¥éª¤çš„è¯å¯èƒ½ä¼šå¯¹åŠ¨ç”»çš„æ€§èƒ½é€ æˆä¸åˆ©å½±å“ã€‚</p>

<h5 id="è®¾ç½®layer-backed-viewæ‰‹åŠ¨é‡ç»˜ç­–ç•¥">è®¾ç½®layer-backed viewæ‰‹åŠ¨é‡ç»˜ç­–ç•¥</h5>

<ol>
<li>è®¾ç½®æ‰‹åŠ¨é‡ç»˜ç­–ç•¥ï¼šæŠŠ <code>layerContentsRedrawPolicy</code> å±æ€§è®¾ç½®ä¸º <code>NSViewLayerContentsRedrawOnSetNeedsDisplay</code></li>
<li>å®ç°æ‰‹åŠ¨é‡ç»˜æ“ä½œï¼šè°ƒç”¨ <code>-setNeedsDisplay:</code>æ–¹æ³•æ¥è§¦å‘é‡ç»˜æ“ä½œ
è¿™æ ·ä¾¿ç”±ä½ æ¥å†³å®š <code>layer</code> çš„å†…å®¹ä½•æ—¶éœ€è¦é‡ç»˜ã€‚å¸§çš„æ”¹å˜å°†ä¸å†è‡ªåŠ¨è§¦å‘é‡ç»˜ã€‚</li>
</ol>

<h5 id="è®¾ç½®viewçš„å±æ€§æ¥é‡ç»˜layer">è®¾ç½®viewçš„å±æ€§æ¥é‡ç»˜Layer</h5>

<ol>
<li>viewä¸­<code>layerContentsPlacement</code>å±æ€§ï¼šç­‰ä»·<code>layer</code>ä¸­çš„ <code>contentGravity</code> å±æ€§ã€‚
è¿™ä¸ªå±æ€§å…è®¸ä½ æŒ‡å®šåœ¨è°ƒæ•´å¤§å°çš„æ—¶å€™å½“å‰çš„ <code>layer</code> å†…å®¹è¯¥æ€ä¹ˆæ˜ å°„åˆ° <code>layer</code> ä¸Šã€‚</li>
</ol>

<h3 id="layer-hosting-view-ä½¿ç”¨-core-animation-layer">Layer-Hosting View:ä½¿ç”¨ Core Animation layer</h3>

<p><code>layer-hosting view</code> æ˜¯è§†å›¾æ ‘ä¸­çš„å¶å­èŠ‚ç‚¹ï¼Œä½¿ç”¨è¿™ç§æ¨¡å¼å¯ä»¥å¯¹<code>layer</code> åŠå…¶<code>å­ layer</code> åšä»»ä½•æ“ä½œï¼Œä»£ä»·æ˜¯ä½ å†ä¹Ÿä¸èƒ½ç»™è¯¥ <code>view</code> æ·»åŠ ä»»ä½•<code>å­ view</code>ã€‚</p>

<h4 id="åˆ›å»º">åˆ›å»º</h4>

<ol>
<li>ä¸º <code>view</code> çš„ <code>layer</code> å±æ€§åˆ†é…ä¸€ä¸ª <code>layer å¯¹è±¡</code>ï¼Œ</li>
<li>è®¾ç½®<code>wantsLayer</code> ä¸º <code>YES</code>
è¿™äº›æ­¥éª¤çš„é¡ºåºæ˜¯éå¸¸å…³é”®ï¼š
{% codeblock lang:swift %}</li>
<li>(instancetype)initWithFrame:(NSRect)frame
{
self = [super initWithFrame:frame];
if (self)
{
    self.layer = [[CALayer alloc] init];
    self.wantsLayer = YES;
}
}
{% endcodeblock %}
åœ¨ä½ è®¾ç½®äº†è‡ªå®šä¹‰çš„ <code>layer</code> ä¹‹åï¼Œå†è®¾ç½® <code>wantsLayer</code> æ˜¯éå¸¸é‡è¦çš„ã€‚</li>
</ol>

<h3 id="å…¶ä»–ä¸-view-ç›¸å…³çš„é™·é˜±">å…¶ä»–ä¸ View ç›¸å…³çš„é™·é˜±</h3>

<h4 id="åæ ‡ç³»ç»ŸåŸç‚¹è®¾ç½®å·¦ä¸‹-å·¦ä¸Šè§’">åæ ‡ç³»ç»ŸåŸç‚¹è®¾ç½®å·¦ä¸‹ï¼å·¦ä¸Šè§’</h4>

<p>é€šè¿‡é‡å†™<code>isFlipped</code> å¹¶è¿”å› <code>YES</code> æ¥æ¢å¤åˆ°ä½ ç†Ÿæ‚‰çš„å·¦ä¸Šè§’ã€‚</p>

<h4 id="viewèƒŒæ™¯é¢œè‰²å±æ€§drawsbackground">ViewèƒŒæ™¯é¢œè‰²å±æ€§drawsBackground</h4>

<p>ç”±äº <code>AppKit</code> ä¸­çš„ <code>view</code> æ²¡æœ‰èƒŒæ™¯é¢œè‰²å±æ€§å¯ä»¥è®©ä½ ç›´æ¥è®¾ç½®ä¸º <code>[NSColor clearColor]</code> æ¥è®©å…¶å˜å¾—é€æ˜ï¼Œè®¸å¤š <code>NSView</code> çš„å­ç±»æ¯”å¦‚ <code>NSTextView</code> å’Œ <code>NSScrollView</code> å¼€æ”¾äº†ä¸€ä¸ª <code>drawsBackground</code> å±æ€§ï¼Œå¦‚æœä½ æƒ³è®©è¿™ä¸€ç±» <code>view</code> é€æ˜ï¼Œä½ å¿…é¡»è®¾ç½®è¯¥å±æ€§ä¸º <code>NO</code>ã€‚</p>

<h4 id="è®¾ç½®å…‰æ ‡è¿½è¸ªåŒºåŸŸ">è®¾ç½®å…‰æ ‡è¿½è¸ªåŒºåŸŸ</h4>

<p>ä¸ºäº†èƒ½æ¥æ”¶å…‰æ ‡è¿›å‡ºä¸€ä¸ª view æˆ–è€…åœ¨ view é‡Œé¢ç§»åŠ¨çš„äº‹ä»¶ï¼Œä½ éœ€è¦åˆ›å»ºä¸€ä¸ªè¿½è¸ªåŒºåŸŸã€‚ä½ å¯ä»¥åœ¨ <code>NSView</code> ä¸­æŒ‡å®šçš„ <code>updateTrackingAreas</code> æ–¹æ³•ä¸­æ¥åšè¿™ä»¶äº‹æƒ…ã€‚ä¸€ä¸ªé€šç”¨çš„å†™æ³•çœ‹èµ·æ¥æ˜¯è¿™æ ·å­çš„ï¼š
{% codeblock lang:swift %}
- (void)updateTrackingAreas
{
    [self removeTrackingArea:self.trackingArea];
    self.trackingArea = [[NSTrackingArea alloc] initWithRect:CGRectZero
                                                     options:NSTrackingMouseEnteredAndExited|NSTrackingInVisibleRect|NSTrackingActiveInActiveApp
                                                       owner:self
                                                    userInfo:nil];
    [self addTrackingArea:self.trackingArea];
}
{% endcodeblock %}</p>

<h4 id="nscellå›°æƒ‘">NSCellå›°æƒ‘</h4>

<p><code>AppKit</code> çš„æ§ä»¶ä¹‹å‰æ˜¯ç”± <code>NSCell</code> çš„å­ç±»é©±åŠ¨çš„ï¼Œå¯ä»¥è¢«æ‰€æœ‰åŒç±»å‹çš„æ§ä»¶é‡ç”¨ã€‚
<code>AppKit</code> æœ€åˆåŒºåˆ† <code>view</code> å’Œ <code>cell</code> æ˜¯ä¸ºäº†èŠ‚çœèµ„æº - <code>view</code> å¯ä»¥æŠŠæ‰€æœ‰çš„ç»˜åˆ¶å·¥ä½œä»£ç†ç»™æ›´è½»é‡çº§çš„å¯ä»¥è¢«æ‰€æœ‰åŒç±»å‹çš„ <code>view</code> é‡ç”¨çš„ <code>cell</code> å¯¹è±¡ã€‚
ä¸è¦æ··æ·†è¿™äº› <code>cell</code> å’Œ <code>UIKit</code> é‡Œ <code>table view</code> çš„ <code>cell</code> åŠ <code>collection view</code> çš„ <code>cell</code>ã€‚</p>

<h5 id="è‡ªå®šä¹‰ä¸€ä¸ªæŒ‰é’®æ§ä»¶">è‡ªå®šä¹‰ä¸€ä¸ªæŒ‰é’®æ§ä»¶</h5>

<p>Apple æ­£åœ¨ä¸€æ­¥æ­¥åœ°æŠ›å¼ƒè¿™æ ·çš„å®ç°æ–¹æ³•äº†ï¼Œä½†æ˜¯ä½ è¿˜æ˜¯ä¼šæ—¶ä¸æ—¶ç¢°åˆ°è¿™æ ·çš„é—®é¢˜ã€‚
ä¸¾ä¸ªä¾‹å­ï¼Œå¦‚æœä½ æƒ³åˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰çš„æŒ‰é’®ï¼Œ
1. é¦–å…ˆè¦ç»§æ‰¿ <code>NSButton</code> å’Œ <code>NSButtonCell</code>
2. ç„¶ååœ¨è¿™ä¸ª <code>cell å­ç±»</code>é‡Œé¢è¿›è¡Œä½ è‡ªå®šä¹‰çš„ç»˜åˆ¶ï¼Œ
3. ç„¶åé€šè¿‡é‡å†™ <code>+[NSControl cellClass]</code>æ–¹æ³•å‘Šè¯‰è‡ªå®šä¹‰æŒ‰é’®ä½¿ç”¨ä½ çš„ <code>cell å­ç±»</code></p>

<h4 id="è·å–-core-graphics-ä¸Šä¸‹æ–‡">è·å– Core Graphics ä¸Šä¸‹æ–‡</h4>

<p>æœ€åï¼Œå¦‚æœä½ æƒ³çŸ¥é“åœ¨ä½ è‡ªå·±çš„ <code>drawRect:</code> æ–¹æ³•é‡Œæ€ä¹ˆè·å–å½“å‰çš„ <code>Core Graphics</code> ä¸Šä¸‹æ–‡ï¼Œç­”æ¡ˆæ˜¯ <code>NSGraphicsContext</code> çš„ <code>graphicsPort</code> å±æ€§ã€‚è¯¦ç»†å†…å®¹è¯·æŸ¥çœ‹ <a href="https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/CocoaDrawingGuide/">Cocoa Drawing Guide</a>ã€‚</p>

<h2 id="åŠ¨ç”»">åŠ¨ç”»</h2>

<p>å¦‚æœä½ çš„ <code>view</code> ä¸æ˜¯ç”± <code>layer</code> é©±åŠ¨çš„ï¼Œé‚£ä½ çš„åŠ¨ç”»è‡ªç„¶æ˜¯å®Œå…¨ç”± <code>CPU</code> å¤„ç†ï¼Œè¿™æ„å‘³ç€åŠ¨ç”»çš„æ¯ä¸€æ­¥éƒ½å¿…é¡»ç›¸åº”åœ°ç»˜åˆ¶åˆ° <code>window-backing store</code> ä¸Šã€‚</p>

<h3 id="å¯¹-layer-backed-viewåšåŠ¨ç”»">å¯¹ layer-backed viewåšåŠ¨ç”»</h3>

<p>æ­£å¦‚ä¸Šé¢è¯´çš„ï¼Œåœ¨ <code>AppKit</code> ä¸­,è¿™äº› <code>layer</code> ç”± <code>AppKit</code> ç®¡ç†ï¼Œä½ ä¸åº”è¯¥ä¿®æ”¹ <code>layer-backed view</code> ä¸­çš„ <code>layer</code>ã€‚</p>

<h4 id="å‡ ä½•å±æ€§">å‡ ä½•å±æ€§</h4>

<p>ä¸<code>iOS</code> ç›¸åï¼Œ<code>view</code> çš„å‡ ä½•å±æ€§å¹¶ä¸ä»…ä»…æ˜¯å¯¹åº”çš„ <code>layer</code> çš„å‡ ä½•å±æ€§çš„æ˜ å°„ï¼Œä½† <code>AppKit</code> å´ä¼šæŠŠ <code>view</code> å†…éƒ¨çš„å‡ ä½•å±æ€§åŒæ­¥åˆ° <code>layer</code>ã€‚</p>

<h4 id="çš„animator-proxyåŠ¨ç”»">çš„animator proxyåŠ¨ç”»</h4>

<p>{% codeblock lang:objc %}
view.animator.alphaValue = .5;
{% endcodeblock %}
åœ¨å¹•åï¼Œè¿™å¥ä»£ç ä¼šå¯ç”¨ <code>layer</code> çš„éšå¼åŠ¨ç”»ï¼Œè®¾ç½®å…¶é€æ˜åº¦ï¼Œç„¶åå†æ¬¡ç¦ç”¨ <code>layer</code> çš„éšå¼åŠ¨ç”»ã€‚</p>

<h4 id="nsanimationcontextåŠ¨ç”»">NSAnimationContextåŠ¨ç”»</h4>

<ol>
<li><p>ç»“æŸå›è°ƒ
{% codeblock lang:objc %}
[NSAnimationContext runAnimationGroup:^(NSAnimationContext *context){</p>

<p>//æŒç»­æ—¶é—´
context.duration = 1;<br />
//ç¼“åŠ¨ç±»å‹
context.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseIn];
view.animator.alphaValue = .5;</p></li>
</ol>

<p>} completionHandler:^{
    // &hellip;
}];
{% endcodeblock %}
2. æ— ç»“æŸå›è°ƒ
{% codeblock lang:objc %}
[NSAnimationContext currentContext].duration = 1;
view.animator.alphaValue = .5;
{% endcodeblock %}</p>

<h4 id="å¯ç”¨éšå¼åŠ¨ç”»">å¯ç”¨éšå¼åŠ¨ç”»</h4>

<p>{% codeblock lang:objc %}
[NSAnimationContext currentContext].allowsImplicitAnimations = YES;
view.alphaValue = .5;
{% endcodeblock %}</p>

<h4 id="caanimationsæ§åˆ¶åŠ¨ç”»">CAAnimationsæ§åˆ¶åŠ¨ç”»</h4>

<p>ä½¿ç”¨ <code>CAAnimation</code> å®ä¾‹æ›´å…¨é¢åœ°æ§åˆ¶åŠ¨ç”»ã€‚å’Œ <code>iOS</code> ç›¸åï¼Œä½ ä¸èƒ½ç›´æ¥æŠŠå®ƒä»¬åŠ åˆ° <code>layer</code> ä¸Šï¼ˆå› ä¸º <code>layer</code> ä¸åº”è¯¥ç”±ä½ æ¥ä¿®æ”¹ï¼‰ï¼Œä¸è¿‡ä½ å¯ä»¥ä½¿ç”¨ <code>NSAnimatablePropertyContainer</code> åè®®ä¸­å®šä¹‰çš„ <code>API</code>ï¼Œ<code>NSView</code> å’Œ <code>NSWindow</code> å·²ç»å®ç°äº†è¯¥åè®®ã€‚
{% codeblock lang:objc %}
CAKeyframeAnimation *animation = [CAKeyframeAnimation animation];
animation.values = @[@1, @.9, @.8, @.7, @.6];
view.animations = @{@&ldquo;alphaValue&rdquo;: animation};
view.animator.alphaValue = .5;
{% endcodeblock %}</p>

<h5 id="å¸§åŠ¨ç”»">å¸§åŠ¨ç”»</h5>

<p>å¯¹äºå¸§åŠ¨ç”»æ¥è¯´ï¼ŒæŠŠ <code>view</code> çš„ <code>layerContentsRedrawPolicy</code> è®¾ç½®ä¸º <code>NSViewLayerContentsRedrawOnSetNeedsDisplay</code> æ˜¯éå¸¸é‡è¦çš„ï¼Œä¸ç„¶çš„è¯ <code>view</code> çš„å†…å®¹åœ¨æ¯ä¸€å¸§éƒ½ä¼šè¢«é‡ç»˜ã€‚</p>

<p>å¾ˆé—æ†¾ï¼Œ<code>NSView</code> æ²¡æœ‰å¼€æ”¾ <code>Core Animation layer</code> æ‰€æœ‰å¯ä»¥è¿›è¡ŒåŠ¨ç”»çš„å±æ€§ï¼Œ<code>transform</code> æ˜¯å…¶ä¸­æœ€é‡è¦çš„ä¾‹å­ã€‚çœ‹çœ‹ Jonathan Willings çš„è¿™ç¯‡æ–‡ç« ï¼Œå®ƒæè¿°äº†ä½ å¯ä»¥å¦‚ä½•è§£å†³è¿™äº›é™åˆ¶ã€‚ä¸è¿‡æ³¨æ„ï¼Œæ–‡ç« ä¸­çš„è§£å†³æ–¹æ¡ˆæ˜¯ä¸å—å®˜æ–¹æ”¯æŒçš„ã€‚</p>

<p>ä¸Šé¢æåˆ°çš„æ‰€æœ‰ä¸œè¥¿éƒ½é€‚ç”¨äº <code>layer-backed view</code>ã€‚å¯¹äº l<code>ayer-hosting view</code> æ¥è¯´ï¼Œä½ å¯ä»¥ç›´æ¥å¯¹ <code>view</code> çš„ <code>layer</code> æˆ–è€…<code>å­ layer</code> ä½¿ç”¨ <code>CAAnimations</code>ï¼Œå› ä¸ºä½ æ‹¥æœ‰å®ƒä»¬çš„æ§åˆ¶æƒã€‚</p>

<h3 id="æ–‡å­—ç³»ç»Ÿ">æ–‡å­—ç³»ç»Ÿ</h3>

<p>æœ‰äº† <code>TextKit</code>ï¼Œ<code>iOS 7</code> ç»ˆäºæœ‰äº†å’Œ <code>Mac</code> ä¸Šæ—©å°±æœ‰äº†çš„ <code>Cocoa Text System</code> ç­‰æ•ˆçš„ä¸œè¥¿ã€‚ä½† Apple å¹¶ä¸ä»…ä»…æ˜¯æŠŠæ–‡å­—ç³»ç»Ÿä» Mac ä¸Šè½¬ç§»åˆ° <code>iOS</code>ï¼›ç›¸åï¼ŒApple å¯¹å…¶åšäº†äº›æ˜¾è‘—çš„æ”¹å˜ã€‚
ä¸¾ä¸ªä¾‹å­ï¼Œ<code>AppKit</code> å¼€æ”¾ <code>NSTypesetter</code> å’Œ <code>NSGlyphGenerator</code>ï¼Œä½ å¯ä»¥é€šè¿‡ç»§æ‰¿è¿™ä¸¤è€…æ¥è‡ªå®šä¹‰å®ƒä»¬çš„ä¸€äº›ç‰¹æ€§ã€‚<code>iOS</code> å¹¶ä¸å¼€æ”¾è¿™äº›ç±»ï¼Œä½†æ˜¯ä½ å¯ä»¥é€šè¿‡ <code>NSLayoutManagerDelegate</code> åè®®è¾¾åˆ°å®šåˆ¶çš„ç›®çš„ã€‚
æ€»ä½“æ¥è¯´ï¼Œä¸¤ä¸ªå¹³å°çš„æ–‡å­—ç³»ç»Ÿè¿˜æ˜¯éå¸¸ç›¸ä¼¼çš„ï¼Œæ‰€æœ‰ä½ åœ¨ <code>iOS</code> ä¸Šèƒ½åšçš„åœ¨ <code>Mac</code> ä¸Šéƒ½å¯ä»¥åšï¼ˆç”šè‡³æ›´å¤šï¼‰ï¼Œä½†å¯¹äºä¸€äº›ä¸œè¥¿ï¼Œä½ å¿…é¡»ä»ä¸åŒçš„åœ°æ–¹å¯»æ‰¾åˆé€‚çš„æ–¹æ³•å®ç°ã€‚</p>

<h3 id="æ²™ç›’">æ²™ç›’</h3>

<p>ç¬¦åˆæ²™ç›’æœºåˆ¶çš„ <code>Mac åº”ç”¨</code>æ‰èƒ½é€šè¿‡ <code>Mac App Store</code> é”€å”®ã€‚ç„¶è€Œï¼Œæˆ‘ä»¬å·²ç»ä¹ æƒ¯äº†æ²™ç›’æœºåˆ¶è¿˜æ²¡å‡ºç°ä¹‹å‰çš„ <code>Mac</code> å¼€å‘ç¯å¢ƒï¼Œæ‰€ä»¥æœ‰æ—¶å€™ä¼šå¿½è§†ä¸€äº›ä½ æƒ³è¦å®ç°çš„åŠŸèƒ½ä¼šå’Œæ²™ç›’çš„é™åˆ¶å‡ºç°å†²çªã€‚
ç®¡ç†Macåº”ç”¨å¯¹æ²™ç›’æ”¯æŒï¼š</p>

<h2 id="ç‹¬æœ‰ç‰¹æ€§">ç‹¬æœ‰ç‰¹æ€§</h2>

<p>æœ‰å¾ˆå¤šäº‹æƒ…ä½ åªèƒ½åœ¨ Mac ä¸Šåšï¼Œè¿™ä¸»è¦æ˜¯å› ä¸ºå®ƒä¸åŒçš„äº¤äº’æ¨¡å‹å’Œå®ƒæ›´ä¸ºå®½æ¾çš„å®‰å…¨ç­–ç•¥ã€‚åœ¨æœ¬æœŸè¯é¢˜ä¸­ï¼Œæˆ‘ä»¬æœ‰ä¸€äº›æ–‡ç« æ·±å…¥æ¢è®¨äº†å…¶ä¸­çš„ä¸€äº›å†…å®¹ï¼š<a href="http://objccn.io/issue-14-4/">è¿›ç¨‹é—´é€šè®¯</a>ï¼Œ<a href="http://objccn.io/issue-14-1/">ä½¿ Mac åº”ç”¨è„šæœ¬åŒ–</a>,<a href="http://objccn.io/issue-14-2/">åœ¨æ²™ç›’ä¸­è„šæœ¬åŒ–å…¶ä»–åº”ç”¨</a> , <a href="http://objccn.io/issue-14-3/">ä¸ºä½ çš„åº”ç”¨æ„å»ºæ’ä»¶</a>ã€‚
å½“ç„¶ï¼Œè¿™åªæ˜¯ Mac ç‹¬æœ‰ç‰¹æ€§ä¸­å¾ˆå°çš„ä¸€éƒ¨åˆ†ï¼Œä½†è¿™ç»™äº†ä½ ä¸€ä¸ªå¾ˆå¥½çš„è§†è§’çœ‹å¾… iOS 8 ä»å¤´å¼€å§‹æ‰“é€ å…¶å¯æ‰©å±•æ€§å’Œ app é—´é€šè®¯ã€‚æœ€åï¼Œè¿˜æœ‰å¾ˆå¤šä¸œè¥¿ç­‰å¾…ä½ å»æ¢ç´¢ï¼šDrag and Dropï¼ŒPrintingï¼ŒBindingsï¼ŒOpenCL ç­‰ç­‰ï¼Œè¿™é‡Œä»…ä»…æ˜¯ä¸¾å‡ ä¸ªä¾‹å­ã€‚</p>

    </div>

    <div class="post-copyright">
  <p class="copyright-item">
    <span class="item-title">æ–‡ç« ä½œè€…</span>
    <span class="item-content">iTBoyer</span>
  </p>
  <p class="copyright-item">
    <span class="item-title">ä¸Šæ¬¡æ›´æ–°</span>
    <span class="item-content">
        2019-08-08
        <a href="iEmacsd/commit/ccacacd56ce82e709b32bc57ad0c707301dbd1e0" title="è¿ç§»mdæ–‡æ¡£">(ccacacd)</a>
    </span>
  </p>
  
  
</div>
<div class="post-reward">
  <input type="checkbox" name="reward" id="reward" hidden />
  <label class="reward-button" for="reward">èµèµæ”¯æŒ</label>
  <div class="qr-code">
    
    <label class="qr-code-image" for="reward">
        <img class="image" src="/path/to/your/wechat-qr-code.png">
        <span>å¾®ä¿¡æ‰“èµ</span>
      </label>
    <label class="qr-code-image" for="reward">
        <img class="image" src="/path/to/your/alipay-qr-code.png">
        <span>æ”¯ä»˜å®æ‰“èµ</span>
      </label>
  </div>
</div><footer class="post-footer">
      <div class="post-tags">
          <a href="/tags/%E8%AF%AD%E6%B3%95/">è¯­æ³•</a>
          <a href="/tags/ui/">UI</a>
          <a href="/tags/%E6%B7%B7%E7%BC%96/">æ··ç¼–</a>
          </div>
      <nav class="post-nav">
        <a class="prev" href="/post/xcode/xcode8%E6%8F%92%E4%BB%B6%E5%88%B6%E4%BD%9C%E6%9B%BF%E4%BB%A3alcatraz/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">Xcode8æ’ä»¶åˆ¶ä½œæ›¿ä»£Alcatraz</span>
            <span class="prev-text nav-mobile">ä¸Šä¸€ç¯‡</span>
          </a>
        <a class="next" href="/post/%E5%BC%80%E6%BA%90%E5%BA%93/rxswift%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5/">
            <span class="next-text nav-default">RxSwiftåŸºæœ¬æ¦‚å¿µ</span>
            <span class="next-text nav-mobile">ä¸‹ä¸€ç¯‡</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        <div id="comments-gitment"></div>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/theme-next/theme-next-gitment@1/default.min.css" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/gh/theme-next/theme-next-gitment@1/gitment.browser.min.js" crossorigin="anonymous"></script>
    <script type="text/javascript">
      var gitment = new Gitment({
        id: '2017-03-03 17:55:16 \x2b0000 UTC',
        title: 'ä»UIKitåˆ°AppKit',
        link: decodeURI(location.href),
        desc: 'ä¸åŒç‚¹ NSWindowController åœ¨Macä¸Šåº”ç”¨éƒ½æ”¯æŒå¤šçª—å£ï¼ˆNSWindowControllerï¼‰ï¼ŒAppKit ä¸­éƒ½æœ‰ NSWindowControlleræ‹…å½“ç€ç±»ä¼¼',
        owner: 'huos3203',
        repo: 'huos3203.github.io',
        oauth: {
          client_id: 'd46ea301857e36a08319',
          client_secret: '9da00f1f475c4166b96fbe157d0afdbd64cc613c'
        }
      });
      gitment.render('comments-gitment');
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://github.com/imsun/gitment">comments powered by gitment.</a></noscript>
  
  

  
    <script src="https://utteranc.es/client.js"
            repo="huos3203/huos3203.github.io"
            issue-term="pathname"
            theme="github-light"
            crossorigin="anonymous"
            async>
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://github.com/utterance">comments powered by utterances.</a></noscript>

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
      <a href="mailto:iTBoyer@qq.com" class="iconfont icon-email" title="email"></a>
      <a href="https://github.com/huos3203" class="iconfont icon-github" title="github"></a>
      <a href="http://weibo.com/1791281385" class="iconfont icon-weibo" title="weibo"></a>
      <a href="http://www.zhihu.com/people/boyers" class="iconfont icon-zhihu" title="zhihu"></a>
      <a href="http://douban.com/people/boyers" class="iconfont icon-douban" title="douban"></a>
      <a href="http://localhost:1313" class="iconfont icon-bilibili" title="bilibili"></a>
  <a href="https://huos3203.github.io/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    ç”± <a class="hexo-link" href="https://gohugo.io">Hugo</a> å¼ºåŠ›é©±åŠ¨
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    ä¸»é¢˜ - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  <div class="busuanzi-footer">
    <span id="busuanzi_container_site_pv"> æœ¬ç«™æ€»è®¿é—®é‡ <span id="busuanzi_value_site_pv"><img src="/img/spinner.svg" alt="spinner.svg"/></span> æ¬¡ </span>
      <span class="division">|</span>
    <span id="busuanzi_container_site_uv"> æœ¬ç«™æ€»è®¿å®¢æ•° <span id="busuanzi_value_site_uv"><img src="/img/spinner.svg" alt="spinner.svg"/></span> äºº </span>
  </div>

  <span class="copyright-year">
    &copy; 
    2017 - 
    2019
    <span class="heart">
      <i class="iconfont icon-heart"></i>
    </span>
    <span class="author">iTBoyer</span>
  </span>
</div>
    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  <script src="/lib/highlight/highlight.pack.js?v=20171001"></script>
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js" integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js" integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin="anonymous"></script>
<script type="text/javascript" src="/dist/even.26188efa.min.js"></script>








</body>
</html>
