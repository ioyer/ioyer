<!DOCTYPE html>
<html lang="zh-cn">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>swifté”™è¯¯å¤„ç† - Even - A super concise theme for Hugo</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<meta name="author" content="iTBoyer" /><meta name="description" content="Error handling is the process of responding to and recovering from error conditions in your program. Swift provides first-class support for throwing, catching, propagating, and manipulating recoverable errors at runtime. Some operations arenâ€™t guaranteed to always complete execution or produce a useful output. Optionals are used to represent the absence of a value, but when an operation fails, itâ€™s often useful to understand what caused the failure, so that your code can respond accordingly. As an example, consider the task of reading and processing data from a file on disk. There are a number of ways this task can fail, including the file not existing at the specified path, the file not having read permissions, or the file not being encoded in a compatible format. Distinguishing among these different situations allows a program to resolve some errors and to communicate to the user any errors it canâ€™t resolve. ä¸¾ä¾‹ï¼Œåœ¨è¯»å–å’Œå¤„ç†ç£ç›˜ä¸Šçš„ä¸€ä¸ªæ–‡ä»¶çš„æ•°æ®æ—¶ï¼Œä¼šæœ‰æœ‰è®¸å¤šæ–¹æ³•å¤±è´¥ï¼ŒåŒ…æ‹¬æŒ‡å®šçš„æ–‡ä»¶è·¯å¾„æ‰¾ä¸åˆ°ï¼Œæ²¡æœ‰æ–‡ä»¶çš„è¯»å–æƒé™ï¼Œæˆ–æ–‡ä»¶ç¼–ç æ ¼å¼ä¸å…¼å®¹ã€‚åœ¨è¿™äº›ä¸åŒæƒ…å†µä¸‹ï¼Œå°±å¯ä»¥è®©ç¨‹åºæç¤ºç”¨æˆ·å¯¼è‡´ç¨‹åºæ— æ³•æ‰§è¡Œçš„å…·ä½“åŸå› ã€‚
Representing and Throwing Errors In Swift, errors are represented by values of types that conform to the Error protocol. This empty protocol indicates that a type can be used for error handling. åœ¨swiftä¸­ï¼Œé”™è¯¯ç±»å‹æ˜¯éµå¾ªError åè®®ã€‚
Swift enumerations are particularly well suited to modeling a group of related error conditions, with associated values allowing for additional information about the nature of an error to be communicated. For example, hereâ€™s how you might represent the error conditions of operating a vending machine inside a game: swiftæšä¸¾ç±»å‹ç‰¹åˆ«é€‚åˆä¸ºä¸€ç»„é”™è¯¯æ¡ä»¶å»ºæ¨¡ï¼Œç”¨æ¥å…³è”å¯¼è‡´é”™è¯¯çš„çœŸæ­£åŸå› çš„ç›¸å…³ä¿¡æ¯ã€‚ä¾‹å¦‚ï¼š ä¸€ä¸ªåœ¨æ“ä½œä¸€å°æ¸¸æˆæœºæ—¶çš„ä¼šå‡ºç°çš„é”™è¯¯æšä¸¾ç±»ï¼š
1 2 3 4 5  enum VendingMachineError: Error { case invalidSelection case insufficientFunds(coinsNeeded: Int) case outOfStock }   Throwing an error lets you indicate that something unexpected happened and the normal flow of execution canâ€™t continue. You use a throw statement to throw an error. For example, the following code throws an error to indicate that five additional coins are needed by the vending machine: æŠ›å‡ºé”™è¯¯è¯´æ˜æ¸¸æˆå‡ºç°å¼‚å¸¸ï¼Œå¯¼è‡´å…¶ä»–æ“ä½œæ— æ³•è¿›è¡Œã€‚è¿™æ˜¯éœ€è¦é€šè¿‡Throwè¯­å¥æ¥æŠ›å‡ºè¿™ä¸ªé”™è¯¯ã€‚ä¾‹å¦‚ï¼Œä»¥ä¸‹ä»£ç æŠ›å‡ºäº†ä¸€ä¸ªé”™è¯¯è¡¨æ˜éœ€è¦fiveï¼š
1  throw VendingMachineError.insufficientFunds(coinsNeeded: 5)   Handling Errors When an error is thrown, some surrounding piece of code must be responsible for handling the errorâ€”for example, by correcting the problem, trying an alternative approach, or informing the user of the failure. å½“é”™è¯¯æŠ›å‡ºåï¼Œè¿™æ®µä»£ç å¿…é¡»æ¥å¤„ç†è¿™ä¸ªé”™è¯¯ã€‚ä¾‹å¦‚ï¼šé€šè¿‡çº æ­£é—®é¢˜ï¼Œå°è¯•å…¶ä»–æ–¹å¼å®ç°ï¼Œæˆ–é€šçŸ¥ç”¨æˆ·çš„å¤±è´¥ã€‚
There are four ways to handle errors in Swift. You can propagate the error from a function to the code that calls that function, handle the error using a do-catch statement, handle the error as an optional value, or assert that the error will not occur. Each approach is described in a section below. åœ¨swiftä¸­æœ‰å››ç§å¤„ç†é”™è¯¯æœºåˆ¶: 1. å‘è°ƒç”¨æ–¹æ³•ä¸­ä¼ é€’è¿™ä¸ªé”™è¯¯ 2. ä½¿ç”¨do-catchè¯­å¥å¤„ç† 3. æŠŠé”™è¯¯è®¾ç½®ä¸ºå¯é€‰å‹ 4.æ–­è¨€ä¸ä¼šå‡ºç°å¼‚å¸¸çš„æƒ…å†µä¸‹ï¼Œä½¿ç”¨try!ç¦æ­¢å¼‚å¸¸æŠ›å‡º
When a function throws an error, it changes the flow of your program, so itâ€™s important that you can quickly identify places in your code that can throw errors. To identify these places in your code, write the try keywordâ€”or the try? or try! variationâ€”before a piece of code that calls a function, method, or initializer that can throw an error. These keywords are described in the sections below. å½“ä¸€ä¸ªæ–¹æ³•æŠ›å‡ºé”™è¯¯æ—¶ï¼Œä¼šæ‰“æ–­ç¨‹åºæ­£å¸¸çš„å·¥ä½œæµï¼Œå¿…é¡»å¿«é€Ÿå®šä½åˆ°å¯èƒ½æŠ›å‡ºé”™è¯¯çš„ä»£ç ã€‚å¯ä»¥ä½¿ç”¨å…³é”®å­—try è¦æ³¨æ„ try?æˆ–try!ä¹‹é—´çš„å·®å¼‚ã€‚åœ¨è°ƒç”¨ä¸€ä¸ªå‡½æ•°ï¼Œæ–¹æ³•æˆ–è€…æ„é€ å™¨ä¹‹å‰ï¼Œæ¥æŠ›å‡ºå¼‚å¸¸ã€‚
Propagating Errors Using Throwing Functions To indicate that a function, method, or initializer can throw an error, you write the throws keyword in the functionâ€™s declaration after its parameters. A function marked with throws is called a throwing function. If the function specifies a return type, you write the throwskeyword before the return arrow (-&amp;gt;). å‡½æ•°ï¼Œæ–¹æ³•æˆ–æ„é€ å™¨éƒ½å¯ä»¥æŠ›å‡ºå¼‚å¸¸ï¼Œåªéœ€è¦åœ¨å£°æ˜å®ƒä»¬æ—¶æ·»åŠ å…³é”®å­—ï¼šthrowså³å¯ï¼Œè¿™ç§æ–¹æ³•è¢«ç§°ä¸ºthrowså‡½æ•°ï¼Œthrowså…³é”®å­—ä½ç½®åœ¨å‚æ•°ä¹‹åï¼Œè¿”å›å€¼(-&amp;gt;)ä¹‹å‰
A throwing function propagates errors that are thrown inside of it to the scope from which itâ€™s called. æŠ›å‡ºå‡½æ•°ä¼šæŠŠé”™è¯¯æŠ›ç»™è°ƒç”¨å®ƒçš„å‡½æ•°å‘¨æœŸä¸­å»ã€‚
" /><meta name="keywords" content="Hugo, swift, org-mode" />






<meta name="generator" content="Hugo 0.56.3 with even 4.0.0" />


<link rel="canonical" href="https://huos3203.github.io/post/swift/%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86/" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">

<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<link href="/dist/even.c2a46f00.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css" integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin="anonymous">


<meta property="og:title" content="swifté”™è¯¯å¤„ç†" />
<meta property="og:description" content="Error handling is the process of responding to and recovering from error conditions in your program. Swift provides first-class support for throwing, catching, propagating, and manipulating recoverable errors at runtime.
Some operations arenâ€™t guaranteed to always complete execution or produce a useful output. Optionals are used to represent the absence of a value, but when an operation fails, itâ€™s often useful to understand what caused the failure, so that your code can respond accordingly.
As an example, consider the task of reading and processing data from a file on disk. There are a number of ways this task can fail, including the file not existing at the specified path, the file not having read permissions, or the file not being encoded in a compatible format. Distinguishing among these different situations allows a program to resolve some errors and to communicate to the user any errors it canâ€™t resolve.
ä¸¾ä¾‹ï¼Œåœ¨è¯»å–å’Œå¤„ç†ç£ç›˜ä¸Šçš„ä¸€ä¸ªæ–‡ä»¶çš„æ•°æ®æ—¶ï¼Œä¼šæœ‰æœ‰è®¸å¤šæ–¹æ³•å¤±è´¥ï¼ŒåŒ…æ‹¬æŒ‡å®šçš„æ–‡ä»¶è·¯å¾„æ‰¾ä¸åˆ°ï¼Œæ²¡æœ‰æ–‡ä»¶çš„è¯»å–æƒé™ï¼Œæˆ–æ–‡ä»¶ç¼–ç æ ¼å¼ä¸å…¼å®¹ã€‚åœ¨è¿™äº›ä¸åŒæƒ…å†µä¸‹ï¼Œå°±å¯ä»¥è®©ç¨‹åºæç¤ºç”¨æˆ·å¯¼è‡´ç¨‹åºæ— æ³•æ‰§è¡Œçš„å…·ä½“åŸå› ã€‚

Representing and Throwing Errors

In Swift, errors are represented by values of types that conform to the Error protocol. This empty protocol indicates that a type can be used for error handling.
åœ¨swiftä¸­ï¼Œé”™è¯¯ç±»å‹æ˜¯éµå¾ªError åè®®ã€‚

Swift enumerations are particularly well suited to modeling a group of related error conditions, with associated values allowing for additional information about the nature of an error to be communicated. For example, hereâ€™s how you might represent the error conditions of operating a vending machine inside a game:
swiftæšä¸¾ç±»å‹ç‰¹åˆ«é€‚åˆä¸ºä¸€ç»„é”™è¯¯æ¡ä»¶å»ºæ¨¡ï¼Œç”¨æ¥å…³è”å¯¼è‡´é”™è¯¯çš„çœŸæ­£åŸå› çš„ç›¸å…³ä¿¡æ¯ã€‚ä¾‹å¦‚ï¼š
ä¸€ä¸ªåœ¨æ“ä½œä¸€å°æ¸¸æˆæœºæ—¶çš„ä¼šå‡ºç°çš„é”™è¯¯æšä¸¾ç±»ï¼š


1
2
3
4
5


enum VendingMachineError: Error {
case invalidSelection
case insufficientFunds(coinsNeeded: Int)
case outOfStock
}


Throwing an error lets you indicate that something unexpected happened and the normal flow of execution canâ€™t continue. You use a throw statement to throw an error. For example, the following code throws an error to indicate that five additional coins are needed by the vending machine:
æŠ›å‡ºé”™è¯¯è¯´æ˜æ¸¸æˆå‡ºç°å¼‚å¸¸ï¼Œå¯¼è‡´å…¶ä»–æ“ä½œæ— æ³•è¿›è¡Œã€‚è¿™æ˜¯éœ€è¦é€šè¿‡Throwè¯­å¥æ¥æŠ›å‡ºè¿™ä¸ªé”™è¯¯ã€‚ä¾‹å¦‚ï¼Œä»¥ä¸‹ä»£ç æŠ›å‡ºäº†ä¸€ä¸ªé”™è¯¯è¡¨æ˜éœ€è¦fiveï¼š


1


throw VendingMachineError.insufficientFunds(coinsNeeded: 5)


Handling Errors

When an error is thrown, some surrounding piece of code must be responsible for handling the errorâ€”for example, by correcting the problem, trying an alternative approach, or informing the user of the failure.
å½“é”™è¯¯æŠ›å‡ºåï¼Œè¿™æ®µä»£ç å¿…é¡»æ¥å¤„ç†è¿™ä¸ªé”™è¯¯ã€‚ä¾‹å¦‚ï¼šé€šè¿‡çº æ­£é—®é¢˜ï¼Œå°è¯•å…¶ä»–æ–¹å¼å®ç°ï¼Œæˆ–é€šçŸ¥ç”¨æˆ·çš„å¤±è´¥ã€‚

There are four ways to handle errors in Swift. You can propagate the error from a function to the code that calls that function, handle the error using a do-catch statement, handle the error as an optional value, or assert that the error will not occur. Each approach is described in a section below.
åœ¨swiftä¸­æœ‰å››ç§å¤„ç†é”™è¯¯æœºåˆ¶:
    1. å‘è°ƒç”¨æ–¹æ³•ä¸­ä¼ é€’è¿™ä¸ªé”™è¯¯
    2. ä½¿ç”¨do-catchè¯­å¥å¤„ç†
    3. æŠŠé”™è¯¯è®¾ç½®ä¸ºå¯é€‰å‹
    4.æ–­è¨€ä¸ä¼šå‡ºç°å¼‚å¸¸çš„æƒ…å†µä¸‹ï¼Œä½¿ç”¨try!ç¦æ­¢å¼‚å¸¸æŠ›å‡º

When a function throws an error, it changes the flow of your program, so itâ€™s important that you can quickly identify places in your code that can throw errors. To identify these places in your code, write the try keywordâ€”or the try? or try! variationâ€”before a piece of code that calls a function, method, or initializer that can throw an error. These keywords are described in the sections below.
å½“ä¸€ä¸ªæ–¹æ³•æŠ›å‡ºé”™è¯¯æ—¶ï¼Œä¼šæ‰“æ–­ç¨‹åºæ­£å¸¸çš„å·¥ä½œæµï¼Œå¿…é¡»å¿«é€Ÿå®šä½åˆ°å¯èƒ½æŠ›å‡ºé”™è¯¯çš„ä»£ç ã€‚å¯ä»¥ä½¿ç”¨å…³é”®å­—try è¦æ³¨æ„ try?æˆ–try!ä¹‹é—´çš„å·®å¼‚ã€‚åœ¨è°ƒç”¨ä¸€ä¸ªå‡½æ•°ï¼Œæ–¹æ³•æˆ–è€…æ„é€ å™¨ä¹‹å‰ï¼Œæ¥æŠ›å‡ºå¼‚å¸¸ã€‚

Propagating Errors Using Throwing Functions

To indicate that a function, method, or initializer can throw an error, you write the throws keyword in the functionâ€™s declaration after its parameters. A function marked with throws is called a throwing function. If the function specifies a return type, you write the throwskeyword before the return arrow (-&gt;).
å‡½æ•°ï¼Œæ–¹æ³•æˆ–æ„é€ å™¨éƒ½å¯ä»¥æŠ›å‡ºå¼‚å¸¸ï¼Œåªéœ€è¦åœ¨å£°æ˜å®ƒä»¬æ—¶æ·»åŠ å…³é”®å­—ï¼šthrowså³å¯ï¼Œè¿™ç§æ–¹æ³•è¢«ç§°ä¸ºthrowså‡½æ•°ï¼Œthrowså…³é”®å­—ä½ç½®åœ¨å‚æ•°ä¹‹åï¼Œè¿”å›å€¼(-&gt;)ä¹‹å‰

A throwing function propagates errors that are thrown inside of it to the scope from which itâ€™s called.
æŠ›å‡ºå‡½æ•°ä¼šæŠŠé”™è¯¯æŠ›ç»™è°ƒç”¨å®ƒçš„å‡½æ•°å‘¨æœŸä¸­å»ã€‚" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://huos3203.github.io/post/swift/%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86/" />
<meta property="article:published_time" content="2017-01-11T17:04:21+00:00" />
<meta property="article:modified_time" content="2019-08-08T17:46:02+08:00" />
<meta itemprop="name" content="swifté”™è¯¯å¤„ç†">
<meta itemprop="description" content="Error handling is the process of responding to and recovering from error conditions in your program. Swift provides first-class support for throwing, catching, propagating, and manipulating recoverable errors at runtime.
Some operations arenâ€™t guaranteed to always complete execution or produce a useful output. Optionals are used to represent the absence of a value, but when an operation fails, itâ€™s often useful to understand what caused the failure, so that your code can respond accordingly.
As an example, consider the task of reading and processing data from a file on disk. There are a number of ways this task can fail, including the file not existing at the specified path, the file not having read permissions, or the file not being encoded in a compatible format. Distinguishing among these different situations allows a program to resolve some errors and to communicate to the user any errors it canâ€™t resolve.
ä¸¾ä¾‹ï¼Œåœ¨è¯»å–å’Œå¤„ç†ç£ç›˜ä¸Šçš„ä¸€ä¸ªæ–‡ä»¶çš„æ•°æ®æ—¶ï¼Œä¼šæœ‰æœ‰è®¸å¤šæ–¹æ³•å¤±è´¥ï¼ŒåŒ…æ‹¬æŒ‡å®šçš„æ–‡ä»¶è·¯å¾„æ‰¾ä¸åˆ°ï¼Œæ²¡æœ‰æ–‡ä»¶çš„è¯»å–æƒé™ï¼Œæˆ–æ–‡ä»¶ç¼–ç æ ¼å¼ä¸å…¼å®¹ã€‚åœ¨è¿™äº›ä¸åŒæƒ…å†µä¸‹ï¼Œå°±å¯ä»¥è®©ç¨‹åºæç¤ºç”¨æˆ·å¯¼è‡´ç¨‹åºæ— æ³•æ‰§è¡Œçš„å…·ä½“åŸå› ã€‚

Representing and Throwing Errors

In Swift, errors are represented by values of types that conform to the Error protocol. This empty protocol indicates that a type can be used for error handling.
åœ¨swiftä¸­ï¼Œé”™è¯¯ç±»å‹æ˜¯éµå¾ªError åè®®ã€‚

Swift enumerations are particularly well suited to modeling a group of related error conditions, with associated values allowing for additional information about the nature of an error to be communicated. For example, hereâ€™s how you might represent the error conditions of operating a vending machine inside a game:
swiftæšä¸¾ç±»å‹ç‰¹åˆ«é€‚åˆä¸ºä¸€ç»„é”™è¯¯æ¡ä»¶å»ºæ¨¡ï¼Œç”¨æ¥å…³è”å¯¼è‡´é”™è¯¯çš„çœŸæ­£åŸå› çš„ç›¸å…³ä¿¡æ¯ã€‚ä¾‹å¦‚ï¼š
ä¸€ä¸ªåœ¨æ“ä½œä¸€å°æ¸¸æˆæœºæ—¶çš„ä¼šå‡ºç°çš„é”™è¯¯æšä¸¾ç±»ï¼š


1
2
3
4
5


enum VendingMachineError: Error {
case invalidSelection
case insufficientFunds(coinsNeeded: Int)
case outOfStock
}


Throwing an error lets you indicate that something unexpected happened and the normal flow of execution canâ€™t continue. You use a throw statement to throw an error. For example, the following code throws an error to indicate that five additional coins are needed by the vending machine:
æŠ›å‡ºé”™è¯¯è¯´æ˜æ¸¸æˆå‡ºç°å¼‚å¸¸ï¼Œå¯¼è‡´å…¶ä»–æ“ä½œæ— æ³•è¿›è¡Œã€‚è¿™æ˜¯éœ€è¦é€šè¿‡Throwè¯­å¥æ¥æŠ›å‡ºè¿™ä¸ªé”™è¯¯ã€‚ä¾‹å¦‚ï¼Œä»¥ä¸‹ä»£ç æŠ›å‡ºäº†ä¸€ä¸ªé”™è¯¯è¡¨æ˜éœ€è¦fiveï¼š


1


throw VendingMachineError.insufficientFunds(coinsNeeded: 5)


Handling Errors

When an error is thrown, some surrounding piece of code must be responsible for handling the errorâ€”for example, by correcting the problem, trying an alternative approach, or informing the user of the failure.
å½“é”™è¯¯æŠ›å‡ºåï¼Œè¿™æ®µä»£ç å¿…é¡»æ¥å¤„ç†è¿™ä¸ªé”™è¯¯ã€‚ä¾‹å¦‚ï¼šé€šè¿‡çº æ­£é—®é¢˜ï¼Œå°è¯•å…¶ä»–æ–¹å¼å®ç°ï¼Œæˆ–é€šçŸ¥ç”¨æˆ·çš„å¤±è´¥ã€‚

There are four ways to handle errors in Swift. You can propagate the error from a function to the code that calls that function, handle the error using a do-catch statement, handle the error as an optional value, or assert that the error will not occur. Each approach is described in a section below.
åœ¨swiftä¸­æœ‰å››ç§å¤„ç†é”™è¯¯æœºåˆ¶:
    1. å‘è°ƒç”¨æ–¹æ³•ä¸­ä¼ é€’è¿™ä¸ªé”™è¯¯
    2. ä½¿ç”¨do-catchè¯­å¥å¤„ç†
    3. æŠŠé”™è¯¯è®¾ç½®ä¸ºå¯é€‰å‹
    4.æ–­è¨€ä¸ä¼šå‡ºç°å¼‚å¸¸çš„æƒ…å†µä¸‹ï¼Œä½¿ç”¨try!ç¦æ­¢å¼‚å¸¸æŠ›å‡º

When a function throws an error, it changes the flow of your program, so itâ€™s important that you can quickly identify places in your code that can throw errors. To identify these places in your code, write the try keywordâ€”or the try? or try! variationâ€”before a piece of code that calls a function, method, or initializer that can throw an error. These keywords are described in the sections below.
å½“ä¸€ä¸ªæ–¹æ³•æŠ›å‡ºé”™è¯¯æ—¶ï¼Œä¼šæ‰“æ–­ç¨‹åºæ­£å¸¸çš„å·¥ä½œæµï¼Œå¿…é¡»å¿«é€Ÿå®šä½åˆ°å¯èƒ½æŠ›å‡ºé”™è¯¯çš„ä»£ç ã€‚å¯ä»¥ä½¿ç”¨å…³é”®å­—try è¦æ³¨æ„ try?æˆ–try!ä¹‹é—´çš„å·®å¼‚ã€‚åœ¨è°ƒç”¨ä¸€ä¸ªå‡½æ•°ï¼Œæ–¹æ³•æˆ–è€…æ„é€ å™¨ä¹‹å‰ï¼Œæ¥æŠ›å‡ºå¼‚å¸¸ã€‚

Propagating Errors Using Throwing Functions

To indicate that a function, method, or initializer can throw an error, you write the throws keyword in the functionâ€™s declaration after its parameters. A function marked with throws is called a throwing function. If the function specifies a return type, you write the throwskeyword before the return arrow (-&gt;).
å‡½æ•°ï¼Œæ–¹æ³•æˆ–æ„é€ å™¨éƒ½å¯ä»¥æŠ›å‡ºå¼‚å¸¸ï¼Œåªéœ€è¦åœ¨å£°æ˜å®ƒä»¬æ—¶æ·»åŠ å…³é”®å­—ï¼šthrowså³å¯ï¼Œè¿™ç§æ–¹æ³•è¢«ç§°ä¸ºthrowså‡½æ•°ï¼Œthrowså…³é”®å­—ä½ç½®åœ¨å‚æ•°ä¹‹åï¼Œè¿”å›å€¼(-&gt;)ä¹‹å‰

A throwing function propagates errors that are thrown inside of it to the scope from which itâ€™s called.
æŠ›å‡ºå‡½æ•°ä¼šæŠŠé”™è¯¯æŠ›ç»™è°ƒç”¨å®ƒçš„å‡½æ•°å‘¨æœŸä¸­å»ã€‚">


<meta itemprop="datePublished" content="2017-01-11T17:04:21&#43;00:00" />
<meta itemprop="dateModified" content="2019-08-08T17:46:02&#43;08:00" />
<meta itemprop="wordCount" content="4578">



<meta itemprop="keywords" content="å®‰å…¨," />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="swifté”™è¯¯å¤„ç†"/>
<meta name="twitter:description" content="Error handling is the process of responding to and recovering from error conditions in your program. Swift provides first-class support for throwing, catching, propagating, and manipulating recoverable errors at runtime.
Some operations arenâ€™t guaranteed to always complete execution or produce a useful output. Optionals are used to represent the absence of a value, but when an operation fails, itâ€™s often useful to understand what caused the failure, so that your code can respond accordingly.
As an example, consider the task of reading and processing data from a file on disk. There are a number of ways this task can fail, including the file not existing at the specified path, the file not having read permissions, or the file not being encoded in a compatible format. Distinguishing among these different situations allows a program to resolve some errors and to communicate to the user any errors it canâ€™t resolve.
ä¸¾ä¾‹ï¼Œåœ¨è¯»å–å’Œå¤„ç†ç£ç›˜ä¸Šçš„ä¸€ä¸ªæ–‡ä»¶çš„æ•°æ®æ—¶ï¼Œä¼šæœ‰æœ‰è®¸å¤šæ–¹æ³•å¤±è´¥ï¼ŒåŒ…æ‹¬æŒ‡å®šçš„æ–‡ä»¶è·¯å¾„æ‰¾ä¸åˆ°ï¼Œæ²¡æœ‰æ–‡ä»¶çš„è¯»å–æƒé™ï¼Œæˆ–æ–‡ä»¶ç¼–ç æ ¼å¼ä¸å…¼å®¹ã€‚åœ¨è¿™äº›ä¸åŒæƒ…å†µä¸‹ï¼Œå°±å¯ä»¥è®©ç¨‹åºæç¤ºç”¨æˆ·å¯¼è‡´ç¨‹åºæ— æ³•æ‰§è¡Œçš„å…·ä½“åŸå› ã€‚

Representing and Throwing Errors

In Swift, errors are represented by values of types that conform to the Error protocol. This empty protocol indicates that a type can be used for error handling.
åœ¨swiftä¸­ï¼Œé”™è¯¯ç±»å‹æ˜¯éµå¾ªError åè®®ã€‚

Swift enumerations are particularly well suited to modeling a group of related error conditions, with associated values allowing for additional information about the nature of an error to be communicated. For example, hereâ€™s how you might represent the error conditions of operating a vending machine inside a game:
swiftæšä¸¾ç±»å‹ç‰¹åˆ«é€‚åˆä¸ºä¸€ç»„é”™è¯¯æ¡ä»¶å»ºæ¨¡ï¼Œç”¨æ¥å…³è”å¯¼è‡´é”™è¯¯çš„çœŸæ­£åŸå› çš„ç›¸å…³ä¿¡æ¯ã€‚ä¾‹å¦‚ï¼š
ä¸€ä¸ªåœ¨æ“ä½œä¸€å°æ¸¸æˆæœºæ—¶çš„ä¼šå‡ºç°çš„é”™è¯¯æšä¸¾ç±»ï¼š


1
2
3
4
5


enum VendingMachineError: Error {
case invalidSelection
case insufficientFunds(coinsNeeded: Int)
case outOfStock
}


Throwing an error lets you indicate that something unexpected happened and the normal flow of execution canâ€™t continue. You use a throw statement to throw an error. For example, the following code throws an error to indicate that five additional coins are needed by the vending machine:
æŠ›å‡ºé”™è¯¯è¯´æ˜æ¸¸æˆå‡ºç°å¼‚å¸¸ï¼Œå¯¼è‡´å…¶ä»–æ“ä½œæ— æ³•è¿›è¡Œã€‚è¿™æ˜¯éœ€è¦é€šè¿‡Throwè¯­å¥æ¥æŠ›å‡ºè¿™ä¸ªé”™è¯¯ã€‚ä¾‹å¦‚ï¼Œä»¥ä¸‹ä»£ç æŠ›å‡ºäº†ä¸€ä¸ªé”™è¯¯è¡¨æ˜éœ€è¦fiveï¼š


1


throw VendingMachineError.insufficientFunds(coinsNeeded: 5)


Handling Errors

When an error is thrown, some surrounding piece of code must be responsible for handling the errorâ€”for example, by correcting the problem, trying an alternative approach, or informing the user of the failure.
å½“é”™è¯¯æŠ›å‡ºåï¼Œè¿™æ®µä»£ç å¿…é¡»æ¥å¤„ç†è¿™ä¸ªé”™è¯¯ã€‚ä¾‹å¦‚ï¼šé€šè¿‡çº æ­£é—®é¢˜ï¼Œå°è¯•å…¶ä»–æ–¹å¼å®ç°ï¼Œæˆ–é€šçŸ¥ç”¨æˆ·çš„å¤±è´¥ã€‚

There are four ways to handle errors in Swift. You can propagate the error from a function to the code that calls that function, handle the error using a do-catch statement, handle the error as an optional value, or assert that the error will not occur. Each approach is described in a section below.
åœ¨swiftä¸­æœ‰å››ç§å¤„ç†é”™è¯¯æœºåˆ¶:
    1. å‘è°ƒç”¨æ–¹æ³•ä¸­ä¼ é€’è¿™ä¸ªé”™è¯¯
    2. ä½¿ç”¨do-catchè¯­å¥å¤„ç†
    3. æŠŠé”™è¯¯è®¾ç½®ä¸ºå¯é€‰å‹
    4.æ–­è¨€ä¸ä¼šå‡ºç°å¼‚å¸¸çš„æƒ…å†µä¸‹ï¼Œä½¿ç”¨try!ç¦æ­¢å¼‚å¸¸æŠ›å‡º

When a function throws an error, it changes the flow of your program, so itâ€™s important that you can quickly identify places in your code that can throw errors. To identify these places in your code, write the try keywordâ€”or the try? or try! variationâ€”before a piece of code that calls a function, method, or initializer that can throw an error. These keywords are described in the sections below.
å½“ä¸€ä¸ªæ–¹æ³•æŠ›å‡ºé”™è¯¯æ—¶ï¼Œä¼šæ‰“æ–­ç¨‹åºæ­£å¸¸çš„å·¥ä½œæµï¼Œå¿…é¡»å¿«é€Ÿå®šä½åˆ°å¯èƒ½æŠ›å‡ºé”™è¯¯çš„ä»£ç ã€‚å¯ä»¥ä½¿ç”¨å…³é”®å­—try è¦æ³¨æ„ try?æˆ–try!ä¹‹é—´çš„å·®å¼‚ã€‚åœ¨è°ƒç”¨ä¸€ä¸ªå‡½æ•°ï¼Œæ–¹æ³•æˆ–è€…æ„é€ å™¨ä¹‹å‰ï¼Œæ¥æŠ›å‡ºå¼‚å¸¸ã€‚

Propagating Errors Using Throwing Functions

To indicate that a function, method, or initializer can throw an error, you write the throws keyword in the functionâ€™s declaration after its parameters. A function marked with throws is called a throwing function. If the function specifies a return type, you write the throwskeyword before the return arrow (-&gt;).
å‡½æ•°ï¼Œæ–¹æ³•æˆ–æ„é€ å™¨éƒ½å¯ä»¥æŠ›å‡ºå¼‚å¸¸ï¼Œåªéœ€è¦åœ¨å£°æ˜å®ƒä»¬æ—¶æ·»åŠ å…³é”®å­—ï¼šthrowså³å¯ï¼Œè¿™ç§æ–¹æ³•è¢«ç§°ä¸ºthrowså‡½æ•°ï¼Œthrowså…³é”®å­—ä½ç½®åœ¨å‚æ•°ä¹‹åï¼Œè¿”å›å€¼(-&gt;)ä¹‹å‰

A throwing function propagates errors that are thrown inside of it to the scope from which itâ€™s called.
æŠ›å‡ºå‡½æ•°ä¼šæŠŠé”™è¯¯æŠ›ç»™è°ƒç”¨å®ƒçš„å‡½æ•°å‘¨æœŸä¸­å»ã€‚"/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">Even</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/">
        <li class="mobile-menu-item">ä¸»é¡µ</li>
      </a><a href="/post/">
        <li class="mobile-menu-item">å½’æ¡£</li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">æ ‡ç­¾ğŸ·ï¸</li>
      </a><a href="/categories/">
        <li class="mobile-menu-item">åˆ†ç±»</li>
      </a>
  </ul>
</nav>
  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">Even</a>
</div>

<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/">ä¸»é¡µ</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/post/">å½’æ¡£</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/tags/">æ ‡ç­¾ğŸ·ï¸</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/categories/">åˆ†ç±»</a>
      </li>
  </ul>
</nav>
    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">swifté”™è¯¯å¤„ç†</h1>

      <div class="post-meta">
        <span class="post-time"> 2017-01-11 </span>
        <div class="post-category">
            <a href="/categories/swift/"> swift </a>
            <a href="/categories/%E8%AF%AD%E6%B3%95/"> è¯­æ³• </a>
            </div>
          <span class="more-meta"> çº¦ 4578 å­— </span>
          <span class="more-meta"> é¢„è®¡é˜…è¯» 10 åˆ†é’Ÿ </span>
        <span id="busuanzi_container_page_pv" class="more-meta"> <span id="busuanzi_value_page_pv"><img src="/img/spinner.svg" alt="spinner.svg"/></span> æ¬¡é˜…è¯» </span>
      </div>
    </header>

    <div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">æ–‡ç« ç›®å½•</h2>
  <div class="post-toc-content always-active">
    <nav id="TableOfContents">
<ul>
<li><a href="#representing-and-throwing-errors">Representing and Throwing Errors</a></li>
<li><a href="#handling-errors">Handling Errors</a>
<ul>
<li><a href="#propagating-errors-using-throwing-functions">Propagating Errors Using Throwing Functions</a></li>
<li><a href="#handling-errors-using-do-catch">Handling Errors Using Do-Catch</a></li>
<li><a href="#converting-errors-to-optional-values">Converting Errors to Optional Values</a></li>
<li><a href="#disabling-error-propagation">Disabling Error Propagation</a></li>
<li><a href="#specifying-cleanup-actions">Specifying Cleanup Actions</a></li>
</ul></li>
</ul>
</nav>
  </div>
</div>
    <div class="post-content">
      <p>Error handling is the process of responding to and recovering from error conditions in your program. Swift provides first-class support for throwing, catching, propagating, and manipulating recoverable errors at runtime.
Some operations arenâ€™t guaranteed to always complete execution or produce a useful output. Optionals are used to represent the absence of a value, but when an operation fails, itâ€™s often useful to understand what caused the failure, so that your code can respond accordingly.
As an example, consider the task of reading and processing data from a file on disk. There are a number of ways this task can fail, including the file not existing at the specified path, the file not having read permissions, or the file not being encoded in a compatible format. Distinguishing among these different situations allows a program to resolve some errors and to communicate to the user any errors it canâ€™t resolve.
ä¸¾ä¾‹ï¼Œåœ¨è¯»å–å’Œå¤„ç†ç£ç›˜ä¸Šçš„ä¸€ä¸ªæ–‡ä»¶çš„æ•°æ®æ—¶ï¼Œä¼šæœ‰æœ‰è®¸å¤šæ–¹æ³•å¤±è´¥ï¼ŒåŒ…æ‹¬æŒ‡å®šçš„æ–‡ä»¶è·¯å¾„æ‰¾ä¸åˆ°ï¼Œæ²¡æœ‰æ–‡ä»¶çš„è¯»å–æƒé™ï¼Œæˆ–æ–‡ä»¶ç¼–ç æ ¼å¼ä¸å…¼å®¹ã€‚åœ¨è¿™äº›ä¸åŒæƒ…å†µä¸‹ï¼Œå°±å¯ä»¥è®©ç¨‹åºæç¤ºç”¨æˆ·å¯¼è‡´ç¨‹åºæ— æ³•æ‰§è¡Œçš„å…·ä½“åŸå› ã€‚</p>

<h1 id="representing-and-throwing-errors">Representing and Throwing Errors</h1>

<p>In Swift, errors are represented by values of types that conform to the Error protocol. This empty protocol indicates that a type can be used for error handling.
åœ¨swiftä¸­ï¼Œé”™è¯¯ç±»å‹æ˜¯éµå¾ªError åè®®ã€‚</p>

<p>Swift enumerations are particularly well suited to modeling a group of related error conditions, with associated values allowing for additional information about the nature of an error to be communicated. For example, hereâ€™s how you might represent the error conditions of operating a vending machine inside a game:
swiftæšä¸¾ç±»å‹ç‰¹åˆ«é€‚åˆä¸ºä¸€ç»„é”™è¯¯æ¡ä»¶å»ºæ¨¡ï¼Œç”¨æ¥å…³è”å¯¼è‡´é”™è¯¯çš„çœŸæ­£åŸå› çš„ç›¸å…³ä¿¡æ¯ã€‚ä¾‹å¦‚ï¼š
ä¸€ä¸ªåœ¨æ“ä½œä¸€å°æ¸¸æˆæœºæ—¶çš„ä¼šå‡ºç°çš„é”™è¯¯æšä¸¾ç±»ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-swift" data-lang="swift"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-swift" data-lang="swift"><span class="kd">enum</span> <span class="nc">VendingMachineError</span><span class="p">:</span> <span class="n">Error</span> <span class="p">{</span>
<span class="k">case</span> <span class="n">invalidSelection</span>
<span class="k">case</span> <span class="n">insufficientFunds</span><span class="p">(</span><span class="n">coinsNeeded</span><span class="p">:</span> <span class="nb">Int</span><span class="p">)</span>
<span class="k">case</span> <span class="n">outOfStock</span>
<span class="p">}</span></code></pre></td></tr></table>
</div>
</div>
<p>Throwing an error lets you indicate that something unexpected happened and the normal flow of execution canâ€™t continue. You use a throw statement to throw an error. For example, the following code throws an error to indicate that five additional coins are needed by the vending machine:
æŠ›å‡ºé”™è¯¯è¯´æ˜æ¸¸æˆå‡ºç°å¼‚å¸¸ï¼Œå¯¼è‡´å…¶ä»–æ“ä½œæ— æ³•è¿›è¡Œã€‚è¿™æ˜¯éœ€è¦é€šè¿‡Throwè¯­å¥æ¥æŠ›å‡ºè¿™ä¸ªé”™è¯¯ã€‚ä¾‹å¦‚ï¼Œä»¥ä¸‹ä»£ç æŠ›å‡ºäº†ä¸€ä¸ªé”™è¯¯è¡¨æ˜éœ€è¦fiveï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-swift" data-lang="swift"><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-swift" data-lang="swift"><span class="k">throw</span> <span class="n">VendingMachineError</span><span class="p">.</span><span class="n">insufficientFunds</span><span class="p">(</span><span class="n">coinsNeeded</span><span class="p">:</span> <span class="mi">5</span><span class="p">)</span></code></pre></td></tr></table>
</div>
</div>
<h1 id="handling-errors">Handling Errors</h1>

<p>When an error is thrown, some surrounding piece of code must be responsible for handling the errorâ€”for example, by correcting the problem, trying an alternative approach, or informing the user of the failure.
å½“é”™è¯¯æŠ›å‡ºåï¼Œè¿™æ®µä»£ç å¿…é¡»æ¥å¤„ç†è¿™ä¸ªé”™è¯¯ã€‚ä¾‹å¦‚ï¼šé€šè¿‡çº æ­£é—®é¢˜ï¼Œå°è¯•å…¶ä»–æ–¹å¼å®ç°ï¼Œæˆ–é€šçŸ¥ç”¨æˆ·çš„å¤±è´¥ã€‚</p>

<p>There are four ways to handle errors in Swift. You can propagate the error from a function to the code that calls that function, handle the error using a do-catch statement, handle the error as an optional value, or assert that the error will not occur. Each approach is described in a section below.
åœ¨swiftä¸­æœ‰å››ç§å¤„ç†é”™è¯¯æœºåˆ¶:
    1. å‘è°ƒç”¨æ–¹æ³•ä¸­ä¼ é€’è¿™ä¸ªé”™è¯¯
    2. ä½¿ç”¨do-catchè¯­å¥å¤„ç†
    3. æŠŠé”™è¯¯è®¾ç½®ä¸ºå¯é€‰å‹
    4.æ–­è¨€ä¸ä¼šå‡ºç°å¼‚å¸¸çš„æƒ…å†µä¸‹ï¼Œä½¿ç”¨try!ç¦æ­¢å¼‚å¸¸æŠ›å‡º</p>

<p>When a function throws an error, it changes the flow of your program, so itâ€™s important that you can quickly identify places in your code that can throw errors. To identify these places in your code, write the try keywordâ€”or the try? or try! variationâ€”before a piece of code that calls a function, method, or initializer that can throw an error. These keywords are described in the sections below.
å½“ä¸€ä¸ªæ–¹æ³•æŠ›å‡ºé”™è¯¯æ—¶ï¼Œä¼šæ‰“æ–­ç¨‹åºæ­£å¸¸çš„å·¥ä½œæµï¼Œå¿…é¡»å¿«é€Ÿå®šä½åˆ°å¯èƒ½æŠ›å‡ºé”™è¯¯çš„ä»£ç ã€‚å¯ä»¥ä½¿ç”¨å…³é”®å­—<code>try</code> è¦æ³¨æ„ <code>try?</code>æˆ–<code>try!</code>ä¹‹é—´çš„å·®å¼‚ã€‚åœ¨è°ƒç”¨ä¸€ä¸ªå‡½æ•°ï¼Œæ–¹æ³•æˆ–è€…æ„é€ å™¨ä¹‹å‰ï¼Œæ¥æŠ›å‡ºå¼‚å¸¸ã€‚</p>

<h2 id="propagating-errors-using-throwing-functions">Propagating Errors Using Throwing Functions</h2>

<p>To indicate that a function, method, or initializer can throw an error, you write the throws keyword in the functionâ€™s declaration after its parameters. A function marked with throws is called a throwing function. If the function specifies a return type, you write the throwskeyword before the return arrow (-&gt;).
å‡½æ•°ï¼Œæ–¹æ³•æˆ–æ„é€ å™¨éƒ½å¯ä»¥æŠ›å‡ºå¼‚å¸¸ï¼Œåªéœ€è¦åœ¨å£°æ˜å®ƒä»¬æ—¶æ·»åŠ å…³é”®å­—ï¼š<code>throws</code>å³å¯ï¼Œè¿™ç§æ–¹æ³•è¢«ç§°ä¸º<code>throws</code>å‡½æ•°ï¼Œ<code>throws</code>å…³é”®å­—ä½ç½®åœ¨å‚æ•°ä¹‹åï¼Œè¿”å›å€¼(-&gt;)ä¹‹å‰</p>

<p>A throwing function propagates errors that are thrown inside of it to the scope from which itâ€™s called.
æŠ›å‡ºå‡½æ•°ä¼šæŠŠé”™è¯¯æŠ›ç»™è°ƒç”¨å®ƒçš„å‡½æ•°å‘¨æœŸä¸­å»ã€‚</p>

<p>Only throwing functions can propagate errors. Any errors thrown inside a nonthrowing function must be handled inside the function.
åªæœ‰æŠ›å‡ºå‡½æ•°èƒ½ä¼ é€’é”™è¯¯ï¼Œå¦‚æœä¸æ˜¯æŠ›å‡ºå‡½æ•°ï¼Œå®ƒè‡ªå·±å¿…é¡»å¤„ç†æ‰ä»»ä½•æŠ›è¿›æ¥çš„é”™è¯¯ã€‚</p>

<p>In the example below, the VendingMachine class has a <code>vend(itemNamed:)</code> method that throws an appropriate VendingMachineError if the requested item is not available, is out of stock, or has a cost that exceeds the current deposited amount:
åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œå¯¹æŸä¸ªè¯·æ±‚å†…å®¹ä¸å¯ç”¨æ—¶ï¼Œè‡ªåŠ¨å”®è´§æœºä¼šé€šè¿‡<code>vend(itemNamed:)</code>æ–¹æ³•æŠ›å‡ºä¸€ä¸ªå¯¹åº”çš„<code>VendingMachineError</code>é”™è¯¯ï¼Œç¼ºè´§æˆ–è¶…è¿‡ç›®å‰çš„å­˜æ¬¾é‡‘é¢æˆæœ¬ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-swift" data-lang="swift"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-swift" data-lang="swift"><span class="kd">struct</span> <span class="nc">Item</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nv">price</span><span class="p">:</span> <span class="nb">Int</span>
    <span class="kd">var</span> <span class="nv">count</span><span class="p">:</span> <span class="nb">Int</span>
<span class="p">}</span>
<span class="kd">class</span> <span class="nc">VendingMachine</span>
<span class="p">{</span>
    <span class="kd">var</span> <span class="nv">inventory</span> <span class="p">=</span> <span class="p">[</span>
        <span class="s">&#34;Candy Bar&#34;</span><span class="p">:</span> <span class="n">Item</span><span class="p">(</span><span class="n">price</span><span class="p">:</span> <span class="mi">12</span><span class="p">,</span> <span class="bp">count</span><span class="p">:</span> <span class="mi">7</span><span class="p">),</span>
        <span class="s">&#34;Chips&#34;</span><span class="p">:</span> <span class="n">Item</span><span class="p">(</span><span class="n">price</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="bp">count</span><span class="p">:</span> <span class="mi">4</span><span class="p">),</span>
        <span class="s">&#34;Pretzels&#34;</span><span class="p">:</span> <span class="n">Item</span><span class="p">(</span><span class="n">price</span><span class="p">:</span> <span class="mi">7</span><span class="p">,</span> <span class="bp">count</span><span class="p">:</span> <span class="mi">11</span><span class="p">)</span>
    <span class="p">]</span>
    <span class="kd">var</span> <span class="nv">coinsDeposited</span> <span class="p">=</span> <span class="mi">0</span>
    <span class="kd">func</span> <span class="nf">vend</span><span class="p">(</span><span class="n">itemNamed</span> <span class="n">name</span><span class="p">:</span> <span class="nb">String</span><span class="p">)</span> <span class="kr">throws</span> 
    <span class="p">{</span>
        <span class="k">guard</span> <span class="kd">let</span> <span class="nv">item</span> <span class="p">=</span> <span class="n">inventory</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="k">else</span> <span class="p">{</span>
            <span class="k">throw</span> <span class="n">VendingMachineError</span><span class="p">.</span><span class="n">invalidSelection</span>
        <span class="p">}</span>
        <span class="k">guard</span> <span class="n">item</span><span class="p">.</span><span class="bp">count</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="p">{</span>
            <span class="k">throw</span> <span class="n">VendingMachineError</span><span class="p">.</span><span class="n">outOfStock</span>
        <span class="p">}</span>
        <span class="k">guard</span> <span class="n">item</span><span class="p">.</span><span class="n">price</span> <span class="o">&lt;=</span> <span class="n">coinsDeposited</span> <span class="k">else</span> <span class="p">{</span>
            <span class="k">throw</span> <span class="n">VendingMachineError</span><span class="p">.</span><span class="n">insufficientFunds</span><span class="p">(</span><span class="n">coinsNeeded</span><span class="p">:</span> <span class="n">item</span><span class="p">.</span><span class="n">price</span> <span class="o">-</span> <span class="n">coinsDeposited</span><span class="p">)</span>
        <span class="p">}</span>
        <span class="n">coinsDeposited</span> <span class="o">-=</span> <span class="n">item</span><span class="p">.</span><span class="n">price</span>
        <span class="kd">var</span> <span class="nv">newItem</span> <span class="p">=</span> <span class="n">item</span>
        <span class="n">newItem</span><span class="p">.</span><span class="bp">count</span> <span class="o">-=</span> <span class="mi">1</span>
        <span class="n">inventory</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="p">=</span> <span class="n">newItem</span>
        <span class="bp">print</span><span class="p">(</span><span class="s">&#34;Dispensing </span><span class="si">\(</span><span class="n">name</span><span class="si">)</span><span class="s">&#34;</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre></td></tr></table>
</div>
</div>
<p>The implementation of the <code>vend(itemNamed:)</code> method uses guard statements to exit the method early and throw appropriate errors if any of the requirements for purchasing a snack arenâ€™t met. Because a throw statement immediately transfers program control, an item will be vended only if all of these requirements are met.
<code>vend(itemNamed:)</code>æ–¹æ³•çš„å®ç°ä¸­ä½¿ç”¨ <code>guardè¯­å¥</code>æ¥åˆ¤æ–­ï¼Œå½“åœ¨è´­ä¹°æ“ä½œä¸ç¬¦åˆç›¸åº”æ¡ä»¶ä¼šç›´æ¥æŠ›å‡ºç›¸åº”çš„é”™è¯¯ï¼Œæ¥æ‰“æ–­è¯¥æ–¹æ³•çš„å…¶ä»–æ“ä½œã€‚å› ä¸º<code>throwè¯­å¥</code>ä¼šç«‹å³è½¬ç§»ç¨‹åºæ§åˆ¶æƒï¼Œä¿è¯äº†æœºå™¨ä»…å‡ºå”®æ»¡è¶³æ‰€æœ‰æ¡ä»¶çš„ç‰©å“ã€‚</p>

<p>Because the <code>vend(itemNamed:)</code> method propagates any errors it throws, any code that calls this method must either handle the errorsâ€”using a <code>do-catch</code> statement, <code>try?</code>, or <code>try!</code>â€”or continue to propagate them. For example, the <code>buyFavoriteSnack(person:vendingMachine:)</code> in the example below is also a throwing function, and any errors that the <code>vend(itemNamed:)</code> method throws will propagate up to the point where the <code>buyFavoriteSnack(person:vendingMachine:)</code>function is called.
å› ä¸ºvend(itemNamed:)çš„æ–¹æ³•æŠ›å‡ºæ‰€æœ‰é”™è¯¯ï¼Œæ‰€ä»¥è°ƒç”¨è¯¥æ–¹æ³•çš„å‡½æ•°å¿…é¡»å¤„ç†é”™è¯¯ï¼ˆ <code>do-catch, try?, or try!</code>å¤„ç†ï¼Œæˆ–ä½¿ç”¨<code>try</code>å‘ä¸ŠæŠ›å‡ºï¼‰ã€‚</p>

<p>ä¾‹å¦‚ï¼Œ<code>buyFavoriteSnack(person:vendingMachine:)</code>ä¹Ÿæ˜¯ä¸€ä¸ªæŠ›å‡ºå‡½æ•°ï¼Œä»<code>vend(itemNamed:)</code>æ–¹æ³•æ¥å—åˆ°çš„æ‰€æœ‰é”™è¯¯ï¼Œéƒ½ä¼šè¢«ä¼š<code>buyFavoriteSnack(person:vendingMachine:)</code>ç»§ç»­æŠ›ç»™è°ƒç”¨å®ƒçš„å‡½æ•°ä¸­ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-swift" data-lang="swift"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-swift" data-lang="swift"><span class="kd">let</span> <span class="nv">favoriteSnacks</span> <span class="p">=</span> <span class="p">[</span>
    <span class="s">&#34;Alice&#34;</span><span class="p">:</span> <span class="s">&#34;Chips&#34;</span><span class="p">,</span>
    <span class="s">&#34;Bob&#34;</span><span class="p">:</span> <span class="s">&#34;Licorice&#34;</span><span class="p">,</span>
    <span class="s">&#34;Eve&#34;</span><span class="p">:</span> <span class="s">&#34;Pretzels&#34;</span><span class="p">,</span>
<span class="p">]</span>
<span class="kd">func</span> <span class="nf">buyFavoriteSnack</span><span class="p">(</span><span class="n">person</span><span class="p">:</span> <span class="nb">String</span><span class="p">,</span> <span class="n">vendingMachine</span><span class="p">:</span> <span class="n">VendingMachine</span><span class="p">)</span> <span class="kr">throws</span> 
<span class="p">{</span>
    <span class="kd">let</span> <span class="nv">snackName</span> <span class="p">=</span> <span class="n">favoriteSnacks</span><span class="p">[</span><span class="n">person</span><span class="p">]</span> <span class="p">??</span> <span class="s">&#34;Candy Bar&#34;</span>
    <span class="k">try</span> <span class="n">vendingMachine</span><span class="p">.</span><span class="n">vend</span><span class="p">(</span><span class="n">itemNamed</span><span class="p">:</span> <span class="n">snackName</span><span class="p">)</span>
<span class="p">}</span></code></pre></td></tr></table>
</div>
</div>
<p>In this example, the <code>buyFavoriteSnack(person: vendingMachine:)</code> function looks up a given personâ€™s favorite snack and tries to buy it for them by calling the <code>vend(itemNamed:)</code> method. Because the <code>vend(itemNamed:)</code> method can throw an error, itâ€™s called with the trykeyword in front of it.
<code>buyFavoriteSnack(person: vendingMachine:)</code> å‡½æ•°æŸ¥æ‰¾ä¹°å®¶ä¸­æ„çš„snakeï¼Œå¹¶<code>vend(itemNamed:)</code>è°ƒç”¨å°è¯•è´­ä¹°ã€‚ä½¿ç”¨åœ¨æ–¹æ³•å‰ä½¿ç”¨<code>try</code>å…³é”®å­—æ¥æŠ›å‡ºå¼‚å¸¸ï¼Œå¹¶å‘ä¸Šä¼ é€’ã€‚</p>

<p>Throwing initializers can propagate errors in the same way as throwing functions. For example, the initializer for the <code>PurchasedSnackstructure</code> in the listing below calls a throwing function as part of the initialization process, and it handles any errors that it encounters by propagating them to its caller.
æŠ›å‡ºæ„é€ å™¨ä¹Ÿèƒ½å‘æŠ›å‡ºå‡½æ•°ä¸€æ ·ä¼ é€’é”™è¯¯ï¼Œä¾‹å¦‚ï¼š<code>PurchasedSnackstructure</code>çš„æ„é€ å™¨ä¸­è°ƒç”¨äº†æŠ›å‡ºå‡½æ•°ï¼š<code>vend(itemNamed:)</code>ï¼ŒæŠ›å‡ºæ„é€ å™¨å¯ä»¥é€šè¿‡å‘ä¸Šä¼ é€’æ¥å¤„ç†è¿™äº›é”™è¯¯ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-swift" data-lang="swift"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-swift" data-lang="swift"><span class="kd">struct</span> <span class="nc">PurchasedSnack</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nv">name</span><span class="p">:</span> <span class="nb">String</span>
    <span class="kd">init</span><span class="p">(</span><span class="n">name</span><span class="p">:</span> <span class="nb">String</span><span class="p">,</span> <span class="n">vendingMachine</span><span class="p">:</span> <span class="n">VendingMachine</span><span class="p">)</span> <span class="kr">throws</span> 
    <span class="p">{</span>
        <span class="k">try</span> <span class="n">vendingMachine</span><span class="p">.</span><span class="n">vend</span><span class="p">(</span><span class="n">itemNamed</span><span class="p">:</span> <span class="n">name</span><span class="p">)</span>
        <span class="kc">self</span><span class="p">.</span><span class="n">name</span> <span class="p">=</span> <span class="n">name</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre></td></tr></table>
</div>
</div>
<h2 id="handling-errors-using-do-catch">Handling Errors Using Do-Catch</h2>

<p>You use a do-catch statement to handle errors by running a block of code. If an error is thrown by the code in the <code>do</code> clause, it is matched against the <code>catch</code>clauses to determine which one of them can handle the error.
ä½¿ç”¨<code>do-catch</code>è¯­å¥é€šè¿‡è¿è¡Œä»£ç å—æ¥å¤„ç†é”™è¯¯ã€‚åœ¨<code>do</code>åˆ†å¥ä¸­å¦‚æœæŠ›å‡ºäº†ä¸€ä¸ªé”™è¯¯ï¼Œé‚£ä¹ˆå°±å¯ä»¥åœ¨<code>catch</code>åˆ†å¥ä¸­è¿›è¡Œå¤„ç†çš„åŒ¹é…åˆ°é”™è¯¯
Here is the general form of a <code>do-catch</code>statement:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-swift" data-lang="swift"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-swift" data-lang="swift"><span class="k">do</span> <span class="p">{</span>
    <span class="k">try</span> <span class="n">expression</span>
    <span class="n">statements</span>
<span class="p">}</span> <span class="k">catch</span> <span class="n">pattern</span> <span class="mi">1</span> <span class="p">{</span>
    <span class="n">statements</span>
<span class="p">}</span> <span class="k">catch</span> <span class="n">pattern</span> <span class="mi">2</span> <span class="k">where</span> <span class="n">condition</span> <span class="p">{</span>
    <span class="n">statements</span>
<span class="p">}</span></code></pre></td></tr></table>
</div>
</div>
<p>You write a pattern after catch to indicate what errors that clause can handle. If a <code>catch</code> clause doesnâ€™t have a pattern, the clause matches any <code>error</code> and binds the <code>error</code> to a local constant named error. For more information about pattern matching, see Patterns.
åœ¨å…³é”®å­—catchåè¾¹è·ŸéšåŒ¹é…æ¨¡å¼ï¼Œè¿™ä¸ª<code>catchåˆ†å¥</code>å°±ä¼šå¤„ç†åŒ¹é…åˆ°çš„é”™è¯¯ï¼Œå¦‚æœå…³é”®å­—<code>catchåˆ†å¥</code>æ²¡æœ‰ä»»ä½•åŒ¹é…æ¨¡å¼ï¼Œé‚£ä¹ˆè¿™ä¸ªåˆ†å¥å°†ä¼šåŒ¹é…åˆ°æ‰€æœ‰é”™è¯¯ï¼Œå¹¶æŠŠè¿™äº›é”™è¯¯ä¿¡æ¯èµ‹å€¼ç»™ç³»ç»Ÿå¸¸é‡<code>error</code>ã€‚</p>

<p>The <code>catch</code>clauses donâ€™t have to handle every possible error that the code in its <code>do</code> clause can throw. If none of the catch clauses handle the error, the error propagates to the surrounding scope. However, the error must be handled by some surrounding scopeâ€”either by an enclosing <code>do-catch</code> clause that handles the error or by being inside a throwing function. For example, the following code handles all three cases of the <code>VendingMachineError</code>enumeration, but all other errors have to be handled by its surrounding scope:
<code>catchåˆ†å¥</code>ä¸å¿…å¯¹<code>doåˆ†å¥</code>ä¸­çš„ä»£ç å¯èƒ½æŠ›å‡ºæ¯ä¸€ä¸ªçš„é”™è¯¯ï¼Œå¦‚æœæŸä¸ªé”™è¯¯æ²¡æœ‰è¢«<code>catchåˆ†å¥</code>åŒ¹é…åˆ°å¤„ç†ï¼Œè¿™ä¸ªé”™è¯¯å°†ä¼šä¼ é€’åˆ°è°ƒç”¨å®ƒçš„å‡½æ•°å‘¨æœŸä¸­ï¼Œè¿™ä¸ªé”™è¯¯å¿…é¡»åœ¨è¿™ä¸ªå‡½æ•°å‘¨æœŸä¸­å¤„ç†ï¼Œæˆ–é€šè¿‡<code>do-catchè¯­å¥</code>æ¥å¤„ç†ï¼Œæˆ–é€šè¿‡å†…éƒ¨çš„æŠ›å‡ºå‡½æ•°å¤„ç†ã€‚</p>

<p>ä¾‹å¦‚ï¼Œä¸‹é¢çš„ä»£ç å¤„ç†<code>VendingMachineError</code>æšä¸¾ç±»ä¸­çš„ä¸‰ä¸ªé”™è¯¯<code>cases</code>ï¼Œä½†å…¶ä»–çš„é”™è¯¯éƒ½æ˜¯ç”±å…¶å‘¨è¾¹èŒƒå›´å¤„ç†ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-swift" data-lang="swift"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-swift" data-lang="swift"><span class="kd">var</span> <span class="nv">vendingMachine</span> <span class="p">=</span> <span class="n">VendingMachine</span><span class="p">()</span>
<span class="n">vendingMachine</span><span class="p">.</span><span class="n">coinsDeposited</span> <span class="p">=</span> <span class="mi">8</span>
<span class="k">do</span> <span class="p">{</span>
    <span class="k">try</span> <span class="n">buyFavoriteSnack</span><span class="p">(</span><span class="n">person</span><span class="p">:</span> <span class="s">&#34;Alice&#34;</span><span class="p">,</span> <span class="n">vendingMachine</span><span class="p">:</span> <span class="n">vendingMachine</span><span class="p">)</span>
<span class="p">}</span> <span class="k">catch</span> <span class="n">VendingMachineError</span><span class="p">.</span><span class="n">invalidSelection</span> <span class="p">{</span>
    <span class="bp">print</span><span class="p">(</span><span class="s">&#34;Invalid Selection.&#34;</span><span class="p">)</span>
<span class="p">}</span> <span class="k">catch</span> <span class="n">VendingMachineError</span><span class="p">.</span><span class="n">outOfStock</span> <span class="p">{</span>
    <span class="bp">print</span><span class="p">(</span><span class="s">&#34;Out of Stock.&#34;</span><span class="p">)</span>
<span class="p">}</span> <span class="k">catch</span> <span class="n">VendingMachineError</span><span class="p">.</span><span class="n">insufficientFunds</span><span class="p">(</span><span class="kd">let</span> <span class="nv">coinsNeeded</span><span class="p">)</span> <span class="p">{</span>
    <span class="bp">print</span><span class="p">(</span><span class="s">&#34;Insufficient funds. Please insert an additional </span><span class="si">\(</span><span class="n">coinsNeeded</span><span class="si">)</span><span class="s"> coins.&#34;</span><span class="p">)</span>
<span class="p">}</span>
<span class="c1">// Prints &#34;Insufficient funds. Please insert an additional 2 coins.&#34;</span></code></pre></td></tr></table>
</div>
</div>
<p>In the above example, the <code>buyFavoriteSnack(person:vendingMachine:)</code> function is called in a try expression, because it can throw an error. If an error is thrown, execution immediately transfers to the <code>catch</code> clauses, which decide whether to allow propagation to continue. If no error is thrown, the remaining statements in the do statement are executed.
åœ¨ä¸Šè¿°ä»£ç ä¸­å› ä¸º<code>buyFavoriteSnack(person:vendingMachine:)</code>å‡½æ•°ä¼šæŠ›å‡ºé”™è¯¯å¼‚å¸¸ï¼Œæ‰€ä»¥è¦åœ¨tryè¡¨è¾¾å¼ä¸­è°ƒç”¨ã€‚å¦‚æœæŠ›å‡ºå¼‚å¸¸å°±ä¼šç«‹é©¬æ‰§è¡Œæ˜¯å¦ç»§ç»­ä¼ é€’çš„catchåˆ†å¥ï¼Œå¦‚æœæ²¡æœ‰æŠ›å‡ºå¼‚å¸¸ï¼Œä¼šä¿æŒdoåˆ†å¥ä¸­çš„ä»£ç æ­£å¸¸è¿›è¡Œã€‚</p>

<h2 id="converting-errors-to-optional-values">Converting Errors to Optional Values</h2>

<p>You use try? to handle an error by converting it to an optional value. If an error is thrown while evaluating the <code>try?</code> expression, the value of the expression is nil. For example, in the following code x and y have the same value and behavior:
ä½¿ç”¨<code>try?è¡¨è¾¾å¼</code>å¤„ç†é”™è¯¯ï¼Œæ˜¯é€šè¿‡æŠŠé”™è¯¯è½¬æ¢ä¸º<code>å¯é€‰å€¼(?)ç±»å‹</code>å¤„ç†ã€‚åœ¨<code>try?</code>è¡¨è¾¾å¼ä¸­å‡ºç°æŠ›å‡ºé”™è¯¯æ—¶ï¼Œè¿™ä¸ªè¡¨è¾¾å¼çš„å€¼<code>=nil</code>ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-swift" data-lang="swift"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-swift" data-lang="swift"><span class="kd">func</span> <span class="nf">someThrowingFunction</span><span class="p">()</span> <span class="kr">throws</span> <span class="p">-&gt;</span> <span class="nb">Int</span> <span class="p">{</span>
    <span class="c1">// ...</span>
<span class="p">}</span>
<span class="kd">let</span> <span class="nv">x</span> <span class="p">=</span> <span class="k">try</span><span class="p">?</span> <span class="n">someThrowingFunction</span><span class="p">()</span>
<span class="kd">let</span> <span class="nv">y</span><span class="p">:</span> <span class="nb">Int</span><span class="p">?</span>
<span class="k">do</span> <span class="p">{</span>
    <span class="n">y</span> <span class="p">=</span> <span class="k">try</span> <span class="n">someThrowingFunction</span><span class="p">()</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">{</span>
    <span class="n">y</span> <span class="p">=</span> <span class="kc">nil</span>
<span class="p">}</span></code></pre></td></tr></table>
</div>
</div>
<p>If someThrowingFunction() throws an error, the value of x and y is nil. Otherwise, the value of x and y is the value that the function returned. Note that x and y are an optional of whatever type someThrowingFunction() returns. Here the function returns an integer, so xand y are optional integers.
å¦‚æœå‡½æ•°<code>someThrowingFunction()</code>æŠ›å‡ºå¼‚å¸¸ï¼Œ<code>x,y = nil</code>ï¼Œå¦åˆ™:<code>x,y</code>å°±æ—¶å‡½æ•°<code>return</code>çš„å€¼ã€‚
&gt; æ³¨æ„ï¼š<code>x,y</code>æ˜¯ä¸€ä¸ªå¯é€‰çš„someThrowingFunction()è¿”å›ç±»å‹ã€‚åœ¨è¿™é‡Œå‡½æ•°è¿”å›integerï¼Œé‚£ä¹ˆx,yæ˜¯å¯é€‰çš„integerç±»å‹ã€‚</p>

<p>Using <code>try?</code> lets you write concise error handling code when you want to handle all errors in the same way. For example, the following code uses several approaches to fetch data, or returns nil if all of the approaches fail.
å½“ç”¨è¿™ç§æ–¹å¼æ¥å¤„ç†æ‰€æœ‰é”™è¯¯æ—¶ï¼Œä½¿ç”¨<code>try?</code>è¡¨è¾¾å¼èƒ½å†™æ›´ç®€æ´çš„é”™è¯¯å¤„ç†ä»£ç ï¼Œä¾‹å¦‚ï¼šä¸‹é¢çš„ä»£ç ä½¿ç”¨å‡ ç§æ–¹æ³•æ¥è·å–æ•°æ®ï¼Œå¦‚æœè¿™äº›æ–¹æ³•å¤±è´¥å°±ä¼šè¿”å›nilã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-swift" data-lang="swift"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-swift" data-lang="swift"><span class="kd">func</span> <span class="nf">fetchData</span><span class="p">()</span> <span class="p">-&gt;</span> <span class="n">Data</span><span class="p">?</span> <span class="p">{</span>
<span class="k">if</span> <span class="kd">let</span> <span class="nv">data</span> <span class="p">=</span> <span class="k">try</span><span class="p">?</span> <span class="n">fetchDataFromDisk</span><span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="n">data</span> <span class="p">}</span>
<span class="k">if</span> <span class="kd">let</span> <span class="nv">data</span> <span class="p">=</span> <span class="k">try</span><span class="p">?</span> <span class="n">fetchDataFromServer</span><span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="n">data</span> <span class="p">}</span>
<span class="k">return</span> <span class="kc">nil</span>
<span class="p">}</span></code></pre></td></tr></table>
</div>
</div>
<h2 id="disabling-error-propagation">Disabling Error Propagation</h2>

<p>Sometimes you know a throwing function or method wonâ€™t, in fact, throw an error at runtime. On those occasions, you can write <code>try!</code> before the expression to disable error propagation and wrap the call in a runtime assertion that no error will be thrown. If an error actually is thrown, youâ€™ll get a runtime error.
æœ‰æ—¶ä½ è®¤ä¸ºä¸ä¼šå‡ºç°å¼‚å¸¸çš„æŠ›å‡ºå‡½æ•°æˆ–æ–¹æ³•ï¼Œä½†äº‹å®ä¸Šï¼Œå´åœ¨è¿è¡Œæ—¶æŠ›å‡ºå¼‚å¸¸äº†ã€‚åœ¨å…¶ä»–æƒ…å†µä¸‹ï¼Œå¯ä»¥ä½¿ç”¨<code>try!</code>è¡¨è¾¾å¼æ¥ç¦æ­¢é”™è¯¯ä¼ é€’ï¼Œå¹¶ä¸”ååˆ†è‚¯å®šæ–­è¨€åœ¨è¿è¡Œæ—¶ä¸ä¼šæœ‰å¼‚å¸¸æŠ›å‡ºã€‚å¦‚æœæœ‰å¼‚å¸¸æŠ›å‡ºï¼Œå°±ä¼šå¾—åˆ°ä¸€ä¸ªè¿è¡Œæ—¶é”™è¯¯ã€‚</p>

<p>For example, the following code uses a <code>loadImage(atPath:)</code> function, which loads the image resource at a given path or throws an error if the image canâ€™t be loaded. In this case, because the image is shipped with the application, no error will be thrown at runtime, so it is appropriate to disable error propagation.
ä¾‹å¦‚ï¼šä½¿ç”¨<code>loadImage(atPath:)</code>å‡½æ•°è¦ä¹ˆé€šè¿‡è¿™ä¸ªè·¯å¾„åŠ è½½imageï¼Œè¦ä¹ˆimageåŠ è½½å¤±è´¥æŠ›å‡ºä¸€ä¸ªé”™è¯¯ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå› ä¸º<code>image</code>åœ¨appèµ„æºç›®å½•<code>resources</code>ä¸­ï¼Œæ‰€ä»¥åœ¨è¿è¡Œæ—¶è‚¯å®šä¸ä¼šæœ‰å¼‚å¸¸æŠ›å‡ºã€‚å› æ­¤å¯ä»¥ä½¿ç”¨<code>try!</code>ç¦æ­¢é”™è¯¯ä¼ é€’ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-swift" data-lang="swift"><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-swift" data-lang="swift"><span class="kd">let</span> <span class="nv">photo</span> <span class="p">=</span> <span class="k">try</span><span class="p">!</span> <span class="n">loadImage</span><span class="p">(</span><span class="n">atPath</span><span class="p">:</span> <span class="s">&#34;./Resources/John Appleseed.jpg&#34;</span><span class="p">)</span></code></pre></td></tr></table>
</div>
</div>
<h2 id="specifying-cleanup-actions">Specifying Cleanup Actions</h2>

<p>You use a defer statement to execute a set of statements just before code execution leaves the current block of code. This statement lets you do any necessary cleanup that should be performed regardless of how execution leaves the current block of codeâ€”whether it leaves because an error was thrown or because of a statement such as return or break. For example, you can use a defer statement to ensure that file descriptors are closed and manually allocated memory is freed.
åœ¨ä»£ç æ‰§è¡Œç¦»å¼€å½“å‰ä»£ç å—ä¹‹å‰ï¼Œä½¿ç”¨ä¸€ä¸ªâ€œdeferè¯­å¥â€æ¥æ‰§è¡Œä¸€ç»„è¯­å¥ã€‚deferè¯­å¥è®©åšä¸€äº›å¿…è¦çš„æ¸…ç†æ“ä½œï¼Œåœ¨æ‰§è¡Œå¦‚ä½•ç¦»å¼€å½“å‰ä»£ç å—ï¼šå› ä¸ºæŠ›å‡ºå¼‚å¸¸æˆ–è€…å› ä¸º<code>returnï¼Œbreakè¯­å¥</code>å¯¼è‡´ã€‚ä¾‹å¦‚ï¼šä½¿ç”¨<code>deferè¯­å¥</code>æ‰§è¡Œå…³é—­æ–‡ä»¶å’Œå†…å­˜çš„é‡Šæ”¾æ“ä½œï¼Œæ¥ç¡®ä¿æ¸…ç†æ“ä½œå®Œæˆã€‚</p>

<p>A defer statement defers execution until the current scope is exited. This statement consists of the defer keyword and the statements to be executed later. The deferred statements may not contain any code that would transfer control out of the statements, such as a break or a return statement, or by throwing an error. Deferred actions are executed in reverse order of how they are specifiedâ€”that is, the code in the first defer statement executes after code in the second, and so on.
<code>deferè¯­å¥</code>æ¨è¿Ÿåœ¨ç›´åˆ°å½“å‰ä½œç”¨åŸŸæ¨å‡ºæ—¶ï¼Œå†æ‰§è¡Œã€‚<code>deferè¯­å¥</code>ç”±<code>defer</code>å…³é”®å­—å’Œä¸€äº›æ¸…ç†æ“ä½œè¯­å¥ç»„æˆã€‚<code>deferè¯­å¥</code>ä¸åŒ…å«transfer control out of the statementsä¾‹å¦‚<code>ï¼ˆreturnï¼Œbreakï¼Œthrowï¼‰</code>ç­‰ã€‚</p>

<p><code>defer</code>å»¶è¿Ÿæ“ä½œæ˜¯æŒ‰ç…§æŒ‡å®šçš„é¡ºåºæ‰§è¡Œçš„ï¼Œå°±æ˜¯å…ˆæ‰§è¡Œæœ€åä¸€ä¸ª<code>deferè¯­å¥</code>ä¸­çš„ä»£ç ä¹‹åï¼Œå†æ‰§è¡Œç¬¬å€’æ•°ç¬¬äºŒä¸ª<code>deferè¯­å¥</code>çš„ä»£ç ï¼Œä»¥æ­¤ç±»æ¨ï¼Œå€’å™æ¸…ç†é€€åœºã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-swift" data-lang="swift"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-swift" data-lang="swift"><span class="kd">func</span> <span class="nf">processFile</span><span class="p">(</span><span class="n">filename</span><span class="p">:</span> <span class="nb">String</span><span class="p">)</span> <span class="kr">throws</span> <span class="p">{</span>
    <span class="k">if</span> <span class="n">exists</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">let</span> <span class="nv">file</span> <span class="p">=</span> <span class="n">open</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
        <span class="k">defer</span> <span class="p">{</span>
            <span class="n">close</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>
        <span class="p">}</span>
        <span class="k">while</span> <span class="kd">let</span> <span class="nv">line</span> <span class="p">=</span> <span class="k">try</span> <span class="n">file</span><span class="p">.</span><span class="n">readline</span><span class="p">()</span> 
        <span class="p">{</span>
            <span class="c1">// Work with the file.</span>
        <span class="p">}</span>
            <span class="c1">// close(file) is called here, at the end of the scope.</span>
        <span class="p">}</span>
<span class="p">}</span></code></pre></td></tr></table>
</div>
</div>
<p>The above example uses a defer statement to ensure that the <code>open(_:)</code> function has a corresponding call to <code>close(_:)</code>.
ä½¿ç”¨deferè¯­å¥ï¼Œç¡®ä¿äº†åœ¨opençš„åŒæ—¶ä¸ä¹‹ç›¸å…³çš„è¿˜æœ‰closeã€‚</p>

<p>You can use a defer statement even when no error handling code is involved.
å³ä½¿åœ¨æ²¡æœ‰æ¶‰åŠé”™è¯¯å¤„ç†ä»£ç çš„æ—¶å€™ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨â€œå»¶è¿Ÿâ€è¯­å¥ã€‚</p>
    </div>

    <div class="post-copyright">
  <p class="copyright-item">
    <span class="item-title">æ–‡ç« ä½œè€…</span>
    <span class="item-content">iTBoyer</span>
  </p>
  <p class="copyright-item">
    <span class="item-title">ä¸Šæ¬¡æ›´æ–°</span>
    <span class="item-content">
        2019-08-08
        <a href="iEmacsd/commit/ccacacd56ce82e709b32bc57ad0c707301dbd1e0" title="è¿ç§»mdæ–‡æ¡£">(ccacacd)</a>
    </span>
  </p>
  
  
</div>
<div class="post-reward">
  <input type="checkbox" name="reward" id="reward" hidden />
  <label class="reward-button" for="reward">èµèµæ”¯æŒ</label>
  <div class="qr-code">
    
    <label class="qr-code-image" for="reward">
        <img class="image" src="/path/to/your/wechat-qr-code.png">
        <span>å¾®ä¿¡æ‰“èµ</span>
      </label>
    <label class="qr-code-image" for="reward">
        <img class="image" src="/path/to/your/alipay-qr-code.png">
        <span>æ”¯ä»˜å®æ‰“èµ</span>
      </label>
  </div>
</div><footer class="post-footer">
      <div class="post-tags">
          <a href="/tags/%E5%AE%89%E5%85%A8/">å®‰å…¨</a>
          </div>
      <nav class="post-nav">
        <a class="prev" href="/post/git/%E8%BF%81%E7%A7%BBsvn%E5%BA%93%E5%88%B0git%E5%BA%93%E4%BF%9D%E7%95%99branchs%E5%92%8Ctags/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">è¿ç§»SVNåº“åˆ°gitåº“ä¿ç•™branchså’Œtags</span>
            <span class="prev-text nav-mobile">ä¸Šä¸€ç¯‡</span>
          </a>
        <a class="next" href="/post/ios/%E5%9C%A8oc%E5%92%8Cswift%E4%B8%AD%E5%8C%BA%E5%88%86%E5%A4%9A%E4%B8%AAtargets/">
            <span class="next-text nav-default">åœ¨OCå’Œswiftä¸­åŒºåˆ†å¤šä¸ªtargets</span>
            <span class="next-text nav-mobile">ä¸‹ä¸€ç¯‡</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        <div id="comments-gitment"></div>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/theme-next/theme-next-gitment@1/default.min.css" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/gh/theme-next/theme-next-gitment@1/gitment.browser.min.js" crossorigin="anonymous"></script>
    <script type="text/javascript">
      var gitment = new Gitment({
        id: '2017-01-11 17:04:21 \x2b0000 UTC',
        title: 'swifté”™è¯¯å¤„ç†',
        link: decodeURI(location.href),
        desc: '\x3cp\x3eError handling is the process of responding to and recovering from error conditions in your program. Swift provides first-class support for throwing, catching, propagating, and manipulating recoverable errors at runtime.\nSome operations arenâ€™t guaranteed to always complete execution or produce a useful output. Optionals are used to represent the absence of a value, but when an operation fails, itâ€™s often useful to understand what caused the failure, so that your code can respond accordingly.\nAs an example, consider the task of reading and processing data from a file on disk. There are a number of ways this task can fail, including the file not existing at the specified path, the file not having read permissions, or the file not being encoded in a compatible format. Distinguishing among these different situations allows a program to resolve some errors and to communicate to the user any errors it canâ€™t resolve.\nä¸¾ä¾‹ï¼Œåœ¨è¯»å–å’Œå¤„ç†ç£ç›˜ä¸Šçš„ä¸€ä¸ªæ–‡ä»¶çš„æ•°æ®æ—¶ï¼Œä¼šæœ‰æœ‰è®¸å¤šæ–¹æ³•å¤±è´¥ï¼ŒåŒ…æ‹¬æŒ‡å®šçš„æ–‡ä»¶è·¯å¾„æ‰¾ä¸åˆ°ï¼Œæ²¡æœ‰æ–‡ä»¶çš„è¯»å–æƒé™ï¼Œæˆ–æ–‡ä»¶ç¼–ç æ ¼å¼ä¸å…¼å®¹ã€‚åœ¨è¿™äº›ä¸åŒæƒ…å†µä¸‹ï¼Œå°±å¯ä»¥è®©ç¨‹åºæç¤ºç”¨æˆ·å¯¼è‡´ç¨‹åºæ— æ³•æ‰§è¡Œçš„å…·ä½“åŸå› ã€‚\x3c\/p\x3e\n\n\x3ch1 id=\x22representing-and-throwing-errors\x22\x3eRepresenting and Throwing Errors\x3c\/h1\x3e\n\n\x3cp\x3eIn Swift, errors are represented by values of types that conform to the Error protocol. This empty protocol indicates that a type can be used for error handling.\nåœ¨swiftä¸­ï¼Œé”™è¯¯ç±»å‹æ˜¯éµå¾ªError åè®®ã€‚\x3c\/p\x3e\n\n\x3cp\x3eSwift enumerations are particularly well suited to modeling a group of related error conditions, with associated values allowing for additional information about the nature of an error to be communicated. For example, hereâ€™s how you might represent the error conditions of operating a vending machine inside a game:\nswiftæšä¸¾ç±»å‹ç‰¹åˆ«é€‚åˆä¸ºä¸€ç»„é”™è¯¯æ¡ä»¶å»ºæ¨¡ï¼Œç”¨æ¥å…³è”å¯¼è‡´é”™è¯¯çš„çœŸæ­£åŸå› çš„ç›¸å…³ä¿¡æ¯ã€‚ä¾‹å¦‚ï¼š\nä¸€ä¸ªåœ¨æ“ä½œä¸€å°æ¸¸æˆæœºæ—¶çš„ä¼šå‡ºç°çš„é”™è¯¯æšä¸¾ç±»ï¼š\x3c\/p\x3e\n\x3cdiv class=\x22highlight\x22\x3e\x3cdiv class=\x22chroma\x22\x3e\n\x3ctable class=\x22lntable\x22\x3e\x3ctr\x3e\x3ctd class=\x22lntd\x22\x3e\n\x3cpre class=\x22chroma\x22\x3e\x3ccode class=\x22language-swift\x22 data-lang=\x22swift\x22\x3e\x3cspan class=\x22lnt\x22\x3e1\n\x3c\/span\x3e\x3cspan class=\x22lnt\x22\x3e2\n\x3c\/span\x3e\x3cspan class=\x22lnt\x22\x3e3\n\x3c\/span\x3e\x3cspan class=\x22lnt\x22\x3e4\n\x3c\/span\x3e\x3cspan class=\x22lnt\x22\x3e5\n\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\x3c\/td\x3e\n\x3ctd class=\x22lntd\x22\x3e\n\x3cpre class=\x22chroma\x22\x3e\x3ccode class=\x22language-swift\x22 data-lang=\x22swift\x22\x3e\x3cspan class=\x22kd\x22\x3eenum\x3c\/span\x3e \x3cspan class=\x22nc\x22\x3eVendingMachineError\x3c\/span\x3e\x3cspan class=\x22p\x22\x3e:\x3c\/span\x3e \x3cspan class=\x22n\x22\x3eError\x3c\/span\x3e \x3cspan class=\x22p\x22\x3e{\x3c\/span\x3e\n\x3cspan class=\x22k\x22\x3ecase\x3c\/span\x3e \x3cspan class=\x22n\x22\x3einvalidSelection\x3c\/span\x3e\n\x3cspan class=\x22k\x22\x3ecase\x3c\/span\x3e \x3cspan class=\x22n\x22\x3einsufficientFunds\x3c\/span\x3e\x3cspan class=\x22p\x22\x3e(\x3c\/span\x3e\x3cspan class=\x22n\x22\x3ecoinsNeeded\x3c\/span\x3e\x3cspan class=\x22p\x22\x3e:\x3c\/span\x3e \x3cspan class=\x22nb\x22\x3eInt\x3c\/span\x3e\x3cspan class=\x22p\x22\x3e)\x3c\/span\x3e\n\x3cspan class=\x22k\x22\x3ecase\x3c\/span\x3e \x3cspan class=\x22n\x22\x3eoutOfStock\x3c\/span\x3e\n\x3cspan class=\x22p\x22\x3e}\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\x3c\/td\x3e\x3c\/tr\x3e\x3c\/table\x3e\n\x3c\/div\x3e\n\x3c\/div\x3e\n\x3cp\x3eThrowing an error lets you indicate that something unexpected happened and the normal flow of execution canâ€™t continue. You use a throw statement to throw an error. For example, the following code throws an error to indicate that five additional coins are needed by the vending machine:\næŠ›å‡ºé”™è¯¯è¯´æ˜æ¸¸æˆå‡ºç°å¼‚å¸¸ï¼Œå¯¼è‡´å…¶ä»–æ“ä½œæ— æ³•è¿›è¡Œã€‚è¿™æ˜¯éœ€è¦é€šè¿‡Throwè¯­å¥æ¥æŠ›å‡ºè¿™ä¸ªé”™è¯¯ã€‚ä¾‹å¦‚ï¼Œä»¥ä¸‹ä»£ç æŠ›å‡ºäº†ä¸€ä¸ªé”™è¯¯è¡¨æ˜éœ€è¦fiveï¼š\x3c\/p\x3e\n\x3cdiv class=\x22highlight\x22\x3e\x3cdiv class=\x22chroma\x22\x3e\n\x3ctable class=\x22lntable\x22\x3e\x3ctr\x3e\x3ctd class=\x22lntd\x22\x3e\n\x3cpre class=\x22chroma\x22\x3e\x3ccode class=\x22language-swift\x22 data-lang=\x22swift\x22\x3e\x3cspan class=\x22lnt\x22\x3e1\n\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\x3c\/td\x3e\n\x3ctd class=\x22lntd\x22\x3e\n\x3cpre class=\x22chroma\x22\x3e\x3ccode class=\x22language-swift\x22 data-lang=\x22swift\x22\x3e\x3cspan class=\x22k\x22\x3ethrow\x3c\/span\x3e \x3cspan class=\x22n\x22\x3eVendingMachineError\x3c\/span\x3e\x3cspan class=\x22p\x22\x3e.\x3c\/span\x3e\x3cspan class=\x22n\x22\x3einsufficientFunds\x3c\/span\x3e\x3cspan class=\x22p\x22\x3e(\x3c\/span\x3e\x3cspan class=\x22n\x22\x3ecoinsNeeded\x3c\/span\x3e\x3cspan class=\x22p\x22\x3e:\x3c\/span\x3e \x3cspan class=\x22mi\x22\x3e5\x3c\/span\x3e\x3cspan class=\x22p\x22\x3e)\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\x3c\/td\x3e\x3c\/tr\x3e\x3c\/table\x3e\n\x3c\/div\x3e\n\x3c\/div\x3e\n\x3ch1 id=\x22handling-errors\x22\x3eHandling Errors\x3c\/h1\x3e\n\n\x3cp\x3eWhen an error is thrown, some surrounding piece of code must be responsible for handling the errorâ€”for example, by correcting the problem, trying an alternative approach, or informing the user of the failure.\nå½“é”™è¯¯æŠ›å‡ºåï¼Œè¿™æ®µä»£ç å¿…é¡»æ¥å¤„ç†è¿™ä¸ªé”™è¯¯ã€‚ä¾‹å¦‚ï¼šé€šè¿‡çº æ­£é—®é¢˜ï¼Œå°è¯•å…¶ä»–æ–¹å¼å®ç°ï¼Œæˆ–é€šçŸ¥ç”¨æˆ·çš„å¤±è´¥ã€‚\x3c\/p\x3e\n\n\x3cp\x3eThere are four ways to handle errors in Swift. You can propagate the error from a function to the code that calls that function, handle the error using a do-catch statement, handle the error as an optional value, or assert that the error will not occur. Each approach is described in a section below.\nåœ¨swiftä¸­æœ‰å››ç§å¤„ç†é”™è¯¯æœºåˆ¶:\n    1. å‘è°ƒç”¨æ–¹æ³•ä¸­ä¼ é€’è¿™ä¸ªé”™è¯¯\n    2. ä½¿ç”¨do-catchè¯­å¥å¤„ç†\n    3. æŠŠé”™è¯¯è®¾ç½®ä¸ºå¯é€‰å‹\n    4.æ–­è¨€ä¸ä¼šå‡ºç°å¼‚å¸¸çš„æƒ…å†µä¸‹ï¼Œä½¿ç”¨try!ç¦æ­¢å¼‚å¸¸æŠ›å‡º\x3c\/p\x3e\n\n\x3cp\x3eWhen a function throws an error, it changes the flow of your program, so itâ€™s important that you can quickly identify places in your code that can throw errors. To identify these places in your code, write the try keywordâ€”or the try? or try! variationâ€”before a piece of code that calls a function, method, or initializer that can throw an error. These keywords are described in the sections below.\nå½“ä¸€ä¸ªæ–¹æ³•æŠ›å‡ºé”™è¯¯æ—¶ï¼Œä¼šæ‰“æ–­ç¨‹åºæ­£å¸¸çš„å·¥ä½œæµï¼Œå¿…é¡»å¿«é€Ÿå®šä½åˆ°å¯èƒ½æŠ›å‡ºé”™è¯¯çš„ä»£ç ã€‚å¯ä»¥ä½¿ç”¨å…³é”®å­—\x3ccode\x3etry\x3c\/code\x3e è¦æ³¨æ„ \x3ccode\x3etry?\x3c\/code\x3eæˆ–\x3ccode\x3etry!\x3c\/code\x3eä¹‹é—´çš„å·®å¼‚ã€‚åœ¨è°ƒç”¨ä¸€ä¸ªå‡½æ•°ï¼Œæ–¹æ³•æˆ–è€…æ„é€ å™¨ä¹‹å‰ï¼Œæ¥æŠ›å‡ºå¼‚å¸¸ã€‚\x3c\/p\x3e\n\n\x3ch2 id=\x22propagating-errors-using-throwing-functions\x22\x3ePropagating Errors Using Throwing Functions\x3c\/h2\x3e\n\n\x3cp\x3eTo indicate that a function, method, or initializer can throw an error, you write the throws keyword in the functionâ€™s declaration after its parameters. A function marked with throws is called a throwing function. If the function specifies a return type, you write the throwskeyword before the return arrow (-\x26gt;).\nå‡½æ•°ï¼Œæ–¹æ³•æˆ–æ„é€ å™¨éƒ½å¯ä»¥æŠ›å‡ºå¼‚å¸¸ï¼Œåªéœ€è¦åœ¨å£°æ˜å®ƒä»¬æ—¶æ·»åŠ å…³é”®å­—ï¼š\x3ccode\x3ethrows\x3c\/code\x3eå³å¯ï¼Œè¿™ç§æ–¹æ³•è¢«ç§°ä¸º\x3ccode\x3ethrows\x3c\/code\x3eå‡½æ•°ï¼Œ\x3ccode\x3ethrows\x3c\/code\x3eå…³é”®å­—ä½ç½®åœ¨å‚æ•°ä¹‹åï¼Œè¿”å›å€¼(-\x26gt;)ä¹‹å‰\x3c\/p\x3e\n\n\x3cp\x3eA throwing function propagates errors that are thrown inside of it to the scope from which itâ€™s called.\næŠ›å‡ºå‡½æ•°ä¼šæŠŠé”™è¯¯æŠ›ç»™è°ƒç”¨å®ƒçš„å‡½æ•°å‘¨æœŸä¸­å»ã€‚\x3c\/p\x3e',
        owner: 'huos3203',
        repo: 'huos3203.github.io',
        oauth: {
          client_id: 'd46ea301857e36a08319',
          client_secret: '9da00f1f475c4166b96fbe157d0afdbd64cc613c'
        }
      });
      gitment.render('comments-gitment');
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://github.com/imsun/gitment">comments powered by gitment.</a></noscript>
  
  

  
    <script src="https://utteranc.es/client.js"
            repo="huos3203/huos3203.github.io"
            issue-term="pathname"
            theme="github-light"
            crossorigin="anonymous"
            async>
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://github.com/utterance">comments powered by utterances.</a></noscript>

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
      <a href="mailto:iTBoyer@qq.com" class="iconfont icon-email" title="email"></a>
      <a href="https://github.com/huos3203" class="iconfont icon-github" title="github"></a>
      <a href="http://weibo.com/1791281385" class="iconfont icon-weibo" title="weibo"></a>
      <a href="http://www.zhihu.com/people/boyers" class="iconfont icon-zhihu" title="zhihu"></a>
      <a href="http://douban.com/people/boyers" class="iconfont icon-douban" title="douban"></a>
      <a href="http://localhost:1313" class="iconfont icon-bilibili" title="bilibili"></a>
  <a href="https://huos3203.github.io/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    ç”± <a class="hexo-link" href="https://gohugo.io">Hugo</a> å¼ºåŠ›é©±åŠ¨
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    ä¸»é¢˜ - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  <div class="busuanzi-footer">
    <span id="busuanzi_container_site_pv"> æœ¬ç«™æ€»è®¿é—®é‡ <span id="busuanzi_value_site_pv"><img src="/img/spinner.svg" alt="spinner.svg"/></span> æ¬¡ </span>
      <span class="division">|</span>
    <span id="busuanzi_container_site_uv"> æœ¬ç«™æ€»è®¿å®¢æ•° <span id="busuanzi_value_site_uv"><img src="/img/spinner.svg" alt="spinner.svg"/></span> äºº </span>
  </div>

  <span class="copyright-year">
    &copy; 
    2017 - 
    2019
    <span class="heart">
      <i class="iconfont icon-heart"></i>
    </span>
    <span class="author">iTBoyer</span>
  </span>
</div>
    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  <script src="/lib/highlight/highlight.pack.js?v=20171001"></script>
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js" integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js" integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin="anonymous"></script>
<script type="text/javascript" src="/dist/even.26188efa.min.js"></script>








</body>
</html>
