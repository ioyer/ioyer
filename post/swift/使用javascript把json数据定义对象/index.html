<!DOCTYPE html>
<html lang="zh-cn">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>ä½¿ç”¨JavaScriptæŠŠJSONæ•°æ®å®šä¹‰å¯¹è±¡ - Even - A super concise theme for Hugo</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<meta name="author" content="iTBoyer" /><meta name="description" content="å°†JSONæ•°æ®åºåˆ—åŒ–ä¸ºä»£ç å®ä¾‹ å®šä¹‰ä¸€ä¸ªç»§æ‰¿è‡ª JSExport å­åè®® PersonJSExports å®šä¹‰ä¸€ä¸ªéµå®ˆPersonJSExportsåè®®çš„Personæ•°æ®æ¨¡ ä½¿ç”¨ JavaScript æŠŠJSONè½¬ä¸º" /><meta name="keywords" content="Hugo, swift, org-mode" />






<meta name="generator" content="Hugo 0.56.3 with even 4.0.0" />


<link rel="canonical" href="https://huos3203.github.io/post/swift/%E4%BD%BF%E7%94%A8javascript%E6%8A%8Ajson%E6%95%B0%E6%8D%AE%E5%AE%9A%E4%B9%89%E5%AF%B9%E8%B1%A1/" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">

<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<link href="/dist/even.c2a46f00.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css" integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin="anonymous">


<meta property="og:title" content="ä½¿ç”¨JavaScriptæŠŠJSONæ•°æ®å®šä¹‰å¯¹è±¡" />
<meta property="og:description" content="å°†JSONæ•°æ®åºåˆ—åŒ–ä¸ºä»£ç å®ä¾‹ å®šä¹‰ä¸€ä¸ªç»§æ‰¿è‡ª JSExport å­åè®® PersonJSExports å®šä¹‰ä¸€ä¸ªéµå®ˆPersonJSExportsåè®®çš„Personæ•°æ®æ¨¡ ä½¿ç”¨ JavaScript æŠŠJSONè½¬ä¸º" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://huos3203.github.io/post/swift/%E4%BD%BF%E7%94%A8javascript%E6%8A%8Ajson%E6%95%B0%E6%8D%AE%E5%AE%9A%E4%B9%89%E5%AF%B9%E8%B1%A1/" />
<meta property="article:published_time" content="2017-02-12T14:41:35+00:00" />
<meta property="article:modified_time" content="2019-08-08T17:46:02+08:00" />
<meta itemprop="name" content="ä½¿ç”¨JavaScriptæŠŠJSONæ•°æ®å®šä¹‰å¯¹è±¡">
<meta itemprop="description" content="å°†JSONæ•°æ®åºåˆ—åŒ–ä¸ºä»£ç å®ä¾‹ å®šä¹‰ä¸€ä¸ªç»§æ‰¿è‡ª JSExport å­åè®® PersonJSExports å®šä¹‰ä¸€ä¸ªéµå®ˆPersonJSExportsåè®®çš„Personæ•°æ®æ¨¡ ä½¿ç”¨ JavaScript æŠŠJSONè½¬ä¸º">


<meta itemprop="datePublished" content="2017-02-12T14:41:35&#43;00:00" />
<meta itemprop="dateModified" content="2019-08-08T17:46:02&#43;08:00" />
<meta itemprop="wordCount" content="2226">



<meta itemprop="keywords" content="" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="ä½¿ç”¨JavaScriptæŠŠJSONæ•°æ®å®šä¹‰å¯¹è±¡"/>
<meta name="twitter:description" content="å°†JSONæ•°æ®åºåˆ—åŒ–ä¸ºä»£ç å®ä¾‹ å®šä¹‰ä¸€ä¸ªç»§æ‰¿è‡ª JSExport å­åè®® PersonJSExports å®šä¹‰ä¸€ä¸ªéµå®ˆPersonJSExportsåè®®çš„Personæ•°æ®æ¨¡ ä½¿ç”¨ JavaScript æŠŠJSONè½¬ä¸º"/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">Even</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/">
        <li class="mobile-menu-item">ä¸»é¡µ</li>
      </a><a href="/post/">
        <li class="mobile-menu-item">å½’æ¡£</li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">æ ‡ç­¾ğŸ·ï¸</li>
      </a><a href="/categories/">
        <li class="mobile-menu-item">åˆ†ç±»</li>
      </a>
  </ul>
</nav>
  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">Even</a>
</div>

<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/">ä¸»é¡µ</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/post/">å½’æ¡£</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/tags/">æ ‡ç­¾ğŸ·ï¸</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/categories/">åˆ†ç±»</a>
      </li>
  </ul>
</nav>
    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">ä½¿ç”¨JavaScriptæŠŠJSONæ•°æ®å®šä¹‰å¯¹è±¡</h1>

      <div class="post-meta">
        <span class="post-time"> 2017-02-12 </span>
        <div class="post-category">
            <a href="/categories/swift/"> swift </a>
            </div>
          <span class="more-meta"> çº¦ 2226 å­— </span>
          <span class="more-meta"> é¢„è®¡é˜…è¯» 5 åˆ†é’Ÿ </span>
        <span id="busuanzi_container_page_pv" class="more-meta"> <span id="busuanzi_value_page_pv"><img src="/img/spinner.svg" alt="spinner.svg"/></span> æ¬¡é˜…è¯» </span>
      </div>
    </header>

    <div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">æ–‡ç« ç›®å½•</h2>
  <div class="post-toc-content always-active">
    <nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#å°†jsonæ•°æ®åºåˆ—åŒ–ä¸ºä»£ç å®ä¾‹">å°†JSONæ•°æ®åºåˆ—åŒ–ä¸ºä»£ç å®ä¾‹</a></li>
<li><a href="#jsexportè¯­è¨€äº’é€šåè®®">JSExportè¯­è¨€äº’é€šåè®®</a></li>
<li><a href="#jsexportas-å®-æŒ‡å®šæ–¹æ³•åœ¨jsä¸­è°ƒç”¨çš„åç§°">JSExportAs å®: æŒ‡å®šæ–¹æ³•åœ¨JSä¸­è°ƒç”¨çš„åç§°</a>
<ul>
<li><a href="#å®šä¹‰personjsexportsåè®®å’Œcreateåè®®æ–¹æ³•-ç±»æ–¹æ³•">å®šä¹‰PersonJSExportsåè®®å’Œcreateåè®®æ–¹æ³•ï¼ˆç±»æ–¹æ³•ï¼‰</a></li>
<li><a href="#å®šä¹‰personæ¨¡å‹">å®šä¹‰Personæ¨¡å‹</a></li>
<li><a href="#jscontext-é…ç½®">JSContext é…ç½®</a></li>
<li><a href="#javascript-æ•°æ®å’Œè¿›ç¨‹">JavaScript æ•°æ®å’Œè¿›ç¨‹</a></li>
<li><a href="#ä½¿ç”¨mustache-æ¨¡æ¿-æ¸²æŸ“">ä½¿ç”¨Mustache æ¨¡æ¿ æ¸²æŸ“</a></li>
</ul></li>
</ul></li>
</ul>
</nav>
  </div>
</div>
    <div class="post-content">
      

<h2 id="å°†jsonæ•°æ®åºåˆ—åŒ–ä¸ºä»£ç å®ä¾‹">å°†JSONæ•°æ®åºåˆ—åŒ–ä¸ºä»£ç å®ä¾‹</h2>

<ol>
<li>å®šä¹‰ä¸€ä¸ªç»§æ‰¿è‡ª <code>JSExport</code> å­åè®® <code>PersonJSExports</code></li>
<li>å®šä¹‰ä¸€ä¸ªéµå®ˆ<code>PersonJSExports</code>åè®®çš„<code>Person</code>æ•°æ®æ¨¡</li>
<li>ä½¿ç”¨ <code>JavaScript</code> æŠŠ<code>JSON</code>è½¬ä¸º<code>ç±»</code>å¹¶å®ä¾‹åŒ–<code>å¯¹è±¡</code>
éƒ½æœ‰ä¸€ä¸ªå®Œæ•´çš„ <code>JVM</code> åœ¨é‚£å„¿äº†ï¼Œè°è¿˜éœ€è¦ <code>NSJSONSerialization</code>ï¼Ÿ</li>
</ol>

<h2 id="jsexportè¯­è¨€äº’é€šåè®®">JSExportè¯­è¨€äº’é€šåè®®</h2>

<p><code>JavaScript</code>å¯ä»¥è„±ç¦»<code>prototypeç»§æ‰¿</code>å®Œå…¨ç”¨<code>JSON</code>æ¥å®šä¹‰å¯¹è±¡ï¼Œä½†æ˜¯<code>Objective-C</code>ç¼–ç¨‹ä¸èƒ½è„±ç¦»<code>ç±»</code>å’Œ<code>ç»§æ‰¿</code>ã€‚æ‰€ä»¥<code>JavaScriptCore</code>å°±æä¾›äº†<code>JSExport</code>ä½œä¸ºä¸¤ç§è¯­è¨€çš„äº’é€šåè®®ã€‚
<code>JSExport</code>ä¸­æ²¡æœ‰é¢„å®šä¹‰ä»»ä½•æ–¹æ³•ï¼Œä½†æ˜¯æ‰€æœ‰ç»§æ‰¿<code>JSExport</code>çš„åè®®ä¸­å®šä¹‰çš„æ–¹æ³•å³åè®®æ–¹æ³•ï¼Œéƒ½å¯ä»¥åœ¨<code>JSContext</code>ä¸­è¢«è°ƒç”¨ã€‚</p>

<h2 id="jsexportas-å®-æŒ‡å®šæ–¹æ³•åœ¨jsä¸­è°ƒç”¨çš„åç§°">JSExportAs å®: æŒ‡å®šæ–¹æ³•åœ¨JSä¸­è°ƒç”¨çš„åç§°</h2>

<p>å¯¹äºå¤šå‚æ•°çš„æ–¹æ³•ï¼Œ<code>JavaScriptCore</code>çš„è½¬æ¢æ–¹å¼å°†<code>Objective-C</code>çš„æ–¹æ³•æ¯ä¸ªéƒ¨åˆ†éƒ½åˆå¹¶åœ¨ä¸€èµ·ï¼Œå†’å·åçš„å­—æ¯å˜ä¸ºå¤§å†™å¹¶ç§»é™¤å†’å·ã€‚æ¯”å¦‚ä¸‹è¾¹åè®®ä¸­çš„æ–¹æ³•ï¼Œåœ¨JavaScriptè°ƒç”¨å°±æ˜¯ï¼šdoFooWithBar(foo, bar);
{% codeblock lang:objc %}
@protocol MultiArgs <JSExport>
- (void)doFoo:(id)foo withBar:(id)bar;
@end
{% endcodeblock %}
å¦‚æœå¸Œæœ›æ–¹æ³•åœ¨JavaScriptä¸­æœ‰ä¸€ä¸ªæ¯”è¾ƒçŸ­çš„åå­—ï¼Œå°±éœ€è¦ç”¨çš„JSExport.hä¸­æä¾›çš„å®ï¼š
{% codeblock JSExport.h lang:objc %}
JSExportAs(PropertyName, Selector)
{% endcodeblock %}</p>

<p>{% codeblock JSExportAsçš„å®˜æ–¹å®å®šä¹‰ lang:objc xcdoc://?url=developer.apple.com/library/etc/redirect/xcode/ios/1151/documentation/JavaScriptCore/Reference/JSExport_Ref/index.html  %}
#define JSExportAs(PropertyName, Selector) <br />
@optional Selector <strong>JS_EXPORT_AS</strong>##PropertyName:(id)argument; @required Selector
#endif
{% endcodeblock %}
å¦‚ <code>setX:Y:Z</code>æ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥ç»™ä»–é‡å‘½åï¼Œè®© JS ä¸­é€šè¿‡ <code>set3D(x,y,z)</code> æ¥è°ƒç”¨
{% codeblock ä½¿ç”¨æ–¹æ³• lang:objc %}
JSExportAs(set3D,
- (void)setX:(id)x Y:(id)y Z:(id)z
);
//è°ƒç”¨
set3D(x,y,z)
{% endcodeblock %}</p>

<h3 id="å®šä¹‰personjsexportsåè®®å’Œcreateåè®®æ–¹æ³•-ç±»æ–¹æ³•">å®šä¹‰PersonJSExportsåè®®å’Œcreateåè®®æ–¹æ³•ï¼ˆç±»æ–¹æ³•ï¼‰</h3>

<p><code>Person ç±»</code>å®ç°äº†<code>PersonJSExports åè®®</code>ï¼Œè¯¥åè®®è§„å®šå“ªäº›å±æ€§å¯ä»¥åœ¨ <code>JavaScript</code>ä¸­å¯ç”¨ã€‚
åœ¨<code>JavaScript</code>è¯­å¢ƒä¸­ï¼Œä¸èƒ½åƒï¼š<code>var person = new Person()</code>æ¥åˆå§‹åŒ–å®ä¾‹ï¼Œå¯ä»¥åœ¨å®šä¹‰<code>PersonJSExports</code>åè®®æ–¹æ³•æ—¶ï¼Œæ·»åŠ ä¸€ä¸ªåè®®æ–¹æ³•æ¥å¼¥è¡¥è¿™ä¸€ç‚¹ã€‚è§ä¸‹ä¾‹<code>create...</code>ç±»æ–¹æ³•ï¼š
{% codeblock  lang:swift %}
// Custom protocol must be declared with <code>@objc</code>
@objc protocol PersonJSExports : JSExport {
    //å±æ€§
    var firstName: String { get set }
    var lastName: String { get set }
    var birthYear: NSNumber? { get set }
    //æ–¹æ³•
    func getFullName() -&gt; String</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><span class="lnt">1
</span><span class="lnt">2
</span></pre></td>
<td class="lntd">
<pre class="chroma">/// åœ¨JavaScriptä¸­è°ƒç”¨è¿™ä¸ªç±»æ–¹æ³•
class func createWithFirstName(firstName: String, lastName: String) -&gt; Person</pre></td></tr></table>
</div>
</div>
<p>}</p>

<h3 id="å®šä¹‰personæ¨¡å‹">å®šä¹‰Personæ¨¡å‹</h3>

<p>å®šä¹‰ä¸€ä¸ªéµå®ˆ<code>PersonJSExports</code>åè®®çš„<code>Person</code>æ•°æ®æ¨¡
// Custom class must inherit from <code>NSObject</code>
@objc class Person : NSObject, PersonJSExports {
    // JSåè®®å±æ€§å¿…é¡»å£°æ˜ä¸º<code>dynamic</code>
    dynamic var firstName: String
    dynamic var lastName: String
    dynamic var birthYear: NSNumber?</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></pre></td>
<td class="lntd">
<pre class="chroma">init(firstName: String, lastName: String)   
{
    self.firstName = firstName
    self.lastName = lastName
}
//JSåè®®ç±»æ–¹æ³•
class func createWithFirstName(firstName: String, lastName: String) -&gt; Person 
{
    return Person(firstName: firstName, lastName: lastName)
}
//JSåè®®æ–¹æ³•
func getFullName() -&gt; String 
{
    return &#34;\(firstName) \(lastName)&#34;
}</pre></td></tr></table>
</div>
</div>
<p>}
{% endcodeblock %}</p>

<h3 id="jscontext-é…ç½®">JSContext é…ç½®</h3>

<p>ä¹‹å‰ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨æˆ‘ä»¬å·²ç»åˆ›å»ºçš„ Person ç±»ï¼Œæˆ‘ä»¬éœ€è¦å°†å…¶å¯¼å‡ºåˆ° <code>JavaScript</code> ç¯å¢ƒã€‚æˆ‘ä»¬ä¹Ÿå°†å€Ÿæ­¤å¯¼å…¥<a href="http://mustache.github.io">Mustache JS library</a>ï¼Œæˆ‘ä»¬å°†åº”ç”¨æ¨¡æ¿åˆ°æˆ‘ä»¬çš„ Person å¯¹è±¡ã€‚
{% codeblock lang:swift %}
// export Person classï¼ŒJSä¸­ä»¥è¯¥<code>Personæ ‡ç¤ºç¬¦</code>ä½œä¸ºç±»åä½¿ç”¨
context.setObject(Person.self, forKeyedSubscript: &ldquo;Person&rdquo;)</p>

<p>// load Mustache.js
if let mustacheJSString = String(contentsOfFile:&hellip;, encoding:NSUTF8StringEncoding, error:nil)
{
    context.evaluateScript(mustacheJSString)
}
{% endcodeblock %}</p>

<h3 id="javascript-æ•°æ®å’Œè¿›ç¨‹">JavaScript æ•°æ®å’Œè¿›ç¨‹</h3>

<p>ä¸‹é¢å°±æ¥çœ‹çœ‹æˆ‘ä»¬ç®€å•çš„ JSON ä¾‹å­ï¼Œè¿™æ®µä»£ç å°†åˆ›å»ºæ–°çš„ Person å®ä¾‹ã€‚
æ•°æ®ï¼š
{% codeblock Persons.json lang:json %}
[
    { &ldquo;first&rdquo;: &ldquo;Grace&rdquo;,     &ldquo;last&rdquo;: &ldquo;Hopper&rdquo;,   &ldquo;year&rdquo;: 1906 },
    { &ldquo;first&rdquo;: &ldquo;Ada&rdquo;,       &ldquo;last&rdquo;: &ldquo;Lovelace&rdquo;, &ldquo;year&rdquo;: 1815 },
    { &ldquo;first&rdquo;: &ldquo;Margaret&rdquo;,  &ldquo;last&rdquo;: &ldquo;Hamilton&rdquo;, &ldquo;year&rdquo;: 1936 }
]
{% endcodeblock %}
åˆ›å»ºæ–°çš„ Person å®ä¾‹ï¼š
{% codeblock loadPeople.js lang:js %}
var loadPeopleFromJSON = function(jsonString)
{
    var data = JSON.parse(jsonString);
    var people = [];
    for (i = 0; i &lt; data.length; i++)
    {
        //åœ¨swiftä¸­çš„jsåè®®æ–¹æ³•ï¼š<code>createWithFirstName:lastName:</code>
        var person = Person.createWithFirstNameLastName(data[i].first, data[i].last);
        person.birthYear = data[i].year;
        //<code>push:</code>æ·»åŠ åˆ°æ•°ç»„ä¸­
        people.push(person);
    }
    //è¿”å›è¯¥å¯¹è±¡
    return people;
}
{% endcodeblock %}
<code>JSContext</code>åŠ è½½è£…æ¢<code>loadPeople.js</code>è„šæœ¬
åŠ è½½jsè„šæœ¬ä¹‹åï¼Œ<code>loadPeopleFromJSON</code>å³å¯ä½œä¸ºä¸‹æ ‡è¢«<code>context</code>è°ƒç”¨è¯¥æ–¹æ³•:
{% codeblock åŠ è½½loadPeople.js lang:swift %}
// load loadPeople.js
if let loadPeople = String(contentsOfFile:&hellip;, encoding:NSUTF8StringEncoding, error:nil)
{
    //åŠ è½½jsè„šæœ¬ä¹‹åï¼Œ<code>loadPeopleFromJSON</code>å³å¯ä½œä¸ºä¸‹æ ‡è¢«contextè°ƒç”¨è¯¥æ–¹æ³•
    context.evaluateScript(loadPeople)
}
{% endcodeblock %}</p>

<blockquote>
<p>æ³¨æ„ï¼šJavaScriptCore è½¬æ¢çš„ Objective-C / Swift æ–¹æ³•åæ˜¯ JavaScript å…¼å®¹çš„ã€‚ç”±äº JavaScript æ²¡æœ‰å‚æ•° åç§°ï¼Œä»»ä½•å¤–éƒ¨å‚æ•°åç§°éƒ½ä¼šè¢«è½¬æ¢ä¸ºé©¼å³°å½¢å¼å¹¶ä¸”é™„åŠ åˆ°å‡½æ•°ååã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼ŒObjective-C çš„æ–¹æ³• createWithFirstName:lastName: å˜æˆäº†åœ¨JavaScriptä¸­çš„ createWithFirstNameLastName()ã€‚</p>
</blockquote>

<h3 id="ä½¿ç”¨mustache-æ¨¡æ¿-æ¸²æŸ“">ä½¿ç”¨Mustache æ¨¡æ¿ æ¸²æŸ“</h3>

<p>Mustache æ˜¯ä¸€ä¸ªå¾ˆå¼ºå¤§çš„ template å¼•æ“ï¼Œå¯ä»¥é€šè¿‡è§£æ json æ¥ç»‘å®šå¹¶æ¸²æŸ“å ä½ç¬¦ã€‚å¦‚æœä½ åšè¿‡ä¸€äº›å‰ç«¯å¼€å‘çš„è¯ï¼Œä¼šçŸ¥é“è¿™æ˜¯ä¸€ç§å¾ˆå¸¸ç”¨çš„ HTML ç»‘å®š Model çš„åšæ³•ï¼ŒGRMustache.swift æ˜¯è¿™ä¸ªæ¡†æ¶çš„ Swift å®ç°ã€‚
<a href="http://blog.csdn.net/kevin_luan/article/details/46485561">mustacheæ¨¡æ¿å¼•æ“</a>
<a href="https://github.com/BjornRuud/Swiftache">Mustache çš„ Swift è¯­è¨€å®ç°ç‰ˆæœ¬</a>
mustacheçš„ç‰¹ç‚¹å°±æ˜¯å¾ˆè¯­æ³•å¾ˆç®€å•ï¼Œä¸»è¦è¯­æ³•å¦‚ä¸‹:
    1. {{ name }} æ‰“å°å˜é‡ï¼Œé»˜è®¤æ˜¯escapeè¿‡çš„ï¼Œå¦‚æœä¸è¦escape,ç”¨3ä¸ªåˆ†éš”ç¬¦ {{{ name }}}ï¼Œæˆ–è€…ç”¨ {{ &amp;name }}ï¼Œè¿™ä¸ªå’Œåˆ†éš”ç¬¦æ— å…³
    2. {{#person}}â€¦{{/person}} åŒºå—ï¼Œ4ç§æ–¹å¼
        person æ˜¯çœŸå‡å€¼ï¼Œå†³å®šæ˜¯å¦è¾“å‡º
        person æ˜¯list of arrayï¼Œä¼šå¾ªç¯å±•å¼€ for x in person:section.render(&lsquo;xxx)
        person æ˜¯åŒ¿åå‡½æ•°/object, åŒºå—åŒ…è£¹çš„html ä¼šä½œä¸ºå‚æ•°ä¼ é€’è¿›å»
        person æ˜¯dictï¼Œç›´æ¥æ‰“å° dict[key]
    3. {{^person}}â€¦{{/person}ï¼Œåå‘åŒºå—
    4. {{ï¼name }} æ³¨é‡Š
    5. {{&gt; box }} è½½å…¥å­æ¨¡å—</p>

<p>åŠ è½½ <code>JSON æ•°æ®</code>ï¼Œè°ƒç”¨ <code>JSContext</code> å°†æ•°æ®è§£ææˆ <code>Person å¯¹è±¡</code>çš„æ•°ç»„ï¼Œå¹¶ç”¨ <code>Mustache æ¨¡æ¿</code>å‘ˆç°æ¯ä¸ª<code>Person</code>ï¼š
{% codeblock lang:swift %}
// ä»æ–‡ä»¶<code>Persons.json</code>ä¸­åŠ è½½jsonæ•°æ®
if let peopleJSON = NSString(contentsOfFile:&hellip;, encoding: NSUTF8StringEncoding, error: nil)
{
    // è·å–jsä¸­å®šä¹‰çš„<code>loadPeopleFromJSON</code>çš„æ–¹æ³•
    let load = context.objectForKeyedSubscript(&ldquo;loadPeopleFromJSON&rdquo;)
    // é€šè¿‡è°ƒç”¨loadæ–¹æ³•å°†<code>JSON æ•°æ®</code>è§£ææˆ<code>Person å¯¹è±¡</code>çš„æ•°ç»„
    if let people = load.callWithArguments([peopleJSON]).toArray() as? [Person]
    {
        // get rendering function and create template
        let mustacheRender = context.objectForKeyedSubscript(&ldquo;Mustache&rdquo;).objectForKeyedSubscript(&ldquo;render&rdquo;)
        let template = &ldquo;{{getFullName}}, born {{birthYear}}&rdquo;</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></pre></td>
<td class="lntd">
<pre class="chroma">    // loop through people and render Person object as string
    for person in people 
    {
        println(mustacheRender.callWithArguments([template, person]))
    }
}</pre></td></tr></table>
</div>
</div>
<p>}</p>

<p>// Output:
// Grace Hopper, born 1906
// Ada Lovelace, born 1815
// Margaret Hamilton, born 1936
{% endcodeblock %}
JavaScript ä»£ç æ®µå¯èƒ½æ˜¯é™„å¸¦åº”ç”¨ä¸€èµ·å‘å¸ƒçš„åŸºæœ¬çš„ç”¨æˆ·å®šä¹‰çš„æ’ä»¶ã€‚</p>

    </div>

    <div class="post-copyright">
  <p class="copyright-item">
    <span class="item-title">æ–‡ç« ä½œè€…</span>
    <span class="item-content">iTBoyer</span>
  </p>
  <p class="copyright-item">
    <span class="item-title">ä¸Šæ¬¡æ›´æ–°</span>
    <span class="item-content">
        2019-08-08
        <a href="iEmacsd/commit/ccacacd56ce82e709b32bc57ad0c707301dbd1e0" title="è¿ç§»mdæ–‡æ¡£">(ccacacd)</a>
    </span>
  </p>
  
  
</div>
<div class="post-reward">
  <input type="checkbox" name="reward" id="reward" hidden />
  <label class="reward-button" for="reward">èµèµæ”¯æŒ</label>
  <div class="qr-code">
    
    <label class="qr-code-image" for="reward">
        <img class="image" src="/path/to/your/wechat-qr-code.png">
        <span>å¾®ä¿¡æ‰“èµ</span>
      </label>
    <label class="qr-code-image" for="reward">
        <img class="image" src="/path/to/your/alipay-qr-code.png">
        <span>æ”¯ä»˜å®æ‰“èµ</span>
      </label>
  </div>
</div><footer class="post-footer">
      
      <nav class="post-nav">
        <a class="prev" href="/post/%E5%AF%BC%E5%9B%BE/%E6%80%9D%E7%BB%B4%E5%AF%BC%E5%9B%BE%E4%B9%8B%E5%BC%80%E5%8F%91%E5%AE%9E%E8%B7%B5%E7%AF%87/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">æ€ç»´å¯¼å›¾ä¹‹å¼€å‘å®è·µç¯‡</span>
            <span class="prev-text nav-mobile">ä¸Šä¸€ç¯‡</span>
          </a>
        <a class="next" href="/post/swift/javascriptcore%E5%AE%9E%E7%8E%B0swift%E6%B7%B7%E7%BC%96/">
            <span class="next-text nav-default">Javaâ€‹Scriptâ€‹Coreå®ç°swiftæ··ç¼–</span>
            <span class="next-text nav-mobile">ä¸‹ä¸€ç¯‡</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        <div id="comments-gitment"></div>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/theme-next/theme-next-gitment@1/default.min.css" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/gh/theme-next/theme-next-gitment@1/gitment.browser.min.js" crossorigin="anonymous"></script>
    <script type="text/javascript">
      var gitment = new Gitment({
        id: '2017-02-12 14:41:35 \x2b0000 UTC',
        title: 'ä½¿ç”¨JavaScriptæŠŠJSONæ•°æ®å®šä¹‰å¯¹è±¡',
        link: decodeURI(location.href),
        desc: 'å°†JSONæ•°æ®åºåˆ—åŒ–ä¸ºä»£ç å®ä¾‹ å®šä¹‰ä¸€ä¸ªç»§æ‰¿è‡ª JSExport å­åè®® PersonJSExports å®šä¹‰ä¸€ä¸ªéµå®ˆPersonJSExportsåè®®çš„Personæ•°æ®æ¨¡ ä½¿ç”¨ JavaScript æŠŠJSONè½¬ä¸º',
        owner: 'huos3203',
        repo: 'huos3203.github.io',
        oauth: {
          client_id: 'd46ea301857e36a08319',
          client_secret: '9da00f1f475c4166b96fbe157d0afdbd64cc613c'
        }
      });
      gitment.render('comments-gitment');
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://github.com/imsun/gitment">comments powered by gitment.</a></noscript>
  
  

  
    <script src="https://utteranc.es/client.js"
            repo="huos3203/huos3203.github.io"
            issue-term="pathname"
            theme="github-light"
            crossorigin="anonymous"
            async>
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://github.com/utterance">comments powered by utterances.</a></noscript>

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
      <a href="mailto:iTBoyer@qq.com" class="iconfont icon-email" title="email"></a>
      <a href="https://github.com/huos3203" class="iconfont icon-github" title="github"></a>
      <a href="http://weibo.com/1791281385" class="iconfont icon-weibo" title="weibo"></a>
      <a href="http://www.zhihu.com/people/boyers" class="iconfont icon-zhihu" title="zhihu"></a>
      <a href="http://douban.com/people/boyers" class="iconfont icon-douban" title="douban"></a>
      <a href="http://localhost:1313" class="iconfont icon-bilibili" title="bilibili"></a>
  <a href="https://huos3203.github.io/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    ç”± <a class="hexo-link" href="https://gohugo.io">Hugo</a> å¼ºåŠ›é©±åŠ¨
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    ä¸»é¢˜ - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  <div class="busuanzi-footer">
    <span id="busuanzi_container_site_pv"> æœ¬ç«™æ€»è®¿é—®é‡ <span id="busuanzi_value_site_pv"><img src="/img/spinner.svg" alt="spinner.svg"/></span> æ¬¡ </span>
      <span class="division">|</span>
    <span id="busuanzi_container_site_uv"> æœ¬ç«™æ€»è®¿å®¢æ•° <span id="busuanzi_value_site_uv"><img src="/img/spinner.svg" alt="spinner.svg"/></span> äºº </span>
  </div>

  <span class="copyright-year">
    &copy; 
    2017 - 
    2019
    <span class="heart">
      <i class="iconfont icon-heart"></i>
    </span>
    <span class="author">iTBoyer</span>
  </span>
</div>
    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  <script src="/lib/highlight/highlight.pack.js?v=20171001"></script>
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js" integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js" integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin="anonymous"></script>
<script type="text/javascript" src="/dist/even.26188efa.min.js"></script>








</body>
</html>
